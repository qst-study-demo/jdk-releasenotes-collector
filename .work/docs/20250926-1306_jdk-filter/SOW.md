# Statement of Work: JDK課題抽出モジュール追加

## 背景と目的
- 既存の `bunri/jdk_issues_combined.txt` には複数のJDK課題が連結されているが、個別のJDKリストから必要な項目のみを抜き出す仕組みがない。
- 指定されたJDKリストファイル（例: `bunri/jdklist_jdk-21.0.7+6.txt`）に含まれるキーに一致する課題のみを抽出できるPythonモジュールを `bunri/` 配下に追加する。

## スコープ
- 入力: `bunri/jdk_issues_combined.txt`（既存）と、JDKキーを1行1件で保持するテキストファイル（例: `bunri/jdklist_jdk-21.0.7+6.txt`）。
- 出力: 抽出対象のJDK課題セクション文字列。CLIからの利用を想定したエントリポイント（`if __name__ == "__main__"`）で標準出力へ整形出力。
- 実装範囲: 新規モジュール（仮称 `bunri/jdk_issue_extractor.py`）。関数群および簡易CLIを実装。

## アウトオブスコープ
- 既存ツール類（`run/` 以下）の改修。
- XML解析や課題メタ情報抽出ロジックの再実装。
- リストファイル形式の変更（正準表現としてJDKキーは `JDK-\d+` のみ対応）。

## 調査記録（Serena LSP/構造確認）
- `rg --files -g '*.py'` を実行し既存Pythonスクリプトを確認。関連がありそうな `run/filter_jdk_issues.py` 等が存在するが、今回の抽出要求と直接関わる再利用対象のシンボルは無し。
- 新規モジュール追加のため既存シンボルへの影響はなし。

## 作業タスクリスト（AT）
1. モジュール設計: 入出力仕様、抽出アルゴリズム（セクション分割、キー照合）、CLI挙動を整理。
2. 実装: `bunri/jdk_issue_extractor.py` に抽出関数・ヘルパー・CLIを実装。
3. 動作確認: 指定例 `bunri/jdklist_jdk-21.0.7+6.txt` を使ってフィルタ結果を確認。
4. ドキュメント整備: モジュールの利用方法をファイル冒頭のdocstringに記載。

## 想定リスクと対処
- セクション境界の解釈誤り → `===` と `# SOURCE:` の組み合わせでブロックを特定し単体テキストとして扱う。
- リストに存在しないJDKキーの扱い → 無視し、処理後に見つからないキーを警告表示。
- 入力ファイルの読み込み失敗 → 例外メッセージで明示。

## 受入条件
- 指定リスト内の全キーについて、元ファイルから対応するセクションが抜き出されること。
- リストに含まれないセクションが出力されないこと。
- CLI実行時、標準出力に抽出結果が順序保存され、見つからなかったキーが標準エラーに警告として表示されること。

## スケジュール
- SOW承認後、約0.5営業日以内に実装・確認を完了予定。

