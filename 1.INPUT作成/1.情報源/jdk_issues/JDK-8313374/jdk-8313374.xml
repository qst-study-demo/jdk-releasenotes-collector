<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 08:53:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8313374] --enable-ccache&apos;s CCACHE_BASEDIR breaks builds</title>
                <link>https://bugs.openjdk.org/browse/JDK-8313374</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>With ccache enabled the dependencies no longer work.&lt;br/&gt;
&lt;br/&gt;
This leads to mysterious compilation errors where one has to `rm -rf build/XXX` and rebuild it from scratch.&lt;br/&gt;
&lt;br/&gt;
I am pretty sure in some cases these broken dependencies lead even to segfaulting code which again gets fixed by `rm -rf build/XXX`. Unfortunately I do not have now a reproducer for such case.&lt;br/&gt;
&lt;br/&gt;
man ccache even documents this problem:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;there might be cases where things break. One known issue is that absolute paths are not reproduced in dependency files&lt;br/&gt;
&lt;br/&gt;
I believe the whole --enable-ccache code should be dropped as default ccache flags is up to ccache upstream, OS vendor and developer&amp;#39;s preferences but the ccache defaults should not be quietly changed by the compiled package.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
# Tested on Fedora 38 x86_64&lt;br/&gt;
git checkout master # ad34be1f329edc8e7155983835cc70d733c014b8&lt;br/&gt;
patch -p1 &amp;lt;repro.patch&lt;br/&gt;
git checkout -b master-ccache&lt;br/&gt;
git commit -a --allow-empty-message -m &amp;#39;&amp;#39;&lt;br/&gt;
rm -rf ~/.ccache ~/.cache/ccache&lt;br/&gt;
(set -ex;KIND=release;rm -rf build/linux-x86_64-server-$KIND;export PATH=&amp;quot;$(echo &amp;quot;$PATH&amp;quot;|sed &amp;#39;s#:/usr/lib64/ccache:#:#&amp;#39;)&amp;quot;;bash configure --disable-precompiled-headers --enable-ccache --with-debug-level=$KIND --with-boot-jdk=/usr/lib/jvm/java-20;MAKEFLAGS= time make -C build/linux-x86_64-server-$KIND JOBS=32 images)&lt;br/&gt;
git checkout master&lt;br/&gt;
(set -ex;KIND=release;export PATH=&amp;quot;$(echo &amp;quot;$PATH&amp;quot;|sed &amp;#39;s#:/usr/lib64/ccache:#:#&amp;#39;)&amp;quot;;MAKEFLAGS= time make -C build/linux-x86_64-server-$KIND JOBS=32 images)&lt;br/&gt;
&lt;br/&gt;
-&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Updating support/modules_libs/java.base/server/libjvm.so due to 1 file(s)&lt;br/&gt;
/usr/bin/ld: openjdk-git/build/linux-x86_64-server-release/hotspot/variant-server/libjvm/objs/g1CollectedHeap.o: in function `G1CollectedHeap::wait_for_collection_finish()&amp;#39;:&lt;br/&gt;
make/hotspot/../../src/hotspot/share/gc/g1/g1CollectedHeap.hpp:291: undefined reference to `G1UncommitRegionTask::wait_if_active()&amp;#39;&lt;br/&gt;
collect2: error: ld returned 1 exit status&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5106959">JDK-8313374</key>
            <summary>--enable-ccache&apos;s CCACHE_BASEDIR breaks builds</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jkratochvil">Jan Kratochvil</assignee>
                                    <reporter username="jkratochvil">Jan Kratochvil</reporter>
                        <labels>
                            <label>jdk11u-fix-no</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Sat, 29 Jul 2023 06:55:24 -0700</created>
                <updated>Thu, 20 Feb 2025 08:04:28 -0800</updated>
                            <resolved>Tue, 22 Aug 2023 23:27:32 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14755289" author="sgehwolf" created="Thu, 20 Feb 2025 08:04:28 -0800"  >[OpenJDK 11u reject comment]&lt;br/&gt;
This must have been the case for many releases. I don&amp;#39;t think it&amp;#39;s something we need now in 11u. The less churn the better.</comment>
                            <comment id="14719040" author="roboduke" created="Mon, 4 Nov 2024 16:59:26 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2960&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2960&lt;/a&gt;&lt;br/&gt;
Date: 2024-11-05 00:53:38 +0000</comment>
                            <comment id="14719037" author="roboduke" created="Mon, 4 Nov 2024 16:55:57 -0800"  >[jdk11u-fix-request] Approval Request from sendaoYan&lt;br/&gt;
Clean backport to fix build bug with --enable-ccache. Without this PR, the jdk build with --enable-ccache can&amp;#39;t generate comments with JVM option -XX:+PrintInterpreter, this PR will fix the build issue. So I want to backport this PR to jdk11u-dev from jdk22.</comment>
                            <comment id="14717536" author="roboduke" created="Wed, 30 Oct 2024 00:32:48 -0700"  >[jdk17u-fix-request] Approval Request from sendaoYan&lt;br/&gt;
Clean backport to fix build bug with --enable-ccache. Without this PR, the jdk build with --enable-ccache can&amp;#39;t generate comments with JVM option -XX:+PrintInterpreter, this PR will fix the build issue. So I want to backport this PR to jdk17u-dev from jdk22.</comment>
                            <comment id="14717535" author="roboduke" created="Wed, 30 Oct 2024 00:32:31 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3015&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3015&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-30 07:27:00 +0000</comment>
                            <comment id="14715175" author="roboduke" created="Mon, 21 Oct 2024 00:20:10 -0700"  >[jdk21u-fix-request] Approval Request from sendaoYan&lt;br/&gt;
Clean backport to fix build bug with --enable-ccache. Without this PR, the jdk build with --enable-ccache can&amp;#39;t generate comments in -XX:+PrintInterpreter, this PR will fix the build issue. So I want to backport this PR to jdk21u-dev from jdk22.</comment>
                            <comment id="14714808" author="roboduke" created="Fri, 18 Oct 2024 06:23:07 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1066&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1066&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-18 13:14:46 +0000</comment>
                            <comment id="14605994" author="dukebot" created="Tue, 22 Aug 2023 23:27:31 -0700"  >Changeset: 571c435e&lt;br/&gt;
Author:    Jan Kratochvil &amp;lt;&lt;a href=&apos;mailto:jkratochvil@openjdk.org&apos;&gt;jkratochvil@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Yuri Nesterenko &amp;lt;&lt;a href=&apos;mailto:yan@openjdk.org&apos;&gt;yan@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-08-23 06:26:18 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/571c435e1a34dcf08fd7545d531c258c9116ea79&quot;&gt;https://git.openjdk.org/jdk/commit/571c435e1a34dcf08fd7545d531c258c9116ea79&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14600127" author="roboduke" created="Sat, 29 Jul 2023 07:03:26 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15080&quot;&gt;https://git.openjdk.org/jdk/pull/15080&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-29 13:58:37 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5142700">JDK-8343253</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143075">JDK-8343569</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5108913">JDK-8315060</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="104906" name="repro.patch" size="4703" author="jkratochvil" created="Sat, 29 Jul 2023 06:57:55 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32jrf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="199"><![CDATA[build]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>