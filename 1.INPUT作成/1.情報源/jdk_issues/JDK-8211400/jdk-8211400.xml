<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:08:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8211400] nsk.share.gc.Memory::getArrayLength returns wrong value</title>
                <link>https://bugs.openjdk.org/browse/JDK-8211400</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>nsk.share.gc.Memory::getArrayLength estimates array size as &amp;#39;(memory - extraSize) / (objectSize + referenceSize)&amp;#39;. this formula is incorrect, since array doesn&amp;#39;t use reference for each element.&lt;br/&gt;
the correct formula is &amp;#39;(memory - extraSize) / objectSize&amp;#39;&lt;br/&gt;
&lt;br/&gt;
nsk.share.gc.Memory::getArraySize should be fixed correspondingly</description>
                <environment></environment>
        <key id="4734934">JDK-8211400</key>
            <summary>nsk.share.gc.Memory::getArrayLength returns wrong value</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsunderbabu">Ramkumar Sunderbabu</assignee>
                                    <reporter username="iignatyev">Igor Ignatyev</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Wed, 9 Jul 2014 13:01:00 -0700</created>
                <updated>Tue, 13 May 2025 10:34:33 -0700</updated>
                            <resolved>Mon, 30 Sep 2024 06:47:37 -0700</resolved>
                                    <version>12</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14773857" author="roboduke" created="Fri, 25 Apr 2025 13:59:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/3027&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/3027&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-25 20:52:33 +0000</comment>
                            <comment id="14773856" author="roboduke" created="Fri, 25 Apr 2025 13:58:08 -0700"  >[jdk11u-fix-request] Approval Request from Paul Hohensee&lt;br/&gt;
Backport for parity with Oracle 11.0.28 Clean, low risk: fixes an nsk test, nsk passes with modified test.</comment>
                            <comment id="14768597" author="roboduke" created="Wed, 9 Apr 2025 07:05:09 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3467&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3467&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-09 13:58:22 +0000</comment>
                            <comment id="14768593" author="goetz" created="Wed, 9 Apr 2025 06:57:31 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.16-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport. SAP nightly testing passed.</comment>
                            <comment id="14767235" author="roboduke" created="Fri, 4 Apr 2025 11:41:37 -0700"  >[jdk21u-fix-request] Approval Request from Paul Hohensee&lt;br/&gt;
Backport for parity with Oracle 21.0.8. Clean, low risk: fixes an nsk test, nsk passes with modified test.</comment>
                            <comment id="14767231" author="roboduke" created="Fri, 4 Apr 2025 11:27:01 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1595&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1595&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-04 18:18:41 +0000</comment>
                            <comment id="14709134" author="dukebot" created="Mon, 30 Sep 2024 06:47:36 -0700"  >Changeset: 860d49db&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Ramkumar Sunderbabu &amp;lt;&lt;a href=&apos;mailto:rsunderbabu@openjdk.org&apos;&gt;rsunderbabu@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Kim Barrett &amp;lt;&lt;a href=&apos;mailto:kbarrett@openjdk.org&apos;&gt;kbarrett@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-09-30 13:43:40 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/860d49db22cf352eaf1b3b20fff43d090f0eebc8&quot;&gt;https://git.openjdk.org/jdk/commit/860d49db22cf352eaf1b3b20fff43d090f0eebc8&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14708736" author="roboduke" created="Sun, 29 Sep 2024 01:38:43 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/21247&quot;&gt;https://git.openjdk.org/jdk/pull/21247&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-29 08:33:31 +0000</comment>
                            <comment id="14213562" author="iignatyev" created="Tue, 2 Oct 2018 11:43:57 -0700"  >@dfazunen and I had a lively discussion which is more important the javadoc or the implementation which is used in several places. due to low priority and other reasons, this has been abandoned unsolved.</comment>
                            <comment id="14213561" author="iignatyev" created="Tue, 2 Oct 2018 11:41:34 -0700"  >suggested fix was:&lt;br/&gt;
getArrayLength and getArraySize were updated to use the correct formula &#8211; &amp;#39;(memory - extraSize) / objectSize&amp;#39;:&lt;br/&gt;
&lt;br/&gt;
diff -r 9e7c0608789f -r 47a20f65fe55 src/nsk/share/gc/Memory.java&lt;br/&gt;
--- a/src/nsk/share/gc/Memory.java	Wed Jul 23 17:21:19 2014 +0400&lt;br/&gt;
+++ b/src/nsk/share/gc/Memory.java	Fri Jul 25 17:54:03 2014 +0400&lt;br/&gt;
@@ -131,12 +131,9 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  @return length of array&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static int getArrayLength(long memory, long objectSize) {&lt;br/&gt;
-                int referenceSize = getReferenceSize();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int arrayExtraSize = getArrayExtraSize();&lt;br/&gt;
-                return (int) Math.min(&lt;br/&gt;
-                                (memory - arrayExtraSize) / (objectSize + referenceSize),&lt;br/&gt;
-                                Integer.MAX_VALUE&lt;br/&gt;
-                                );&lt;br/&gt;
+                return (int) Math.min((memory - arrayExtraSize) / objectSize,&lt;br/&gt;
+                        Integer.MAX_VALUE);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
@@ -147,7 +144,7 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*  @return size of array&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static long getArraySize(int length, long objectSize) {&lt;br/&gt;
-                return getObjectExtraSize() + length * (objectSize + getReferenceSize());&lt;br/&gt;
+                return getObjectExtraSize() + length * objectSize;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
</comment>
                            <comment id="13871789" author="avorobye" created="Fri, 27 Nov 2015 10:49:06 -0800"  >I can see lively discussion in Crucible which suddenly stopped about one and half year ago. So I am curious -  what is the current status of this fix?</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5153325">JDK-8352384</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155007">JDK-8353833</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155008">JDK-8353834</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155078">JDK-8353901</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155619">JDK-8354393</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5158563">JDK-8356889</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5141457">JDK-8342175</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jc4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>