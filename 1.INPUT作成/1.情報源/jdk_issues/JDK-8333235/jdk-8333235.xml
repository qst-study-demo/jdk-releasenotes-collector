<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:06:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8333235] vmTestbase/nsk/jdb/kill/kill001/kill001.java fails with C1</title>
                <link>https://bugs.openjdk.org/browse/JDK-8333235</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Test&lt;br/&gt;
vmTestbase/nsk/jdb/kill/kill001/kill001.java&lt;br/&gt;
fails with &lt;br/&gt;
-Xcomp -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -XX:TieredStopAtLevel=3 (1,2,3)&lt;br/&gt;
&lt;br/&gt;
See log in comments.</description>
                <environment></environment>
        <key id="5130651">JDK-8333235</key>
            <summary>vmTestbase/nsk/jdb/kill/kill001/kill001.java fails with C1</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lmesnik">Leonid Mesnik</assignee>
                                    <reporter username="lmesnik">Leonid Mesnik</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Wed, 29 May 2024 18:26:29 -0700</created>
                <updated>Mon, 11 Nov 2024 01:08:10 -0800</updated>
                            <resolved>Wed, 5 Jun 2024 09:08:09 -0700</resolved>
                                    <version>21</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14719958" author="roboduke" created="Thu, 7 Nov 2024 02:06:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1136&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1136&lt;/a&gt;&lt;br/&gt;
Date: 2024-11-07 10:00:34 +0000</comment>
                            <comment id="14719956" author="goetz" created="Thu, 7 Nov 2024 01:59:08 -0800"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.6-oracle.&lt;br/&gt;
No risk, only a test change&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14679250" author="dukebot" created="Wed, 5 Jun 2024 09:08:08 -0700"  >Changeset: f73922b2&lt;br/&gt;
Author:    Leonid Mesnik &amp;lt;&lt;a href=&apos;mailto:lmesnik@openjdk.org&apos;&gt;lmesnik@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-06-05 16:05:20 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f73922b27d126314fc3127ee25aa40b6258c8a6b&quot;&gt;https://git.openjdk.org/jdk/commit/f73922b27d126314fc3127ee25aa40b6258c8a6b&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14678872" author="roboduke" created="Tue, 4 Jun 2024 10:29:13 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19547&quot;&gt;https://git.openjdk.org/jdk/pull/19547&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-04 17:25:04 +0000</comment>
                            <comment id="14678538" author="lmesnik" created="Mon, 3 Jun 2024 19:29:35 -0700"  >The problem is AsyncExpetion from kill might be thrown somewhere while locking stream&lt;br/&gt;
Exception occurred: nsk.jdb.kill.kill001.MyException (to be caught at: nsk.jdb.kill.kill001.MyThread.run(), line=170 bci=111)&amp;quot;thread=MyThread-4&amp;quot;, nsk.share.Log.doPrint(), line=495 bci=1&lt;br/&gt;
495            PrintStream stream = findOutStream();&lt;br/&gt;
&lt;br/&gt;
MyThread-4[1] &amp;gt; &lt;br/&gt;
Exception occurred: java.lang.ThreadDeath (to be caught at: nsk.jdb.kill.kill001.MyThread.run(), line=170 bci=111)&amp;quot;thread=MyThread-0&amp;quot;, java.util.concurrent.locks.ReentrantLock$Sync.lock(), line=153 bci=1&lt;br/&gt;
&lt;br/&gt;
MyThread-0[1] &amp;gt; Thread MyThread-0 caught expected async exception: java.lang.ThreadDeath&lt;br/&gt;
&lt;br/&gt;
Exception occurred: java.lang.NullPointerException (to be caught at: nsk.jdb.kill.kill001.MyThread.run(), line=170 bci=111)&amp;quot;thread=MyThread-1&amp;quot;, java.util.concurrent.locks.ReentrantLock$Sync.lock(), line=153 bci=1&lt;br/&gt;
&lt;br/&gt;
So the PrintStream lock might be inconsistent. It breaks printing and communication with the debugger.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;</comment>
                            <comment id="14678522" author="cjplummer" created="Mon, 3 Jun 2024 16:27:10 -0700"  >It looks like the 1st occurrence is jdk-23+23+1904, which is:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8332112&quot; title=&quot;Update nsk.share.Log to don&amp;#39;t print summary during VM shutdown hook &quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8332112&quot;&gt;&lt;strike&gt;JDK-8332112&lt;/strike&gt;&lt;/a&gt; Update nsk.share.Log to don&amp;#39;t print summary during VM shutdown hook</comment>
                            <comment id="14678517" author="cjplummer" created="Mon, 3 Jun 2024 15:33:59 -0700"  >The test does 5 differrent &amp;quot;kill&amp;quot; commands with all threads suspended. &amp;quot;kill&amp;quot; in jdb is ThreadReference.stop() in JDI, so it results in throwing an async exception. The test then issues 6 &amp;quot;cont&amp;quot; commands, 1 for the current suspension of all threads, and then one for each exception that is thrown and handled by jdb. It appears that the last &amp;quot;cont&amp;quot; command is not completing. Comparing the output to a passing test, it looks like one exception was never delivered:&lt;br/&gt;
&lt;br/&gt;
reply[3]: Exception occurred: com.sun.jdi.IncompatibleThreadStateException (to be caught at: nsk.jdb.kill.kill001.MyThread.run(), line=161 bci=111)&amp;quot;thread=MyThread-3&amp;quot;, nsk.jdb.kill.kill001.MyThread.run(), line=160 bci=100&lt;br/&gt;
reply[4]: 160                kill001a.log.display(&amp;quot;exited synchronized&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
So this would explain why the &amp;quot;cont&amp;quot; never completed. It&amp;#39;s unclear why this exception was not delivered. In the 3 failures I looked at, it was always this IncompatibleThreadStateException that was not delivered, but in one case additionally the following was not delivered:&lt;br/&gt;
&lt;br/&gt;
reply[1]: Exception occurred: java.lang.SecurityException (to be caught at: nsk.jdb.kill.kill001.MyThread.run(), line=161 bci=111)&amp;quot;thread=MyThread-2&amp;quot;, nsk.jdb.kill.kill001.MyThread.run(), line=160 bci=100&lt;br/&gt;
reply[2]: 160                kill001a.log.display(&amp;quot;exited synchronized&amp;quot;);</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5136684">JDK-8338284</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143540">JDK-8343919</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5129258">JDK-8332112</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36jaj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="370"><![CDATA[debugger]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>