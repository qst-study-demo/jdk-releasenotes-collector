<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:55:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8350483] AArch64: turn on signum intrinsics by default on Ampere CPUs </title>
                <link>https://bugs.openjdk.org/browse/JDK-8350483</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>JMH microbenchmarks vm.compiler.signum.* produce problematic scores because fmov is used to transmit data between GPRs and FPRs, the time cost is significant, same as mentioned by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8251525&quot; title=&quot;AArch64: Faster Math.signum(fp)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8251525&quot;&gt;&lt;strike&gt;JDK-8251525&lt;/strike&gt;&lt;/a&gt;. &lt;br/&gt;
&lt;br/&gt;
Particularly, Signum._1_signumFloatTest performance can be improved much by setting -XX:+UnlockDiagnosticVMOptions -XX:+UseSignumIntrinsic, which generates facgt/ushr/bsl pairs for the unrolling code snippet of the hot for-loop of the test case. Verified on Ampere-1A and found the score of patched became 40x better than base (thrpt, ops/s). This JBS is to turn the option ON by default for all Ampere CPUs. &lt;br/&gt;
</description>
                <environment></environment>
        <key id="5151151">JDK-8350483</key>
            <summary>AArch64: turn on signum intrinsics by default on Ampere CPUs </summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="qpzhang">Patrick Zhang</assignee>
                                    <reporter username="qpzhang">Patrick Zhang</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk24u-fix-SQE-ok-next</label>
                            <label>jdk24u-fix-request</label>
                            <label>jdk24u-fix-yes</label>
                    </labels>
                <created>Thu, 20 Feb 2025 22:46:27 -0800</created>
                <updated>Sun, 29 Jun 2025 02:57:10 -0700</updated>
                            <resolved>Wed, 26 Feb 2025 01:11:27 -0800</resolved>
                                    <version>21</version>
                    <version>24</version>
                    <version>25</version>
                                    <fixVersion>25</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14768843" author="roboduke" created="Thu, 10 Apr 2025 01:17:18 -0700"  >[jdk17u-fix-request] Approval Request from Patrick Zhang&lt;br/&gt;
Should get backported to 17u for parity with 21u and 24u which have been done. Low risk and tier1 tests and other sanity checks pass on Ampere-1A systems. Initially intended as a performance optimization but later on found saving up to 80~100x performance defect in certain extreme cases. The issue severely impacted `signum` functions. Given that 17u is still extensively used by Java devs in practice, addressing this problem is essential to retore performance and maintain platform reliability. Thanks for approval.</comment>
                            <comment id="14767902" author="roboduke" created="Tue, 8 Apr 2025 02:34:36 -0700"  >[jdk21u-fix-request] Approval Request from Patrick Zhang&lt;br/&gt;
the backport is straight-forward with the code changes safely confined to AArch64-port Ampere CPUs. These changes have been thoroughly verified on the Ampere-1A system, presenting a very low risk to the target jdk21u-dev branch. The fix is for not only for performance but also can be regarded as a function-wise patch. Because the worst-case performance comparison revealed a significant disparity between the patched and base versions, that the unpatched version taking 80~100x longer than normal cases, severely impacting the `signum` functions, so important to LTS versions. Thanks for approval.</comment>
                            <comment id="14767834" author="roboduke" created="Tue, 8 Apr 2025 02:04:37 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1606&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1606&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-08 08:57:04 +0000</comment>
                            <comment id="14757795" author="roboduke" created="Tue, 4 Mar 2025 00:57:51 -0800"  >[jdk24u-fix-request] Approval Request from Patrick Zhang&lt;br/&gt;
The backport is simple and straight-forward, the change itself is safely limited to AArch64-port Ampere CPUs only, and well verified on Ampere-1A system, can be safe for backport. The fix is for not only for performance but also can be regarded a function-wise patch since the worst performance gap (patched vs base) is super huge. Please approve, thanks.</comment>
                            <comment id="14757700" author="roboduke" created="Mon, 3 Mar 2025 20:17:18 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/101&quot;&gt;https://git.openjdk.org/jdk24u/pull/101&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-04 04:12:12 +0000</comment>
                            <comment id="14756764" author="roboduke" created="Wed, 26 Feb 2025 23:04:13 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3300&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3300&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-27 06:58:37 +0000</comment>
                            <comment id="14756415" author="dukebot" created="Wed, 26 Feb 2025 01:11:25 -0800"  >Changeset: f529bf71&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Patrick Zhang &amp;lt;&lt;a href=&apos;mailto:qpzhang@openjdk.org&apos;&gt;qpzhang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Andrew Haley &amp;lt;&lt;a href=&apos;mailto:aph@openjdk.org&apos;&gt;aph@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-02-26 09:07:07 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/f529bf712d8946584999dfc98abea60c22c97167&quot;&gt;https://git.openjdk.org/jdk/commit/f529bf712d8946584999dfc98abea60c22c97167&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14755615" author="roboduke" created="Sat, 22 Feb 2025 07:32:03 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/23735&quot;&gt;https://git.openjdk.org/jdk/pull/23735&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-22 15:27:41 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5152288">JDK-8351433</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155247">JDK-8354058</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5163146">JDK-8360957</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5151360">JDK-8350663</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39xhn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>