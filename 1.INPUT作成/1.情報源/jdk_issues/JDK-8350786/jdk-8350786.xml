<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:56:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8350786] Some java/lang jtreg tests miss requires vm.hasJFR</title>
                <link>https://bugs.openjdk.org/browse/JDK-8350786</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>While testing a bit with a minimal JVM, it has been noticed that some java/lang jtreg tests use jfr but do not declare it with a  &amp;quot;requires vm.hasJFR&amp;quot; ; that leads to test errors in a JVM setup with no JFR .</description>
                <environment></environment>
        <key id="5151518">JDK-8350786</key>
            <summary>Some java/lang jtreg tests miss requires vm.hasJFR</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbaesken">Matthias Baesken</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk24u-fix-SQE-ok-next</label>
                            <label>jdk24u-fix-request</label>
                            <label>jdk24u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Wed, 26 Feb 2025 07:18:22 -0800</created>
                <updated>Fri, 21 Mar 2025 01:09:14 -0700</updated>
                            <resolved>Thu, 27 Feb 2025 05:38:43 -0800</resolved>
                                    <version>25</version>
                                    <fixVersion>25</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14762196" author="roboduke" created="Wed, 19 Mar 2025 07:26:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1530&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1530&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-19 14:20:35 +0000</comment>
                            <comment id="14762195" author="mbaesken" created="Wed, 19 Mar 2025 07:24:20 -0700"  >jdk21u-dev backport request&lt;br/&gt;
I would like to have the patch in jdk21u-dev as well, because the issue is present there too. The backport is low risk (just small test adjustment) and 1 file is missing in 21u-dev, otherwise clean.</comment>
                            <comment id="14760443" author="mbaesken" created="Thu, 13 Mar 2025 02:00:01 -0700"  >jdk24u backport request&lt;br/&gt;
I would like to have the patch in jdk24u as well, because the issue is present there too.  The backport is low risk (just small test adjustment) and 1 file is missing in 24u, otherwise clean.</comment>
                            <comment id="14760142" author="roboduke" created="Wed, 12 Mar 2025 06:45:53 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/129&quot;&gt;https://git.openjdk.org/jdk24u/pull/129&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-12 13:37:25 +0000</comment>
                            <comment id="14756881" author="dukebot" created="Thu, 27 Feb 2025 05:38:41 -0800"  >Changeset: d6d94472&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Matthias Baesken &amp;lt;&lt;a href=&apos;mailto:mbaesken@openjdk.org&apos;&gt;mbaesken@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-02-27 13:34:38 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/d6d94472c21b1fa4839f548b85908967057c3f07&quot;&gt;https://git.openjdk.org/jdk/commit/d6d94472c21b1fa4839f548b85908967057c3f07&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14756806" author="mbaesken" created="Thu, 27 Feb 2025 00:58:58 -0800"  >&amp;gt; Note there are a very large number of debugger tests under test/hotspot/jtreg/vmTestbase/nsk. I think well over 1000. That is a lot of tests to modify for this purpose.&lt;br/&gt;
&lt;br/&gt;
A few of those vmTestbase/nsk even have the tag but it is not very consistent :&lt;br/&gt;
&lt;br/&gt;
jvmti/GetObjectMonitorUsage/objmonusage006/TestDescription.java:40: * @requires vm.jvmti&lt;br/&gt;
jvmti/InterruptThread/intrpthrd003/TestDescription.java:45: * @requires vm.jvmti&lt;br/&gt;
jvmti/PopFrame/popframe011/TestDescription.java:40: * @requires vm.jvmti&lt;br/&gt;
jvmti/RedefineClasses/StressRedefineVirtual/StressRedefineVirtual.java:30: * @requires vm.jvmti &amp;amp; vm.continuations&lt;br/&gt;
jvmti/SuspendThread/suspendthrd003/TestDescription.java:174: * @requires vm.jvmti&lt;br/&gt;
&lt;br/&gt;
I haven&amp;#39;t looked much into those.  For the :tier1 jdk  jtreg tests it looks more feasible to have correct requires tags because we do not need to change 1000 tests there just a few dozen.&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14756574" author="cjplummer" created="Wed, 26 Feb 2025 11:42:42 -0800"  >I believe Oracle support for minimal VM is simply that we will make sure it builds. I don&amp;#39;t think we run any tests on it. Long ago when we provided more support for minimal and ran tests, we excluded the test suites that used features excluded from minimal VM (although I think the were also some tests that made sure the proper errors were produced).&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m not sure to what extent we want to add &amp;quot;@requires vm.jvmti&amp;quot;. I see we use it a lot for jvmti tests, but I think not at all for debugger tests. Possibly the better approach is to simply not run these tests on minimal. Note there are a very large number of debugger tests under test/hotspot/jtreg/vmTestbase/nsk. I think well over 1000. That is a lot of tests to modify for this purpose.</comment>
                            <comment id="14756528" author="roboduke" created="Wed, 26 Feb 2025 07:53:55 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/23805&quot;&gt;https://git.openjdk.org/jdk/pull/23805&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-26 15:47:52 +0000</comment>
                            <comment id="14756517" author="mbaesken" created="Wed, 26 Feb 2025 07:28:40 -0800"  >[~cjplummer]  we see similar issues too with tests dealing with debugging e.g. ~ 20 tests from com/sun/jdi . Should those tests be tagged with &amp;quot;@requires vm.jvmti&amp;quot;  because afaik this is missed in for example the minimal JVM ?&lt;br/&gt;
&lt;br/&gt;
( We see similar issues too with tests using the  JVM feature &amp;quot;management&amp;quot; ;  those are seldom (or never?)  tagged with a requires indicating that this JVM has the feature management, so they all fail e.g. with a minimal JVM. I am not even sure if there is a tag for &amp;quot;management&amp;quot;  , unlike the features jfr and jvmti .</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5153204">JDK-8352272</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153618">JDK-8352586</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39zr7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17339"><![CDATA[b13]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="190"><![CDATA[java.lang]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>