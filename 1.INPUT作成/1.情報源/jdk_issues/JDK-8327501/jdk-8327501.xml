<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Fri Sep 26 01:07:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8327501] Common ForkJoinPool prevents class unloading in some cases</title>
                <link>https://bugs.openjdk.org/browse/JDK-8327501</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When the ForkJoinPool.commonPool() creates new worker threads, they capture an AccessControlContext from the location where they were created, which means that the class won&amp;#39;t get unloaded for the lifetime of that worker thread.</description>
                <environment></environment>
        <key id="5123451">JDK-8327501</key>
            <summary>Common ForkJoinPool prevents class unloading in some cases</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vklang">Viktor Klang</assignee>
                                    <reporter username="vklang">Viktor Klang</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>redhat-interest</label>
                            <label>regression</label>
                    </labels>
                <created>Wed, 6 Mar 2024 14:56:38 -0800</created>
                <updated>Mon, 25 Nov 2024 13:35:20 -0800</updated>
                            <resolved>Thu, 7 Mar 2024 01:46:49 -0800</resolved>
                                    <version>19</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>23</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="14713443" author="sgehwolf" created="Wed, 16 Oct 2024 02:36:55 -0700"  >Note on OpenJDK 21 backport: The JDK 21 backport got backed out from the 21.0.5 release with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8341989&quot; title=&quot;[21u] Back out JDK-8327501 and JDK-8328366&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8341989&quot;&gt;&lt;strike&gt;JDK-8341989&lt;/strike&gt;&lt;/a&gt;.</comment>
                            <comment id="14677780" author="roboduke" created="Fri, 31 May 2024 04:38:36 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes the class unloading regression since JDK 19. Applies cleanly. Tests pass, but there is a regression, which is fixed by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8328366&quot; title=&quot;Thread.setContextClassloader from thread in FJP commonPool task no longer works after JDK-8327501&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8328366&quot;&gt;&lt;strike&gt;JDK-8328366&lt;/strike&gt;&lt;/a&gt;. Risk is medium: affects common paths, has bugtail with easily detectable failures.</comment>
                            <comment id="14676302" author="roboduke" created="Mon, 27 May 2024 01:45:38 -0700"  >[jdk22u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes the class unloading regression since JDK 19. Applies cleanly. Tests pass, but there is a regression, which is fixed by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8328366&quot; title=&quot;Thread.setContextClassloader from thread in FJP commonPool task no longer works after JDK-8327501&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8328366&quot;&gt;&lt;strike&gt;JDK-8328366&lt;/strike&gt;&lt;/a&gt;. Risk is medium: affects common paths, has bugtail with easily detectable failures. Doing this patch in 22.0.2 exposes the fix to larger group of users, paving the way to 21u backport.</comment>
                            <comment id="14673705" author="roboduke" created="Wed, 15 May 2024 10:25:57 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/206&quot;&gt;https://git.openjdk.org/jdk22u/pull/206&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-15 09:32:31 +0000</comment>
                            <comment id="14658151" author="sgehwolf" created="Mon, 18 Mar 2024 09:50:49 -0700"  >OK. Created &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8328366&quot; title=&quot;Thread.setContextClassloader from thread in FJP commonPool task no longer works after JDK-8327501&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8328366&quot;&gt;&lt;strike&gt;JDK-8328366&lt;/strike&gt;&lt;/a&gt; in order to get this fixed.</comment>
                            <comment id="14658143" author="JIRAUSER20508" created="Mon, 18 Mar 2024 09:30:47 -0700"  >[~sgehwolf] I don&amp;#39;t think one was created yet, so yes, please go ahead and create one.</comment>
                            <comment id="14658106" author="sgehwolf" created="Mon, 18 Mar 2024 07:38:50 -0700"  >[~alanb] [~vklang] Is there a bug tracking this CCL compatibility issue introduced with this fix? Shall I file one?</comment>
                            <comment id="14658104" author="sgehwolf" created="Mon, 18 Mar 2024 07:34:00 -0700"  >&lt;a href=&quot;https://github.com/quarkusio/quarkus/issues/39526&quot;&gt;https://github.com/quarkusio/quarkus/issues/39526&lt;/a&gt; has steps how to reproduce the setContextClassLoader() compatibility issue in the wild.</comment>
                            <comment id="14657489" author="JIRAUSER20508" created="Thu, 14 Mar 2024 09:48:56 -0700"  >Discussed this with [~alanb] just now and he thinks he has a solution for the unloading AND the CCL issue.</comment>
                            <comment id="14656701" author="JIRAUSER20508" created="Tue, 12 Mar 2024 02:47:55 -0700"  >[~alanb] Agreed. Given that the situation only occurs in the absence of a security manager I think we should have enough room to find a suitable alternative solution here. I&amp;#39;ll do some thinking and check with [~dl] as well.</comment>
                            <comment id="14656528" author="alanb" created="Mon, 11 Mar 2024 23:23:20 -0700"  >Christian is right. It&amp;#39;s possible that code executed in the common pool does attempt to set the thread&amp;#39;s CCL. So we will need to look at this again, maybe reset if changed by a task.</comment>
                            <comment id="14656304" author="cwimmer" created="Mon, 11 Mar 2024 09:52:37 -0700"  >The fix for this issue &lt;a href=&quot;https://github.com/openjdk/jdk/pull/18144&quot;&gt;https://github.com/openjdk/jdk/pull/18144&lt;/a&gt; has a compatibility impact that might have been overlooked: Using `InnocuousForkJoinWorkerThread` means that any task that runs in the common pool can no longer use `Thread.currentThreaad().setContextClassLoader(...)` - that unconditionally throws a `SecurityException`.&lt;br/&gt;
&lt;br/&gt;
Shouldn&amp;#39;t a fix with such an impact at least require a CSR and proper documentation?</comment>
                            <comment id="14656074" author="dholmes" created="Sun, 10 Mar 2024 15:25:50 -0700"  >[~shade] please see&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://github.com/openjdk/guide/pull/119&quot;&gt;https://github.com/openjdk/guide/pull/119&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The use of the &amp;quot;Affects Version&amp;quot; field is trying to be made more consistent/stable and have everyone follow the same rules. If you have feedback please provide in the above PR.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Once you removed 21 as affected versions here, this issue went off my 21u pending backports radar.&lt;br/&gt;
&lt;br/&gt;
Again please raise this in the above PR. It sounds like your filtering mechanisms are at odds with the proposed field usage.</comment>
                            <comment id="14655731" author="shade" created="Fri, 8 Mar 2024 00:44:19 -0800"  >&amp;gt; Affects 19 implies affects 20, 21, 22, 23. - per the dev guide. &lt;br/&gt;
&lt;br/&gt;
Well, OpenJDK Dev Guide also allows specifying more versions: &amp;quot;Adding an additional value for a separate release family where it&#8217;s still reproducible, e.g. 12, isn&#8217;t necessary but ok, especially if there&#8217;s been a few releases since the latest version noted.&amp;quot; This is what we have been doing for a while now, for a good reason. Having the explicit versions set simplifies the backport reports that could ask very directly &amp;quot;What bugs are affecting 21?&amp;quot; The version comparisons get weird otherwise, since the versions are not exactly numbers, and there is a clear distinction between &amp;quot;21&amp;quot; and &amp;quot;21.0.3&amp;quot;, for example. &lt;br/&gt;
&lt;br/&gt;
Once you removed 21 as affected versions here, this issue went off my 21u pending backports radar.&lt;br/&gt;
&lt;br/&gt;
So I&amp;#39;d say: supply the minimal version on the issues if you want (OpenJDK Dev Guide suggests to use minimal version), but let&amp;#39;s not go around and remove the versions from existing bugs set by others (OpenJDK Dev Guide allows explicit versions).</comment>
                            <comment id="14655687" author="dholmes" created="Thu, 7 Mar 2024 18:43:29 -0800"  >Affects 19 implies affects 20, 21, 22, 23. - per the dev guide.</comment>
                            <comment id="14655435" author="shade" created="Thu, 7 Mar 2024 02:21:19 -0800"  >All right, we would need to pick up the fix to 21u then. I opened the PR against jdk21u-dev to test it, while the change stabilizes in mainline.</comment>
                            <comment id="14655433" author="roboduke" created="Thu, 7 Mar 2024 02:18:46 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/338&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/338&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-07 10:07:27 +0000</comment>
                            <comment id="14655430" author="JIRAUSER20508" created="Thu, 7 Mar 2024 02:15:10 -0800"  >[~shade] Yes, I think that it starts with 19 so I added 19 and 20 to the list of affected versions. Thanks!</comment>
                            <comment id="14655414" author="shade" created="Thu, 7 Mar 2024 01:54:54 -0800"  >This looks like a regression from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8277090&quot; title=&quot;jsr166 refresh for jdk19&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8277090&quot;&gt;&lt;strike&gt;JDK-8277090&lt;/strike&gt;&lt;/a&gt; in JDK 19, right?</comment>
                            <comment id="14655410" author="dukebot" created="Thu, 7 Mar 2024 01:46:47 -0800"  >Changeset: 53c4714a&lt;br/&gt;
Author:    Viktor Klang &amp;lt;&lt;a href=&apos;mailto:vklang@openjdk.org&apos;&gt;vklang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-03-07 09:44:35 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/53c4714aab2e072ba18631875dcaa3b2d5d22243&quot;&gt;https://git.openjdk.org/jdk/commit/53c4714aab2e072ba18631875dcaa3b2d5d22243&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14655270" author="roboduke" created="Wed, 6 Mar 2024 15:03:36 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18144&quot;&gt;https://git.openjdk.org/jdk/pull/18144&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-06 22:58:54 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5130494">JDK-8333095</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5136378">JDK-8338027</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5136565">JDK-8338187</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5062592">JDK-8277090</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5144815">JDK-8344993</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5124459">JDK-8328366</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5141258">JDK-8341989</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35bj7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="215"><![CDATA[java.util.concurrent]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>