<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:23:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8328864] NullPointerException in sun.security.jca.ProviderList.getService()</title>
                <link>https://bugs.openjdk.org/browse/JDK-8328864</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Consider this trivial application code:&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;import java.security.*;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public class KeyStoreTest {&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(final String[] args) throws Exception {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final KeyStore ks = KeyStore.getInstance(&amp;quot;PKCS12&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;Got keystore &amp;quot; + ks);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
When compiled and run without any additional security properties as follows, it works fine:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java KeyStoreTest&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Got keystore &lt;a href=&apos;mailto:java.security.KeyStore@6b884d57&apos;&gt;java.security.KeyStore@6b884d57&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Now create a file &amp;quot;/tmp/app-security.properties&amp;quot;  file with the following contents (it sets a security property)&lt;br/&gt;
&lt;br/&gt;
jdk.security.provider.preferred=KeyStore.PKCS12:JipherJCE&lt;br/&gt;
&lt;br/&gt;
and run that program as follows by passing &amp;quot;/tmp/app-security.properties&amp;quot; to -Djava.security.properties:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java -Djava.security.properties=/tmp/app-security.properties KeyStoreTest&lt;br/&gt;
&lt;br/&gt;
This time it throws a NullPointerException:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Exception in thread &amp;quot;main&amp;quot; java.lang.NullPointerException: Cannot invoke &amp;quot;java.security.Provider.getService(String, String)&amp;quot; because &amp;quot;p&amp;quot; is null&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/sun.security.jca.ProviderList.getService(ProviderList.java:376)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:157)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.security.Security.getImpl(Security.java:658)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.security.KeyStore.getInstance(KeyStore.java:870)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at KeyStoreTest.main(KeyStoreTest.java:7)&lt;br/&gt;
&lt;br/&gt;
I ran this on Java 22 but is applicable for lower Java versions too.</description>
                <environment></environment>
        <key id="5125039">JDK-8328864</key>
            <summary>NullPointerException in sun.security.jca.ProviderList.getService()</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bperez">Ben Perez</assignee>
                                    <reporter username="jpai">Jaikiran Pai</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>starter-bug</label>
                    </labels>
                <created>Sun, 24 Mar 2024 18:29:17 -0700</created>
                <updated>Tue, 17 Jun 2025 22:39:56 -0700</updated>
                            <resolved>Thu, 2 May 2024 11:53:00 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14767247" author="roboduke" created="Fri, 4 Apr 2025 12:11:14 -0700"  >[jdk17u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Updated `getService` to check whether `getProvider` returns null when checking for preferred providers, continuing the loop if so. Added NullPreferredList test.&lt;br/&gt;
&lt;br/&gt;
Risk: Low. Tip change was merged in May 2024 and adds conditional statement to catch exception case, otherwise preserving functionality. Further, new test explicitly confirms altered functionality.&lt;br/&gt;
&lt;br/&gt;
Testing: &lt;br/&gt;
* GHA Sanity Checks&lt;br/&gt;
* Tier 1 and 2 tests locally</comment>
                            <comment id="14767246" author="roboduke" created="Fri, 4 Apr 2025 12:09:54 -0700"  >[jdk21u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Updated `getService` to check whether `getProvider` returns null when checking for preferred providers, continuing the loop if so. Added NullPreferredList test.&lt;br/&gt;
&lt;br/&gt;
Risk: Low. Tip change was merged in May 2024 and adds conditional statement to catch exception case, otherwise preserving functionality. Further, new test explicitly confirms altered functionality.&lt;br/&gt;
&lt;br/&gt;
Testing: &lt;br/&gt;
* GHA Sanity Checks&lt;br/&gt;
* Tier 1 and 2 tests locally</comment>
                            <comment id="14767244" author="roboduke" created="Fri, 4 Apr 2025 12:06:31 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3442&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3442&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-04 18:58:27 +0000</comment>
                            <comment id="14767243" author="roboduke" created="Fri, 4 Apr 2025 12:06:28 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1598&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1598&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-04 18:58:19 +0000</comment>
                            <comment id="14670547" author="dukebot" created="Thu, 2 May 2024 11:52:59 -0700"  >Changeset: cd3a6075&lt;br/&gt;
Author:    Ben Perez &amp;lt;&lt;a href=&apos;mailto:ben.perez@oracle.com&apos;&gt;ben.perez@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Weijun Wang &amp;lt;&lt;a href=&apos;mailto:weijun@openjdk.org&apos;&gt;weijun@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-05-02 18:50:38 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/cd3a607576bede17f48c3d5ebde2bf05f3b615ba&quot;&gt;https://git.openjdk.org/jdk/commit/cd3a607576bede17f48c3d5ebde2bf05f3b615ba&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14664696" author="roboduke" created="Thu, 11 Apr 2024 09:34:20 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18746&quot;&gt;https://git.openjdk.org/jdk/pull/18746&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-11 16:29:00 +0000</comment>
                            <comment id="14660256" author="mullan" created="Mon, 25 Mar 2024 14:25:54 -0700"  >Looks like the `ProviderList.getService` code should check for a `null` provider returned by `getProvider(String)` and continue the loop if so.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5155093">JDK-8353915</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35l9v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17415"><![CDATA[b22]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="195"><![CDATA[java.security]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>