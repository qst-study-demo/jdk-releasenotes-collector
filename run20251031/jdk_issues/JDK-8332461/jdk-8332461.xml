<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:05:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8332461] ubsan : dependencies.cpp:906:3: runtime error: load of value 4294967295, which is not a valid value for type &apos;DepType&apos;</title>
                <link>https://bugs.openjdk.org/browse/JDK-8332461</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>On linux86_64  fastdebug, with ubsan enabled, we run into this issue :&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;assert(_type != end_marker, &amp;quot;already at end&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
/jdk/src/hotspot/share/code/dependencies.cpp:906:3: runtime error: load of value 4294967295, which is not a valid value for type &amp;#39;DepType&amp;#39;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#0 0x14e2c941db7b in Dependencies::DepStream::next() /jdk/src/hotspot/share/code/dependencies.cpp:906&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#1 0x14e2cadaf907 in Dependencies::validate_dependencies(CompileTask*, char**) /jdk/src/hotspot/share/code/dependencies.cpp:632&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#2 0x14e2ca7b70c0 in ciEnv::validate_compile_task_dependencies(ciMethod*) /jdk/src/hotspot/share/ci/ciEnv.cpp:1007&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#3 0x14e2ca7c1719 in ciEnv::register_method(ciMethod*, int, CodeOffsets*, int, CodeBuffer*, int, OopMapSet*, ExceptionHandlerTable*, ImplicitExceptionTable*, AbstractCompiler*, bool, bool, bool, int, RTMState) /jdk/src/hotspot/share/ci/ciEnv.cpp:1091&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#4 0x14e2ca2744f6 in Compilation::install_code(int) /jdk/src/hotspot/share/c1/c1_Compilation.cpp:426&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#5 0x14e2ca283a81 in Compilation::compile_method() /jdk/src/hotspot/share/c1/c1_Compilation.cpp:488&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#6 0x14e2ca2854aa in Compilation::Compilation(AbstractCompiler*, ciEnv*, ciMethod*, int, BufferBlob*, bool, DirectiveSet*) /jdk/src/hotspot/share/c1/c1_Compilation.cpp:609&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#7 0x14e2ca28a9f3 in Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*) /jdk/src/hotspot/share/c1/c1_Compiler.cpp:260&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#8 0x14e2cab51df1 in CompileBroker::invoke_compiler_on_method(CompileTask*) /jdk/src/hotspot/share/compiler/compileBroker.cpp:2303&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#9 0x14e2cab538ee in CompileBroker::compiler_thread_loop() /jdk/src/hotspot/share/compiler/compileBroker.cpp:1961&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#10 0x14e2cb7b03dc in JavaThread::thread_main_inner() /jdk/src/hotspot/share/runtime/javaThread.cpp:759&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#11 0x14e2cd2a7c2f in Thread::call_run() /jdk/src/hotspot/share/runtime/thread.cpp:225&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#12 0x14e2cc791415 in thread_native_entry /jdk/src/hotspot/os/linux/os_linux.cpp:846&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#13 0x14e2d2d486e9 in start_thread (/lib64/libpthread.so.0+0xa6e9) (BuildId: 2f8d3c2d0f4d7888c2598d2ff6356537f5708a73)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;... (rest of output omitted)&lt;br/&gt;
&lt;br/&gt;
Looks like some variable (probably _type)  is not initialized or somehow overwritten.&lt;br/&gt;
We might also remove the assertion if it brings not much benefit.</description>
                <environment></environment>
        <key id="5129692">JDK-8332461</key>
            <summary>ubsan : dependencies.cpp:906:3: runtime error: load of value 4294967295, which is not a valid value for type &apos;DepType&apos;</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amitkumar">Amit Kumar</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-SQE-ok</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk23u-fix-yes</label>
                            <label>oracle-interest</label>
                            <label>oracle-triage-23</label>
                            <label>starter</label>
                            <label>ubsan</label>
                    </labels>
                <created>Fri, 17 May 2024 03:39:20 -0700</created>
                <updated>Fri, 11 Oct 2024 06:21:35 -0700</updated>
                            <resolved>Thu, 5 Sep 2024 00:03:29 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14710791" author="roboduke" created="Mon, 7 Oct 2024 01:04:22 -0700"  >[jdk23u-fix-request] Approval Request from Amit Kumar&lt;br/&gt;
backport is required as it fixes UBSAN build failure due to missing value in the enum.</comment>
                            <comment id="14710758" author="roboduke" created="Sun, 6 Oct 2024 22:31:14 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/138&quot;&gt;https://git.openjdk.org/jdk23u/pull/138&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-07 05:26:13 +0000</comment>
                            <comment id="14703002" author="roboduke" created="Thu, 5 Sep 2024 03:08:36 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/955&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/955&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-05 10:02:23 +0000</comment>
                            <comment id="14703001" author="roboduke" created="Thu, 5 Sep 2024 03:08:28 -0700"  >[jdk21u-fix-request] Approval Request from Amit Kumar&lt;br/&gt;
this backport is required to fix the issue where UBSAN will complain about non-existent value -1 in the enum. Test failure for macos-aarch64 is unrelated to this change</comment>
                            <comment id="14702952" author="dukebot" created="Thu, 5 Sep 2024 00:03:28 -0700"  >Changeset: 28de44da&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Amit Kumar &amp;lt;&lt;a href=&apos;mailto:amitkumar@openjdk.org&apos;&gt;amitkumar@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-09-05 07:01:29 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/28de44da71871bec7648f01a4df2faee43fa43b6&quot;&gt;https://git.openjdk.org/jdk/commit/28de44da71871bec7648f01a4df2faee43fa43b6&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14702712" author="roboduke" created="Wed, 4 Sep 2024 00:09:24 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20847&quot;&gt;https://git.openjdk.org/jdk/pull/20847&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-04 07:04:36 +0000</comment>
                            <comment id="14675135" author="thartmann" created="Tue, 21 May 2024 22:35:47 -0700"  >Seems to be an old issue.&lt;br/&gt;
&lt;br/&gt;
ILW = Invalid value for enum potentially leading to undefined behavior (only affects debug code), error found with ubsan; never observed an issue, no workaround = MLH = P4</comment>
                            <comment id="14674182" author="mbaesken" created="Fri, 17 May 2024 04:00:25 -0700"  >seems we set  _type to -1 in some initialization :&lt;br/&gt;
void Dependencies::DepStream::initial_asserts(size_t byte_limit) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;....&lt;br/&gt;
&amp;nbsp;&amp;nbsp;_type       = (DepType)(end_marker-1);  // defeat &amp;quot;already at end&amp;quot; assert   ;  and end_marker is 0&lt;br/&gt;
&lt;br/&gt;
But I cannot see -1 in the enum, should -1 be added in the DepType enum ?&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5141069">JDK-8341836</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5141230">JDK-8341962</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17004"><![CDATA[x86]]></customfieldvalue>
    <customfieldvalue key="19600"><![CDATA[s390x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36dx7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>