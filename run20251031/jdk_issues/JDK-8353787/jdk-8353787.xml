<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 11:00:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8353787] Increased number of SHA-384-Digest java.util.jar.Attributes$Name instances leading to higher memory footprint</title>
                <link>https://bugs.openjdk.org/browse/JDK-8353787</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When parsing the manifest file of a JAR file the JDK constructs a java.util.jar.Manifest instance. The Manifest instance consists of java.util.jar.Attributes instances which correspond to the attributes of the manfiest file. An Attributes instance is a name-value mapping and the name is represented by the Attributes$Name class. &lt;br/&gt;
&lt;br/&gt;
Several attribute names that appear in a manifest file are standard names and many of those names may be repeated. For example, when a JAR file is signed (using the jarsigner tool), the each entry in the JAR file will have a digest recorded in the manifest file as an attribute name:&lt;br/&gt;
&lt;br/&gt;
Name: foo.txt&lt;br/&gt;
SHA-256-Digest: ...&lt;br/&gt;
&lt;br/&gt;
Name: bar.txt&lt;br/&gt;
SHA-256-Digest: ...&lt;br/&gt;
&lt;br/&gt;
Each of these &amp;quot;Name&amp;quot; and &amp;quot;SHA-256-Digest&amp;quot; attribute names thus translate to a Attributes$Name instance, when parsed. &lt;br/&gt;
&lt;br/&gt;
JAR file instances are typically cached by the internal implementation of the JDK and as a result the Manifest instance and the Attributes instance too are cached. Several releases back it was noticed that these Attributes instances can contribute to increased memory footprint of the runtime. In &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-6805750&quot;&gt;https://bugs.openjdk.org/browse/JDK-6805750&lt;/a&gt; a performance improvement was implemented (RFR &lt;a href=&quot;https://mail.openjdk.org/pipermail/core-libs-dev/2018-April/052697.html)&quot;&gt;https://mail.openjdk.org/pipermail/core-libs-dev/2018-April/052697.html)&lt;/a&gt; to maintain an internal cache of some well-known attribtue names mapped to a single instance of Attributes$Name. That way, several occurences of &amp;quot;SHA-256-Digest&amp;quot; attribtue name would end up using a single instance of Attributes$Name for that name. This cache is maintained as a static field in java.util.jar.Attributes class.&lt;br/&gt;
&lt;br/&gt;
Recently, in Java 19, the jarsigner tool was enhanced to use SHA-384 as the default digest algorithm instead of the previous SHA-256 algorithm. That was done in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8283475&quot;&gt;https://bugs.openjdk.org/browse/JDK-8283475&lt;/a&gt;. Since then, when jarsigner tool is used to sign the JAR, the manifest file generated in the signed JAR would now have:&lt;br/&gt;
&lt;br/&gt;
Name: foo.txt&lt;br/&gt;
SHA-384-Digest: ...&lt;br/&gt;
&lt;br/&gt;
Name: bar.txt&lt;br/&gt;
SHA-384-Digest: ...&lt;br/&gt;
&lt;br/&gt;
The internal cache that&amp;#39;s maintained in java.util.jar.Attributes doesn&amp;#39;t know of this new attribute name so ends up creating separate instances of Attributes$Name for each occurence of the SHA-384-Digest attribute name.&lt;br/&gt;
&lt;br/&gt;
A user reports in core-libs-dev that this now shows up as an increase in the memory footprint of the runtime &lt;a href=&quot;https://mail.openjdk.org/pipermail/core-libs-dev/2025-April/142299.html&quot;&gt;https://mail.openjdk.org/pipermail/core-libs-dev/2025-April/142299.html&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5154950">JDK-8353787</key>
            <summary>Increased number of SHA-384-Digest java.util.jar.Attributes$Name instances leading to higher memory footprint</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jpai">Jaikiran Pai</assignee>
                                    <reporter username="jpai">Jaikiran Pai</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk24u-fix-SQE-ok</label>
                            <label>jdk24u-fix-request</label>
                            <label>jdk24u-fix-yes</label>
                            <label>noreg-perf</label>
                    </labels>
                <created>Fri, 4 Apr 2025 19:11:59 -0700</created>
                <updated>Mon, 28 Apr 2025 07:41:10 -0700</updated>
                            <resolved>Mon, 7 Apr 2025 17:37:51 -0700</resolved>
                                    <version>19</version>
                                    <fixVersion>25</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14771402" author="roboduke" created="Fri, 18 Apr 2025 02:33:56 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1680&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1680&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-18 09:26:42 +0000</comment>
                            <comment id="14771400" author="goetz" created="Fri, 18 Apr 2025 02:29:58 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.8-oracle.&lt;br/&gt;
Low risk although in security area as it just adds an omitted part for new algorithm that is in place for the older ones already.  Introduced in 19.&lt;br/&gt;
Resolved copyright,  clean anyways.&lt;br/&gt;
SAP nightly testing passed.</comment>
                            <comment id="14769208" author="roboduke" created="Fri, 11 Apr 2025 01:54:55 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/187&quot;&gt;https://git.openjdk.org/jdk24u/pull/187&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-11 08:50:15 +0000</comment>
                            <comment id="14767735" author="dukebot" created="Mon, 7 Apr 2025 17:37:50 -0700"  >Changeset: b64cdc28&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Jaikiran Pai &amp;lt;&lt;a href=&apos;mailto:jpai@openjdk.org&apos;&gt;jpai@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-04-08 00:35:33 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b64cdc28132c889ca8e21dc9534590ba2a778bcd&quot;&gt;https://git.openjdk.org/jdk/commit/b64cdc28132c889ca8e21dc9534590ba2a778bcd&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14767508" author="jpai" created="Mon, 7 Apr 2025 05:55:19 -0700"  >I&amp;#39;ve changed this to a P3 issue since this can show up as a noticeable increase in the memory usage of the application as compared to Java releases prior to 19.</comment>
                            <comment id="14767408" author="roboduke" created="Sun, 6 Apr 2025 23:40:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/24475&quot;&gt;https://git.openjdk.org/jdk/pull/24475&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-07 06:34:11 +0000</comment>
                            <comment id="14767306" author="jpai" created="Fri, 4 Apr 2025 19:13:13 -0700"  >The proposal is to update the caching implementation in java.util.jar.Attributes to create just one instance of Attributes$Name for &amp;quot;SHA-384-Digest&amp;quot;, just like it does for the &amp;quot;SHA-256-Digest&amp;quot;.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5155334">JDK-8354136</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155335">JDK-8354137</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5157189">JDK-8355738</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="5049846">JDK-8267319</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4252141">JDK-6805750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ak8b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="231"><![CDATA[java.util.jar]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>