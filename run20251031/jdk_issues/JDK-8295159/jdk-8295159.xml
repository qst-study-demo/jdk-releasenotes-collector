<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:30:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8295159] DSO created with -ffast-math breaks Java floating-point arithmetic</title>
                <link>https://bugs.openjdk.org/browse/JDK-8295159</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>A bug in GCC causes shared libraries linked with -ffast-math to disable denormal arithmetic. This breaks Java&amp;#39;s floating-point semantics.&lt;br/&gt;
&lt;br/&gt;
The bug is &lt;a href=&quot;https://gcc.gnu.org/bugzilla/show_bug.cgi?id=55522&quot;&gt;https://gcc.gnu.org/bugzilla/show_bug.cgi?id=55522&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
One solution is to save and restore the floating-point control word around System.loadLibrary(). This isn&amp;#39;t perfect, because some shared library might load another shared library at runtime, but it&amp;#39;s a lot better than what we do now.</description>
                <environment></environment>
        <key id="5085124">JDK-8295159</key>
            <summary>DSO created with -ffast-math breaks Java floating-point arithmetic</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aph">Andrew Haley</assignee>
                                    <reporter username="aph">Andrew Haley</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>os</label>
                    </labels>
                <created>Tue, 11 Oct 2022 07:24:42 -0700</created>
                <updated>Wed, 11 Dec 2024 06:27:13 -0800</updated>
                            <resolved>Sat, 4 Nov 2023 02:18:54 -0700</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14718323" author="roboduke" created="Thu, 31 Oct 2024 09:38:36 -0700"  >[jdk21u-fix-request] Approval Request from Boris&lt;br/&gt;
I ask for backport approval for stability reasons. Wrong floating-point arithmetic can put the application in a very incorrect state. The change is simple and safe.</comment>
                            <comment id="14718133" author="roboduke" created="Wed, 30 Oct 2024 15:20:46 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1111&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1111&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-30 22:15:51 +0000</comment>
                            <comment id="14624898" author="mbaesken" created="Wed, 8 Nov 2023 05:26:28 -0800"  >Created&lt;br/&gt;
&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8319708&quot;&gt;https://bugs.openjdk.org/browse/JDK-8319708&lt;/a&gt;&lt;br/&gt;
8319708: Assertion &amp;#39;fsetenv didn&amp;#39;t work&amp;#39; in jdk tier4 tests after 8295159 on Linux aarch64 RHEL9.3&lt;br/&gt;
Probably it would make sense to add some tracing and/or UL output in case the IEEE check fails ?&lt;br/&gt;
Also it might make sense to check IEEE conformance already before  fegetenv - we might run into cases where the environment is already non-conformant when fegetenv is called ?&lt;br/&gt;
&lt;br/&gt;
Also libs for example loaded directly by dlopen from jdk C code are not covered currently,  might be another argument to wrap those and load them with HS os::dll_load ?</comment>
                            <comment id="14624403" author="mbaesken" created="Tue, 7 Nov 2023 05:07:50 -0800"  >Hi [~aph] we run now into assertions on our RHEL 9.2  Linux aarch test machine :&lt;br/&gt;
&lt;br/&gt;
#&lt;br/&gt;
#  Internal Error ( /openjdk/linuxaarch64/jdk-dev/src/hotspot/os/linux/os_linux.cpp:1850), pid=2548990, tid=2549049&lt;br/&gt;
#  assert(IEEE_subnormal_handling_OK()) failed: fsetenv didn&amp;#39;t work&lt;br/&gt;
&lt;br/&gt;
Some of those asserts can be seen  in the jdk tier4  jtreg tests, e.g. javax/sound/sampled/DataLine/DataLine_ArrayIndexOutOfBounds.java  .&lt;br/&gt;
For some reason we do not see the assertion on SLES 15 .  And also not on other OS/CPU platforms .&lt;br/&gt;
Is it an issue with RHEL 9.2 ?&lt;br/&gt;
</comment>
                            <comment id="14623763" author="dukebot" created="Sat, 4 Nov 2023 02:18:53 -0700"  >Changeset: df599dbb&lt;br/&gt;
Author:    Andrew Haley &amp;lt;&lt;a href=&apos;mailto:aph@openjdk.org&apos;&gt;aph@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-04 09:17:11 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/df599dbb9b0f0ee96d1ec767ac8821f164ab075d&quot;&gt;https://git.openjdk.org/jdk/commit/df599dbb9b0f0ee96d1ec767ac8821f164ab075d&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14615501" author="aph" created="Tue, 3 Oct 2023 06:02:31 -0700"  >Hotspot/runtime mackes sense. I&amp;#39;m not sure what &amp;quot;is handled by the Runtime team&amp;quot; means for me.</comment>
                            <comment id="14529236" author="dcubed" created="Tue, 11 Oct 2022 11:39:15 -0700"  >Moving to hotspot/runtime for bug triage purposes.&lt;br/&gt;
Also, usually library support is handled by the Runtime team.</comment>
                            <comment id="14529178" author="roboduke" created="Tue, 11 Oct 2022 09:55:29 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/10661&quot;&gt;https://git.openjdk.org/jdk/pull/10661&lt;/a&gt;&lt;br/&gt;
Date: 2022-10-11 16:02:41 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5145964">JDK-8346001</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="4310970">JDK-6487931</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4311095">JDK-6550813</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5112057">JDK-8317810</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5115752">JDK-8321017</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5114306">JDK-8319708</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5114544">JDK-8319927</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="101036" name="TestDenormalFloat.java" size="2449" author="aph" created="Tue, 11 Oct 2022 07:32:16 -0700"/>
                            <attachment id="101037" name="libfast-math.c" size="1037" author="aph" created="Tue, 11 Oct 2022 07:33:19 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yux7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>