<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:28:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8335836] serviceability/jvmti/StartPhase/AllowedFunctions/AllowedFunctions.java fails with unexpected exit code: 112</title>
                <link>https://bugs.openjdk.org/browse/JDK-8335836</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>serviceability/jvmti/StartPhase/AllowedFunctions/AllowedFunctions.java failed, but the test did not handle the failure well. At the end of stdout you see:&lt;br/&gt;
&lt;br/&gt;
VMInit event&lt;br/&gt;
&amp;nbsp;&amp;nbsp;## GetCurrentThread error: 112&lt;br/&gt;
&lt;br/&gt;
This comes from:&lt;br/&gt;
&lt;br/&gt;
static void check_jvmti_error(jvmtiEnv *jvmti, char* fname, jvmtiError err) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (err != JVMTI_ERROR_NONE) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;printf(&amp;quot;  ## %s error: %d\n&amp;quot;, fname, err);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;exit(err);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
So basically if the test gets a JVMTI error, it will call exit() with that error. In this case 112 is JVMTI_ERROR_WRONG_PHASE. However, since no error was reported to JTREG, stderr reports:&lt;br/&gt;
&lt;br/&gt;
STATUS:Passed.&lt;br/&gt;
&lt;br/&gt;
But then I guess during JTREG test cleanup, it detects that the process had an exit code but claimed to have passed, so the end of the log contains:&lt;br/&gt;
&lt;br/&gt;
result: Error. unexpected exit code: 112, doesn&amp;#39;t match exit status: &amp;quot;Passed.&amp;quot; which was reported by the test process</description>
                <environment></environment>
        <key id="5133625">JDK-8335836</key>
            <summary>serviceability/jvmti/StartPhase/AllowedFunctions/AllowedFunctions.java fails with unexpected exit code: 112</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sspitsyn">Serguei Spitsyn</assignee>
                                    <reporter username="cjplummer">Chris Plummer</reporter>
                        <labels>
                            <label>intermittent</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>tier7</label>
                    </labels>
                <created>Sun, 7 Jul 2024 22:06:28 -0700</created>
                <updated>Thu, 8 May 2025 04:06:20 -0700</updated>
                            <resolved>Mon, 5 Aug 2024 16:32:50 -0700</resolved>
                                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14777187" author="roboduke" created="Tue, 6 May 2025 06:16:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3550&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3550&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-06 13:09:53 +0000</comment>
                            <comment id="14777186" author="roboduke" created="Tue, 6 May 2025 06:16:28 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1741&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1741&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-06 13:09:15 +0000</comment>
                            <comment id="14777184" author="goetz" created="Tue, 6 May 2025 06:05:14 -0700"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.9-oracle,17.0.17-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14696048" author="dukebot" created="Mon, 5 Aug 2024 16:32:49 -0700"  >Changeset: 965d6b9c&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Serguei Spitsyn &amp;lt;&lt;a href=&apos;mailto:sspitsyn@openjdk.org&apos;&gt;sspitsyn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-08-05 23:29:17 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/965d6b9cbe2dd882fe3c3c955dfa08685af7d6c2&quot;&gt;https://git.openjdk.org/jdk/commit/965d6b9cbe2dd882fe3c3c955dfa08685af7d6c2&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14693936" author="roboduke" created="Tue, 30 Jul 2024 16:18:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20397&quot;&gt;https://git.openjdk.org/jdk/pull/20397&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-30 23:13:23 +0000</comment>
                            <comment id="14688363" author="cjplummer" created="Tue, 9 Jul 2024 11:25:39 -0700"  >I looked at the test a bit closer. The JVMTI_ERROR_WRONG_PHASE failure happens at the very end of the test output. Normally the end of the test output looks like:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Field: Z $assertionsDisabled&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Field declaring class: &amp;#39;Ljdk/internal/vm/Continuation;&amp;#39;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Field modifiers: 0x00001018&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Field is synthetic: 1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Got expected thread-local: 777&lt;br/&gt;
VMInit event&lt;br/&gt;
&lt;br/&gt;
But in the failed case we also get this one extra failure message after the above output.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;## GetCurrentThread error: 112&lt;br/&gt;
&lt;br/&gt;
The only time we call GetCurrentThread() is during handling of a ClassPrepare event, so it looks like there was a late ClassPrepare event that arrived after a VM_DEATH event. The test needs to protect against this.</comment>
                            <comment id="14687622" author="dholmes" created="Sun, 7 Jul 2024 22:19:28 -0700"  >[~cjplummer] thanks for filing. I was just in the process of looking into this one. </comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5156868">JDK-8355474</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5157142">JDK-8355694</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5157143">JDK-8355695</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5158125">JDK-8356509</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5158138">JDK-8356521</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i371n7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17338"><![CDATA[b10]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="372"><![CDATA[jvmti]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>