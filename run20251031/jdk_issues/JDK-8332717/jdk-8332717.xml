<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Fri Sep 26 01:19:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8332717] ZGC: Division by zero in heuristics</title>
                <link>https://bugs.openjdk.org/browse/JDK-8332717</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When running hs :tier1 tests, with ubsan enabled (configure flag --enable-ubsan), in a couple of  ZGC tests like&lt;br/&gt;
compiler/uncommontrap/TestDeoptOOM_ZGenerational.jtr&lt;br/&gt;
gc/stringdedup/TestStringDeduplicationInterned_ZGenerational.jtr&lt;br/&gt;
this division by zero is reported :&lt;br/&gt;
&lt;br/&gt;
/jdk/src/hotspot/share/gc/z/zDirector.cpp:531:87: runtime error: division by zero&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#0 0x7f34901420b0 in calculate_young_to_old_worker_ratio /jdk/src/hotspot/share/gc/z/zDirector.cpp:531&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#1 0x7f34901420b0 in select_worker_threads /jdk/src/hotspot/share/gc/z/zDirector.cpp:690&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#2 0x7f34944021d3 in select_worker_threads /jdk/src/hotspot/share/gc/z/zDirector.cpp:685&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#3 0x7f34944021d3 in initial_workers /jdk/src/hotspot/share/gc/z/zDirector.cpp:780&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#4 0x7f34944034d5 in initial_workers /jdk/src/hotspot/share/gc/z/zLock.inline.hpp:114&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#5 0x7f34944034d5 in start_major_gc /jdk/src/hotspot/share/gc/z/zDirector.cpp:784&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#6 0x7f34944034d5 in start_gc /jdk/src/hotspot/share/gc/z/zDirector.cpp:812&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#7 0x7f34944034d5 in ZDirector::run_thread() /jdk/src/hotspot/share/gc/z/zDirector.cpp:908&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#8 0x7f34945831f8 in ZThread::run_service() /jdk/src/hotspot/share/gc/z/zThread.cpp:29&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#9 0x7f34917e4f89 in ConcurrentGCThread::run() /jdk/src/hotspot/share/gc/shared/concurrentGCThread.cpp:48&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#10 0x7f3493ee8b0f in Thread::call_run() /jdk/src/hotspot/share/runtime/thread.cpp:225&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#11 0x7f34933dae75 in thread_native_entry /jdk/src/hotspot/os/linux/os_linux.cpp:846&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#12 0x7f349991c6e9 in start_thread (/lib64/libpthread.so.0+0xa6e9) (BuildId: 2f8d3c2d0f4d7888c2598d2ff6356537f5708a73)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#13 0x7f3498f1550e in clone (/lib64/libc.so.6+0x11850e) (BuildId: f732026552f6adff988b338e92d466bc81a01c37)</description>
                <environment></environment>
        <key id="5130064">JDK-8332717</key>
            <summary>ZGC: Division by zero in heuristics</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eosterlund">Erik &#214;sterlund</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>genzgc</label>
                            <label>hgupdate-sync</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>ubsan</label>
                    </labels>
                <created>Wed, 22 May 2024 05:46:06 -0700</created>
                <updated>Sun, 16 Feb 2025 22:43:25 -0800</updated>
                            <resolved>Wed, 19 Jun 2024 22:25:30 -0700</resolved>
                                    <version>21</version>
                    <version>23</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14691636" author="mbaesken" created="Mon, 22 Jul 2024 07:38:54 -0700"  >Unfortunately we still run into this probably related issue, maybe the check added does not cover this ?&lt;br/&gt;
Seems to be this line :&lt;br/&gt;
537    const double old_vs_young_efficiency_ratio = current_old_bytes_freed_per_gc_time / current_young_bytes_freed_per_gc_time;&lt;br/&gt;
&lt;br/&gt;
test compiler/uncommontrap/TestDeoptOOM_ZGenerational&lt;br/&gt;
&lt;br/&gt;
jdk/src/hotspot/share/gc/z/zDirector.cpp:537:84: runtime error: division by zero&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#0 0x7f422495bd1f in calculate_young_to_old_worker_ratio src/hotspot/share/gc/z/zDirector.cpp:537&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#1 0x7f422495bd1f in select_worker_threads src/hotspot/share/gc/z/zDirector.cpp:694&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#2 0x7f42282a0d97 in select_worker_threads src/hotspot/share/gc/z/zDirector.cpp:689&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#3 0x7f42282a0d97 in initial_workers src/hotspot/share/gc/z/zDirector.cpp:784&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#4 0x7f42282a2485 in initial_workers src/hotspot/share/gc/z/zDirector.cpp:795&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#5 0x7f42282a2485 in start_minor_gc src/hotspot/share/gc/z/zDirector.cpp:797&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#6 0x7f42282a2485 in start_gc src/hotspot/share/gc/z/zDirector.cpp:826&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#7 0x7f42282a2485 in ZDirector::run_thread() src/hotspot/share/gc/z/zDirector.cpp:912&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#8 0x7f422840bdd8 in ZThread::run_service() src/hotspot/share/gc/z/zThread.cpp:29&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#9 0x7f4225ab6979 in ConcurrentGCThread::run() src/hotspot/share/gc/shared/concurrentGCThread.cpp:48&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#10 0x7f4227e1137a in Thread::call_run() src/hotspot/share/runtime/thread.cpp:225&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#11 0x7f42274619b1 in thread_native_entry src/hotspot/os/linux/os_linux.cpp:858&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#12 0x7f422c8d36e9 in start_thread (/lib64/libpthread.so.0+0xa6e9) (BuildId: 9a146bd267419cb6a8cf08d7c602953a0f2e12c5)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#13 0x7f422c1dc58e in clone (/lib64/libc.so.6+0x11858e) (BuildId: f2d1cb1ef49f8c47d43a4053910ba6137673ccce)&lt;br/&gt;
&lt;br/&gt;
I created &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8336911&quot;&gt;https://bugs.openjdk.org/browse/JDK-8336911&lt;/a&gt;  .</comment>
                            <comment id="14691446" author="roboduke" created="Sun, 21 Jul 2024 22:55:32 -0700"  >[jdk21u-fix-request] Approval Request from Liang Mao&lt;br/&gt;
It&amp;#39;s for fixing division by zero in ZGC heuristics. Risk is very low.</comment>
                            <comment id="14691445" author="roboduke" created="Sun, 21 Jul 2024 22:55:24 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/858&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/858&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-22 05:49:54 +0000</comment>
                            <comment id="14684013" author="roboduke" created="Mon, 24 Jun 2024 01:38:12 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19850&quot;&gt;https://git.openjdk.org/jdk/pull/19850&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-24 08:29:46 +0000</comment>
                            <comment id="14683053" author="dukebot" created="Wed, 19 Jun 2024 22:25:29 -0700"  >Changeset: 2d4185f4&lt;br/&gt;
Author:    Erik &amp;#xD6;sterlund &amp;lt;&lt;a href=&apos;mailto:eosterlund@openjdk.org&apos;&gt;eosterlund@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-06-20 05:23:08 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/2d4185f4f1def7c32d1a556521e26ec656234220&quot;&gt;https://git.openjdk.org/jdk/commit/2d4185f4f1def7c32d1a556521e26ec656234220&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14682592" author="roboduke" created="Tue, 18 Jun 2024 05:21:17 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19768&quot;&gt;https://git.openjdk.org/jdk/pull/19768&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-18 12:15:04 +0000</comment>
                            <comment id="14682056" author="eosterlund" created="Mon, 17 Jun 2024 05:19:15 -0700"  >I&amp;#39;ll have a look.</comment>
                            <comment id="14682049" author="mbaesken" created="Mon, 17 Jun 2024 04:07:51 -0700"  >[~stefank], [~fisk] could you please look into this ...&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Should we instead check for young_gc_time == 0.0f and if this is the case, set current_young_bytes_freed_per_gc_time so some reasonable value (which one?) .&lt;br/&gt;
... and if possible suggest a reasonable value here?</comment>
                            <comment id="14676368" author="mbaesken" created="Mon, 27 May 2024 04:13:00 -0700"  >looks like we divide here  (src/hotspot/share/gc/z/zDirector.cpp:531)&lt;br/&gt;
531    const double current_young_bytes_freed_per_gc_time = double(reclaimed_per_young_gc) / double(young_gc_time);&lt;br/&gt;
by zero.&lt;br/&gt;
Should we instead check for young_gc_time == 0.0f  and if this is the case, set current_young_bytes_freed_per_gc_time so some reasonable value (which one?) .</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5132649">JDK-8334968</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5133149">JDK-8335415</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5134841">JDK-8336907</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150808">JDK-8350171</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5134846">JDK-8336911</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17004"><![CDATA[x86]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36fob:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17305"><![CDATA[b03]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>