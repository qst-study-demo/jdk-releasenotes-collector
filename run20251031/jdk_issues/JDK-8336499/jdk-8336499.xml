<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:28:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8336499] Failure when creating non-CRT RSA private keys in SunPKCS11</title>
                <link>https://bugs.openjdk.org/browse/JDK-8336499</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>After &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8271566&quot; title=&quot;DSA signature length value is not accurate in P11Signature&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8271566&quot;&gt;&lt;strike&gt;JDK-8271566&lt;/strike&gt;&lt;/a&gt;, the CKA_MODULUS and CKA_PRIVATE_EXPONENT attributes were added to the list passed to Java&amp;#39;s C_GetAttributeValue wrapper when determining if a private RSA key is CRT or non-CRT [1]. The rationale was to make a single query and have both CKA_MODULUS and CKA_PRIVATE_EXPONENT available beforehand, avoiding a potential second query later. Most PKCS #11 tokens benefit from this saving.&lt;br/&gt;
&lt;br/&gt;
Contrary to the native C_GetAttributeValue PKCS #11 API, its Java counterpart does not return any attribute value if there is an error in one of the attributes queried (e.g. if CKR_ATTRIBUTE_TYPE_INVALID is returned) [2]. If a non-CRT key is created in a token (pre PKCS #11 2.40), the query including all attributes will fail and CKA_MODULUS and CKA_PRIVATE_EXPONENT will not be available. An error will be thrown here [3].&lt;br/&gt;
&lt;br/&gt;
This bug was reported by Bob Du (IBM).&lt;br/&gt;
&lt;br/&gt;
--&lt;br/&gt;
[1] - &lt;a href=&quot;https://git.openjdk.org/jdk/blob/jdk-24%2B6/src/jdk.crypto.cryptoki/share/classes/sun/security/pkcs11/P11Key.java#L568&quot;&gt;https://git.openjdk.org/jdk/blob/jdk-24%2B6/src/jdk.crypto.cryptoki/share/classes/sun/security/pkcs11/P11Key.java#L568&lt;/a&gt;&lt;br/&gt;
[2] - &lt;a href=&quot;https://git.openjdk.org/jdk/blob/jdk-24%2B6/src/jdk.crypto.cryptoki/share/native/libj2pkcs11/p11_objmgmt.c#L252&quot;&gt;https://git.openjdk.org/jdk/blob/jdk-24%2B6/src/jdk.crypto.cryptoki/share/native/libj2pkcs11/p11_objmgmt.c#L252&lt;/a&gt;&lt;br/&gt;
[3] - &lt;a href=&quot;https://git.openjdk.org/jdk/blob/jdk-24%2B6/src/jdk.crypto.cryptoki/share/classes/sun/security/pkcs11/P11Key.java#L594&quot;&gt;https://git.openjdk.org/jdk/blob/jdk-24%2B6/src/jdk.crypto.cryptoki/share/classes/sun/security/pkcs11/P11Key.java#L594&lt;/a&gt;</description>
                <environment></environment>
        <key id="5134390">JDK-8336499</key>
            <summary>Failure when creating non-CRT RSA private keys in SunPKCS11</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbalao">Martin Balao Alonso</assignee>
                                    <reporter username="mbalao">Martin Balao Alonso</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-critical-request</label>
                            <label>jdk23u-fix-request</label>
                            <label>noreg-hard</label>
                    </labels>
                <created>Tue, 16 Jul 2024 13:47:13 -0700</created>
                <updated>Thu, 26 Jun 2025 07:09:39 -0700</updated>
                            <resolved>Tue, 23 Jul 2024 19:42:07 -0700</resolved>
                                    <version>17.0.10</version>
                    <version>21</version>
                    <version>23</version>
                                    <fixVersion>24</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14724210" author="roboduke" created="Wed, 20 Nov 2024 05:59:10 -0800"  >[jdk21u-fix-request] Approval Request from Sorna Sarathi&lt;br/&gt;
fixes failure when a non-CRT key is created in a token, the query including all attributes will fail and CKA_MODULUS and CKA_PRIVATE_EXPONENT will not be available and will throw an error. Backporting it.</comment>
                            <comment id="14724209" author="roboduke" created="Wed, 20 Nov 2024 05:58:51 -0800"  >[jdk17u-fix-request] Approval Request from Sorna Sarathi&lt;br/&gt;
fixes failure when a non-CRT key is created in a token, the query including all attributes will fail and CKA_MODULUS and CKA_PRIVATE_EXPONENT will not be available and will throw an error. Backporting it.</comment>
                            <comment id="14724208" author="roboduke" created="Wed, 20 Nov 2024 05:56:35 -0800"  >[jdk23u-fix-request] Approval Request from Sorna Sarathi&lt;br/&gt;
fixes failure when creating non-CRT RSA private keys in SunPKCS11. Backporting it.</comment>
                            <comment id="14715883" author="roboduke" created="Tue, 22 Oct 2024 11:27:42 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2979&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2979&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-21 05:14:28 +0000</comment>
                            <comment id="14715882" author="roboduke" created="Tue, 22 Oct 2024 11:26:35 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/130&quot;&gt;https://git.openjdk.org/jdk23u/pull/130&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-04 10:41:59 +0000</comment>
                            <comment id="14715881" author="roboduke" created="Tue, 22 Oct 2024 11:25:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1021&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1021&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-04 12:01:25 +0000</comment>
                            <comment id="14692172" author="dukebot" created="Tue, 23 Jul 2024 19:42:06 -0700"  >Changeset: 3251eea1&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Martin Balao &amp;lt;&lt;a href=&apos;mailto:mbalao@openjdk.org&apos;&gt;mbalao@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-07-24 02:39:35 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/3251eea1f4289a0505052be204407c02ca38b0ad&quot;&gt;https://git.openjdk.org/jdk/commit/3251eea1f4289a0505052be204407c02ca38b0ad&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14690378" author="roboduke" created="Tue, 16 Jul 2024 17:06:11 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20204&quot;&gt;https://git.openjdk.org/jdk/pull/20204&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-16 23:22:45 +0000</comment>
                            <comment id="14690278" author="mbalao" created="Tue, 16 Jul 2024 14:08:13 -0700"  >This is hard to test because the NSS Software Token does not allow the creation of non-CRT RSA private keys, as commented here [1]. CKA_PUBLIC_EXPONENT is required starting at PKCS #11 v2.40.&lt;br/&gt;
&lt;br/&gt;
--&lt;br/&gt;
[1] - &lt;a href=&quot;https://git.openjdk.org/jdk/blob/jdk-24%2B6/test/jdk/sun/security/pkcs11/rsa/TestKeyFactory.java#L206&quot;&gt;https://git.openjdk.org/jdk/blob/jdk-24%2B6/test/jdk/sun/security/pkcs11/rsa/TestKeyFactory.java#L206&lt;/a&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5152075">JDK-8351239</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5162868">JDK-8360698</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="5055518">JDK-8271566</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i376df:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17337"><![CDATA[b08]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="249"><![CDATA[javax.crypto:pkcs11]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>