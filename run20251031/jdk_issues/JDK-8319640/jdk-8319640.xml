<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 08:55:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8319640] ClassicFormat::parseObject (from DateTimeFormatter) does not conform to the javadoc and may leak DateTimeException</title>
                <link>https://bugs.openjdk.org/browse/JDK-8319640</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The Format::parseObject (which ClassicFormat implements) explicitly says that it returns `null` in case of error:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* @return An &amp;lt;code&amp;gt;Object&amp;lt;/code&amp;gt; parsed from the string. In case of error, returns null.&lt;br/&gt;
&lt;br/&gt;
And it may throw NullPointerException if position is `null`:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* @throws NullPointerException if {@code source} or {@code pos} is null.&lt;br/&gt;
&lt;br/&gt;
However, ClassicFormat::parseObject does not conform to this specification and may leak DateTimeException, reproducer below:&lt;br/&gt;
&lt;br/&gt;
final DateTimeFormatter formatter = new DateTimeFormatterBuilder()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.parseCaseInsensitive()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.append(DateTimeFormatter.ISO_LOCAL_DATE)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendLiteral(&amp;#39;T&amp;#39;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalStart()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendValue(HOUR_OF_DAY, 2, 2, SignStyle.NOT_NEGATIVE)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalStart()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendLiteral(&amp;#39;:&amp;#39;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendValue(MINUTE_OF_HOUR, 2, 2, SignStyle.NOT_NEGATIVE)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalStart()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendLiteral(&amp;#39;:&amp;#39;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendValue(SECOND_OF_MINUTE, 2, 2, SignStyle.NOT_NEGATIVE)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalEnd()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalEnd()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalStart()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendZoneOrOffsetId()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalEnd()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalStart()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.appendOffset(&amp;quot;+HHmm&amp;quot;, &amp;quot;Z&amp;quot;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalEnd()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.optionalEnd()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.toFormatter(Locale.ROOT)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.withResolverStyle(ResolverStyle.STRICT);&lt;br/&gt;
var object = formatter.toFormat().parseObject(&amp;quot;2018-03-30T17-30-28.842Z&amp;quot;, new ParsePosition(0));&lt;br/&gt;
assert object == null;&lt;br/&gt;
&lt;br/&gt;
The snippet fails with:&lt;br/&gt;
&lt;br/&gt;
java.time.DateTimeException: Value out of range: Hour[0-23], Minute[0-59], Second[0-59]&lt;br/&gt;
	at java.base/java.time.format.DateTimeFormatterBuilder$OffsetIdPrinterParser.parse(DateTimeFormatterBuilder.java:3708)&lt;br/&gt;
	at java.base/java.time.format.DateTimeFormatterBuilder$CompositePrinterParser.parse(DateTimeFormatterBuilder.java:2360)&lt;br/&gt;
	at java.base/java.time.format.DateTimeFormatterBuilder$CompositePrinterParser.parse(DateTimeFormatterBuilder.java:2360)&lt;br/&gt;
	at java.base/java.time.format.DateTimeFormatterBuilder$CompositePrinterParser.parse(DateTimeFormatterBuilder.java:2370)&lt;br/&gt;
	at java.base/java.time.format.DateTimeFormatter.parseUnresolved0(DateTimeFormatter.java:2107)&lt;br/&gt;
	at java.base/java.time.format.DateTimeFormatter$ClassicFormat.parseObject(DateTimeFormatter.java:2236)&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5114229">JDK-8319640</key>
            <summary>ClassicFormat::parseObject (from DateTimeFormatter) does not conform to the javadoc and may leak DateTimeException</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="naoto">Naoto Sato</assignee>
                                    <reporter username="drreta">Andriy Redko</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Tue, 7 Nov 2023 07:56:33 -0800</created>
                <updated>Fri, 22 Nov 2024 09:46:46 -0800</updated>
                            <resolved>Mon, 13 Nov 2023 15:45:15 -0800</resolved>
                                    <version>8</version>
                                    <fixVersion>22</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14723939" author="roboduke" created="Tue, 19 Nov 2024 12:11:06 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3059&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3059&lt;/a&gt;&lt;br/&gt;
Date: 2024-11-19 01:12:23 +0000</comment>
                            <comment id="14723938" author="roboduke" created="Tue, 19 Nov 2024 12:06:05 -0800"  >[jdk17u-fix-request] Approval Request from Xiaolong Peng&lt;br/&gt;
Backport 8319640: ClassicFormat::parseObject (from DateTimeFormatter) does not conform to the javadoc and may leak DateTimeException, applied cleanly, bug fix, overall risk should be low, I have run all the test in under jdk/ including the new unit test added for this fix.</comment>
                            <comment id="14717339" author="roboduke" created="Tue, 29 Oct 2024 09:45:18 -0700"  >[jdk21u-fix-request] Approval Request from Xiaolong Peng&lt;br/&gt;
Backport 8319640: ClassicFormat::parseObject (from DateTimeFormatter) does not conform to the javadoc and may leak DateTimeException, applied cleanly, bug fix, overall risk should be low.</comment>
                            <comment id="14717141" author="roboduke" created="Mon, 28 Oct 2024 16:28:00 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1101&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1101&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-28 23:07:52 +0000</comment>
                            <comment id="14625887" author="dukebot" created="Mon, 13 Nov 2023 15:45:14 -0800"  >Changeset: fe0ccdf5&lt;br/&gt;
Author:    Naoto Sato &amp;lt;&lt;a href=&apos;mailto:naoto@openjdk.org&apos;&gt;naoto@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-13 23:42:40 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/fe0ccdf5f8a5559a608d2e2cd2b6aecbe245c5ec&quot;&gt;https://git.openjdk.org/jdk/commit/fe0ccdf5f8a5559a608d2e2cd2b6aecbe245c5ec&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14625308" author="roboduke" created="Thu, 9 Nov 2023 09:55:50 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16586&quot;&gt;https://git.openjdk.org/jdk/pull/16586&lt;/a&gt;&lt;br/&gt;
Date: 2023-11-09 17:44:44 +0000</comment>
                            <comment id="14624576" author="naoto" created="Tue, 7 Nov 2023 16:03:45 -0800"  >Catch DateTimeException on parseObject and return null</comment>
                            <comment id="14624550" author="drreta" created="Tue, 7 Nov 2023 13:10:51 -0800"  >Got it, thank you for taking a time and looking into it.</comment>
                            <comment id="14624546" author="naoto" created="Tue, 7 Nov 2023 13:04:46 -0800"  >Thanks for the clarification and sorry for the confusion. Closing as &amp;quot;incomplete&amp;quot; was the standard protocol to request more info from the submitter.</comment>
                            <comment id="14624528" author="drreta" created="Tue, 7 Nov 2023 11:52:52 -0800"  >Thank you, exactly, plus:&lt;br/&gt;
&lt;br/&gt;
&amp;gt;  Since the time fields are not parsable, the exception throw is not very helpful. &lt;br/&gt;
&lt;br/&gt;
And does not conform to the Format::parseObject documented behaviour which says that in case of error (== time fields are not parsable), the method should return `null`.</comment>
                            <comment id="14624526" author="rriggs" created="Tue, 7 Nov 2023 11:48:01 -0800"  >ClassicFormat is the private implementation class nested in DateTimeFormatter.&lt;br/&gt;
The input string does not use &amp;quot;:&amp;quot; for the delimiter in the time component as required by the format.&lt;br/&gt;
Since the time fields are not parsable, the exception throw is not very helpful.&lt;br/&gt;
</comment>
                            <comment id="14624514" author="drreta" created="Tue, 7 Nov 2023 11:10:04 -0800"  >Why this issue was closed? The description says where ClassicFormat comes from - it is from DateTimeFormatter </comment>
                            <comment id="14624500" author="naoto" created="Tue, 7 Nov 2023 10:29:54 -0800"  >Can the submitter specify what `ClassicFormat` class is? I don&amp;#39;t think that is a part of `java.time` package.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5142951">JDK-8343464</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5144691">JDK-8344878</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="11815">8</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33s6z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="697"><![CDATA[java.time]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>