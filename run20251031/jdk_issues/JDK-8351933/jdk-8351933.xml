<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:57:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8351933] Inaccurate masking of TC subfield decrement in ForkJoinPool</title>
                <link>https://bugs.openjdk.org/browse/JDK-8351933</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>When a decrement of TC subfield of ctl (Number of total workers [minus target parallelism in older versions], 16 bit at shift 32) is masked with UMASK (upper bits) mask, it may lead to corruption of RC subfield  (Number of total workers [minus target parallelism], 16 bit at shift 48).&lt;br/&gt;
&lt;br/&gt;
Current mainline code is like&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://github.com/openjdk/jdk/blob/e43960a0170bf29b28ff4733e1c8c927947fb0bb/src/java.base/share/classes/java/util/concurrent/ForkJoinPool.java#L2080&quot;&gt;https://github.com/openjdk/jdk/blob/e43960a0170bf29b28ff4733e1c8c927947fb0bb/src/java.base/share/classes/java/util/concurrent/ForkJoinPool.java#L2080&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The FJP can stop executing tasks. E.g. &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8330017&quot; title=&quot;ForkJoinPool stops executing tasks due to ctl field Release Count (RC) overflow&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8330017&quot;&gt;JDK-8330017&lt;/a&gt;</description>
                <environment></environment>
        <key id="5152823">JDK-8351933</key>
            <summary>Inaccurate masking of TC subfield decrement in ForkJoinPool</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dchuyko">Dmitry Chuyko</assignee>
                                    <reporter username="dchuyko">Dmitry Chuyko</reporter>
                        <labels>
                            <label>concurrency</label>
                            <label>jdk11u-defer-next</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk24u-fix-SQE-ok-next</label>
                            <label>jdk24u-fix-request</label>
                            <label>jdk24u-fix-yes</label>
                    </labels>
                <created>Thu, 13 Mar 2025 04:29:26 -0700</created>
                <updated>Wed, 27 Aug 2025 07:21:39 -0700</updated>
                            <resolved>Wed, 19 Mar 2025 04:40:08 -0700</resolved>
                                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>25</version>
                                    <fixVersion>25</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14778000" author="sgehwolf" created="Thu, 8 May 2025 03:22:19 -0700"  >This should be in JDK 17u before considering 11u.</comment>
                            <comment id="14766850" author="sgehwolf" created="Thu, 3 Apr 2025 08:53:43 -0700"  >This should get a second review before moving forward for JDK 21u.</comment>
                            <comment id="14762163" author="roboduke" created="Wed, 19 Mar 2025 05:18:16 -0700"  >[jdk24u-fix-request] Approval Request from Dmitry Chuyko&lt;br/&gt;
This a tiny bugfix in ForkJoinPool. At one of code paths the TC subfield of ctl field is decremented and the result is not masked correctly, so the RC subfield is not preserved. In older releases that sometimes leads to a stopped pool, but in 24u it&amp;#39;s still a bug. The fix from 25 is applied cleanly.</comment>
                            <comment id="14762162" author="roboduke" created="Wed, 19 Mar 2025 05:14:09 -0700"  >[jdk11u-fix-request] Approval Request from Dmitry Chuyko&lt;br/&gt;
This a tiny bugfix in ForkJoinPool. At one of code paths the TC subfield of ctl field is decremented and the result is not masked correctly, so the RC subfield is not preserved. That sometimes leads to a stopped pool in 17 and 11 [0].&lt;br/&gt;
&lt;br/&gt;
Testing: full jtreg tier1-3 and JCK for multiple supported platforms in the internal Liberica CI.&lt;br/&gt;
&lt;br/&gt;
[0] &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8330017&quot;&gt;https://bugs.openjdk.org/browse/JDK-8330017&lt;/a&gt;</comment>
                            <comment id="14762161" author="roboduke" created="Wed, 19 Mar 2025 05:14:00 -0700"  >[jdk17u-fix-request] Approval Request from Dmitry Chuyko&lt;br/&gt;
This a tiny bugfix in ForkJoinPool. At one of code paths the TC subfield of ctl field is decremented and the result is not masked correctly, so the RC subfield is not preserved. That sometimes leads to a stopped pool in 17 and 11 [0].&lt;br/&gt;
&lt;br/&gt;
Testing: full jtreg tier1-3 and JCK for multiple supported platforms in the internal Liberica CI.&lt;br/&gt;
&lt;br/&gt;
[0] &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8330017&quot;&gt;https://bugs.openjdk.org/browse/JDK-8330017&lt;/a&gt;</comment>
                            <comment id="14762158" author="roboduke" created="Wed, 19 Mar 2025 05:12:16 -0700"  >[jdk21u-fix-request] Approval Request from Dmitry Chuyko&lt;br/&gt;
This a tiny bugfix in ForkJoinPool. At one of code paths the TC subfield of ctl field is decremented and the result is not masked correctly, so the RC subfield is not preserved. In older releases that sometimes leads to a stopped pool, but in 21u it&amp;#39;s still a bug.&lt;br/&gt;
&lt;br/&gt;
Testing: full jtreg tier1-3 and JCK for multiple supported platforms in the internal Liberica CI.</comment>
                            <comment id="14762157" author="roboduke" created="Wed, 19 Mar 2025 05:12:11 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/148&quot;&gt;https://git.openjdk.org/jdk24u/pull/148&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-19 12:04:55 +0000</comment>
                            <comment id="14762147" author="dukebot" created="Wed, 19 Mar 2025 04:40:06 -0700"  >Changeset: fed34e46&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Dmitry Chuyko &amp;lt;&lt;a href=&apos;mailto:dchuyko@openjdk.org&apos;&gt;dchuyko@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-03-19 11:35:26 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/fed34e46b89bc9b0462d9b5f5e5ab5516fe18c6e&quot;&gt;https://git.openjdk.org/jdk/commit/fed34e46b89bc9b0462d9b5f5e5ab5516fe18c6e&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14761478" author="JIRAUSER20011" created="Mon, 17 Mar 2025 12:28:13 -0700"  >This is the only site where TC subfield is updated in FJP with a UMASK and the only site with such overflow risks. RC has overflow risks but its overflow does not affect the less significant fields.</comment>
                            <comment id="14760566" author="roboduke" created="Thu, 13 Mar 2025 08:07:28 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/3012&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/3012&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-13 14:57:19 +0000</comment>
                            <comment id="14760565" author="roboduke" created="Thu, 13 Mar 2025 08:00:03 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3354&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3354&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-13 14:50:23 +0000</comment>
                            <comment id="14760564" author="roboduke" created="Thu, 13 Mar 2025 07:49:34 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1485&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1485&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-13 14:31:42 +0000</comment>
                            <comment id="14760547" author="roboduke" created="Thu, 13 Mar 2025 06:43:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/24034&quot;&gt;https://git.openjdk.org/jdk/pull/24034&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-13 13:34:51 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5152824">JDK-8351934</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152825">JDK-8351935</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153804">JDK-8352744</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152826">JDK-8351936</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="4841899">JDK-8134852</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5126276">JDK-8330017</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="14949">9</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a7hv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17352"><![CDATA[b15]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="215"><![CDATA[java.util.concurrent]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>