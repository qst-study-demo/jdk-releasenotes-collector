<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:03:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8346887] DrawFocusRect() may cause an assertion failure</title>
                <link>https://bugs.openjdk.org/browse/JDK-8346887</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>With the fast debug configuration, the `api/java_awt/awt_focus_subsystem/event_delivery/index.html#EventDelivery2`	test is hanging when run on Windows with JDK 8 or 11. Although not explicit when running the test through the CLI, the cause is this (1) assertion failing. When running with the test harness GUI, we see a popup with the assertion failure (see attached). By ignoring the assertion (pressing &#8220;No&#8221;), the tests all pass. &lt;br/&gt;
&lt;br/&gt;
Goal: determine why the assertion is failing and address the cause. Afterwards this test should no longer hang when run from the CLI.&lt;br/&gt;
&lt;br/&gt;
Steps to reproduce&lt;br/&gt;
* Pull the relevant OpenJDK source (11 or 8)&lt;br/&gt;
* Install the necessary build dependencies&lt;br/&gt;
* Build with `--enable-debug`&lt;br/&gt;
* Pull jck.jar and unpack it&lt;br/&gt;
* Run the `api/java_awt/awt_focus_subsystem/event_delivery/index.html#EventDelivery2` test (either through CLI or test harness)&lt;br/&gt;
&lt;br/&gt;
(1) &lt;a href=&quot;https://github.com/openjdk/jdk11u-dev/blob/master/src/java.desktop/windows/native/libawt/windows/awt_Button.cpp#L246&quot;&gt;https://github.com/openjdk/jdk11u-dev/blob/master/src/java.desktop/windows/native/libawt/windows/awt_Button.cpp#L246&lt;/a&gt;</description>
                <environment></environment>
        <key id="5147078">JDK-8346887</key>
            <summary>DrawFocusRect() may cause an assertion failure</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dmarkov">Dmitry Markov</assignee>
                                    <reporter username="ssubramaniam">Satyen Subramaniam</reporter>
                        <labels>
                            <label>cssn25_01_01</label>
                            <label>cssn25_01_02</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk24u-fix-SQE-ok</label>
                            <label>jdk24u-fix-request</label>
                            <label>jdk24u-fix-yes</label>
                            <label>jdk8u-fix-request</label>
                            <label>jdk8u-fix-yes</label>
                            <label>sustaining</label>
                    </labels>
                <created>Mon, 30 Dec 2024 09:46:49 -0800</created>
                <updated>Wed, 9 Jul 2025 12:59:39 -0700</updated>
                            <resolved>Wed, 8 Jan 2025 23:03:48 -0800</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>23</version>
                    <version>24</version>
                    <version>25</version>
                                    <fixVersion>25</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14737979" author="roboduke" created="Mon, 13 Jan 2025 08:54:49 -0800"  >[jdk8u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Minor change that adds an additional check before an assertion for windows. Tested with tier1 and pre-submit tests. Risk is low.</comment>
                            <comment id="14737430" author="roboduke" created="Fri, 10 Jan 2025 09:50:18 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk8u-dev/pull/614&quot;&gt;https://git.openjdk.org/jdk8u-dev/pull/614&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-10 17:43:17 +0000</comment>
                            <comment id="14737190" author="roboduke" created="Thu, 9 Jan 2025 21:02:41 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3199&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3199&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-10 04:54:54 +0000</comment>
                            <comment id="14737189" author="roboduke" created="Thu, 9 Jan 2025 20:59:28 -0800"  >[jdk11u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Minor change that adds an additional check before an assertion for windows. Tested with tier1, tier2, and GHA tests. Risk is low.</comment>
                            <comment id="14737188" author="roboduke" created="Thu, 9 Jan 2025 20:58:00 -0800"  >[jdk17u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Minor change that adds an additional check before an assertion for windows. Tested with tier1, tier2, and GHA tests. Risk is low.</comment>
                            <comment id="14737185" author="roboduke" created="Thu, 9 Jan 2025 20:42:29 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2985&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2985&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-10 04:36:56 +0000</comment>
                            <comment id="14737180" author="roboduke" created="Thu, 9 Jan 2025 20:12:14 -0800"  >[jdk21u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Minor change that adds an additional check before an assertion for windows. Tested with tier1, tier2, and GHA tests. Risk is low.</comment>
                            <comment id="14737178" author="roboduke" created="Thu, 9 Jan 2025 20:01:57 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1310&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1310&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-10 03:55:08 +0000</comment>
                            <comment id="14737176" author="roboduke" created="Thu, 9 Jan 2025 19:41:03 -0800"  >[jdk23u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Minor change that adds an additional check before an assertion for windows. Tested with tier1, tier2, and GHA tests. Risk is low.</comment>
                            <comment id="14737130" author="roboduke" created="Thu, 9 Jan 2025 14:52:00 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/233&quot;&gt;https://git.openjdk.org/jdk23u/pull/233&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-09 22:46:58 +0000</comment>
                            <comment id="14737129" author="roboduke" created="Thu, 9 Jan 2025 14:51:57 -0800"  >[jdk24u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. Minor change that adds an additional check before an assertion for windows. Tested with tier1, tier2, and GHA tests. Risk is low.</comment>
                            <comment id="14737128" author="roboduke" created="Thu, 9 Jan 2025 14:50:24 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/14&quot;&gt;https://git.openjdk.org/jdk24u/pull/14&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-09 22:44:43 +0000</comment>
                            <comment id="14736906" author="dukebot" created="Wed, 8 Jan 2025 23:03:29 -0800"  >Changeset: 8eddf67c&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Dmitry Markov &amp;lt;&lt;a href=&apos;mailto:dmarkov@openjdk.org&apos;&gt;dmarkov@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-01-09 06:58:31 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/8eddf67c82a2af4d704c4063ad802640770b3c26&quot;&gt;https://git.openjdk.org/jdk/commit/8eddf67c82a2af4d704c4063ad802640770b3c26&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14736762" author="roboduke" created="Wed, 8 Jan 2025 08:43:45 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/22973&quot;&gt;https://git.openjdk.org/jdk/pull/22973&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-08 16:36:07 +0000</comment>
                            <comment id="14736304" author="dmarkov" created="Tue, 7 Jan 2025 09:41:10 -0800"  >On Windows debug build execution of DrawFocusRect() may cause an assertion failure. In particular if a component, which is going to gain a focus, has zero size, the function returns 0 because focus rectangle is empty.&lt;br/&gt;
&lt;br/&gt;
Proposed fix:&lt;br/&gt;
It is necessary to check that the focus rectangle is not empty before DrawFocusRect() call.</comment>
                            <comment id="14736300" author="dmarkov" created="Tue, 7 Jan 2025 09:33:35 -0800"  >The issue is also reproducible on 17u, 21u and mainline fastdebug builds.&lt;br/&gt;
&lt;br/&gt;
Minimal testcase to replicate the problem:&lt;br/&gt;
&lt;br/&gt;
import java.awt.*;&lt;br/&gt;
&lt;br/&gt;
public class AWTTest {&lt;br/&gt;
	public static void main(String args[]) {&lt;br/&gt;
		Frame frame = new Frame();&lt;br/&gt;
		Button button = new Button();&lt;br/&gt;
		TextField tf = new TextField();&lt;br/&gt;
		frame.add(button);&lt;br/&gt;
		frame.add(tf);&lt;br/&gt;
		frame.setVisible(true);&lt;br/&gt;
	}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Steps to reproduce:&lt;br/&gt;
1. Compile and run the testcase on debug build&lt;br/&gt;
2. A frame is displayed, minimize the frame and then restore its size&lt;br/&gt;
3. A popup with the assertion failure is displayed</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5147924">JDK-8347621</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148130">JDK-8347800</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148255">JDK-8347906</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148281">JDK-8347930</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148282">JDK-8347931</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148300">JDK-8347945</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148488">JDK-8348101</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152430">JDK-8351560</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152783">JDK-8351893</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5164041">JDK-8361734</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17004"><![CDATA[x86]]></customfieldvalue>
    <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i398df:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="196"><![CDATA[java.awt]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>