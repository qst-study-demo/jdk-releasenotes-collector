<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:44:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8333391] Test com/sun/jdi/InterruptHangTest.java failed: Thread was never interrupted during sleep</title>
                <link>https://bugs.openjdk.org/browse/JDK-8333391</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;br/&gt;
[3146ms] detailMessage = &amp;quot;Thread was never interrupted during sleep: 65&amp;quot;&lt;br/&gt;
[3147ms] Got StepEvent 600 at line java.lang.Thread.dispatchUncaughtException(java.lang.Throwable):2840&lt;br/&gt;
[3171ms] RemoteInterruptor thread: Got expected IllegalThreadStateException after 108 interrupts sent. Exiting.&lt;br/&gt;
java.lang.RuntimeException: Invalid debuggee exitValue: 1&lt;br/&gt;
	at TestScaffold.waitForVMDisconnect(TestScaffold.java:787)&lt;br/&gt;
	at TestScaffold.resumeToVMDisconnect(TestScaffold.java:1015)&lt;br/&gt;
	at TestScaffold.listenUntilVMDisconnect(TestScaffold.java:743)&lt;br/&gt;
	at InterruptHangTest.runTests(InterruptHangTest.java:321)&lt;br/&gt;
	at TestScaffold.startTests(TestScaffold.java:468)&lt;br/&gt;
	at InterruptHangTest.main(InterruptHangTest.java:249)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:333)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1575)</description>
                <environment></environment>
        <key id="5130847">JDK-8333391</key>
            <summary>Test com/sun/jdi/InterruptHangTest.java failed: Thread was never interrupted during sleep</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cjplummer">Chris Plummer</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk23u-fix-yes</label>
                            <label>mach5-precious</label>
                            <label>noreg-self</label>
                            <label>tier5</label>
                    </labels>
                <created>Sun, 2 Jun 2024 13:19:52 -0700</created>
                <updated>Tue, 17 Dec 2024 05:29:26 -0800</updated>
                            <resolved>Mon, 22 Jul 2024 12:36:05 -0700</resolved>
                                    <version>23</version>
                                    <fixVersion>24</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14732284" author="roboduke" created="Mon, 16 Dec 2024 01:42:02 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3122&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3122&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-16 09:35:31 +0000</comment>
                            <comment id="14732277" author="goetz" created="Mon, 16 Dec 2024 01:30:56 -0800"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.15-oracle from 21.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14728382" author="roboduke" created="Wed, 4 Dec 2024 06:26:58 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1202&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1202&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-04 14:19:30 +0000</comment>
                            <comment id="14728376" author="goetz" created="Wed, 4 Dec 2024 06:19:50 -0800"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.7-oracle.&lt;br/&gt;
No risk, only a test change&lt;br/&gt;
Resolved.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14713444" author="roboduke" created="Wed, 16 Oct 2024 02:46:50 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/175&quot;&gt;https://git.openjdk.org/jdk23u/pull/175&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-15 06:41:27 +0000</comment>
                            <comment id="14712904" author="roboduke" created="Tue, 15 Oct 2024 00:39:09 -0700"  >[jdk23u-fix-request] Approval Request from KavyaKS94&lt;br/&gt;
Clean backport. Increased sleep time</comment>
                            <comment id="14691741" author="dukebot" created="Mon, 22 Jul 2024 12:36:04 -0700"  >Changeset: ed649944&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Chris Plummer &amp;lt;&lt;a href=&apos;mailto:cjplummer@openjdk.org&apos;&gt;cjplummer@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-07-22 19:34:09 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ed6499446dadc339599271a282ceca4a52dbeed4&quot;&gt;https://git.openjdk.org/jdk/commit/ed6499446dadc339599271a282ceca4a52dbeed4&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14691306" author="roboduke" created="Fri, 19 Jul 2024 11:47:17 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20263&quot;&gt;https://git.openjdk.org/jdk/pull/20263&lt;/a&gt;&lt;br/&gt;
Date: 2024-07-19 18:41:10 +0000</comment>
                            <comment id="14685858" author="cjplummer" created="Sat, 29 Jun 2024 11:18:30 -0700"  >I would suggest changing the sleep(100) to sleep(200), or maybe even longer, and see if the problem goes away. The longer sleep should not make the test take any longer to run since when running properly the sleep() is quickly interrupted by an InterruptedException.</comment>
                            <comment id="14685857" author="cjplummer" created="Sat, 29 Jun 2024 11:16:30 -0700"  >There appear to be two failure modes. In the 1st mode the test runs quickly, usually less than 20 seconds. In the second mode it takes almost exactly 2m42s. The 1st mode fails with:&lt;br/&gt;
&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.RuntimeException: Thread was never interrupted during sleep: 165&lt;br/&gt;
	at InterruptHangTarg.main(InterruptHangTest.java:129)&lt;br/&gt;
result: Failed. Execution failed: `main&amp;#39; threw exception: java.lang.RuntimeException: Invalid debuggee exitValue: 1&lt;br/&gt;
&lt;br/&gt;
[8272ms] detailMessage = &amp;quot;Thread was never interrupted during sleep: 165&amp;quot;&lt;br/&gt;
[8274ms] Got StepEvent 1500 at line java.lang.Thread.dispatchUncaughtException(java.lang.Throwable):2840&lt;br/&gt;
[8289ms] RemoteInterruptor thread: Got expected VMDisconnectedException after 293 interrupts sent. Exiting.&lt;br/&gt;
java.lang.RuntimeException: Invalid debuggee exitValue: 1&lt;br/&gt;
	at TestScaffold.waitForVMDisconnect(TestScaffold.java:787)&lt;br/&gt;
	at TestScaffold.resumeToVMDisconnect(TestScaffold.java:1015)&lt;br/&gt;
	at TestScaffold.listenUntilVMDisconnect(TestScaffold.java:743)&lt;br/&gt;
	at InterruptHangTest.runTests(InterruptHangTest.java:321)&lt;br/&gt;
...&lt;br/&gt;
&lt;br/&gt;
The 165 is the 165th iteration out of 200. The iteration it fails on varies. There is a 100ms sleep in which it is expected that the interrupt will complete. Perhaps this is too short. This happens during the &amp;quot;remote&amp;quot; version of the test which is when interrupts are triggered via the debugger calling ThreadReference.interrupt(), not the debuggee calling Thread.interrupt(). Note the debugger side is issuing ThreadReference.interrupt() every 5ms, so it&amp;#39;s not like it just got lost since it is repeated.&lt;br/&gt;
&lt;br/&gt;
However, also notice the step event in java.lang.Thread.dispatchUncaughtException. It looks like after throwing the exception there was a step event triggered in java.lang.Thread.dispatchUncaughtException, which is odd because step events for library code should be getting filtered out, but for some reason this one is not. In any case, this after the failure so not likely the cause of the problem, but still seems curious.&lt;br/&gt;
&lt;br/&gt;
The 2nd failure mode fails with:&lt;br/&gt;
&lt;br/&gt;
[4814ms] Got StepEvent 925 at line InterruptHangTarg.main(java.lang.String[]):129&lt;br/&gt;
[5172ms] Note: Unexpected Debuggee Exception: java.lang.RuntimeException at line 129&lt;br/&gt;
[5175ms] detailMessage = &amp;quot;Thread was never interrupted during sleep: 101&amp;quot;&lt;br/&gt;
[5176ms] Got StepEvent 926 at line java.lang.Thread.dispatchUncaughtException(java.lang.Throwable):2840&lt;br/&gt;
[80249ms] steps = 926&lt;br/&gt;
[160362ms] steps = 926&lt;br/&gt;
[160367ms] failure: Debuggee appears to be hung (no steps for 80s)&lt;br/&gt;
	at java.base/java.lang.Thread.getStackTrace(Thread.java:2389)&lt;br/&gt;
	at TestScaffold.failure(TestScaffold.java:491)&lt;br/&gt;
	at InterruptHangTest$1.run(InterruptHangTest.java:295)&lt;br/&gt;
&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.RuntimeException: Thread was never interrupted during sleep: 101&lt;br/&gt;
	at InterruptHangTarg.main(InterruptHangTest.java:129)&lt;br/&gt;
result: Failed. Execution failed: `main&amp;#39; threw exception: java.lang.RuntimeException: Invalid debuggee exitValue: 255&lt;br/&gt;
&lt;br/&gt;
This is happening during the &amp;quot;aggressive&amp;quot; mode of the test, where the debuggee has a thread doing Thread.interrupt() every 5 ms. For some reason we stop getting single step events. Again there is no interrupt during the 100ms sleep. Perhaps we are just not waiting long enough. I&amp;#39;m not sure of the reason for exitValue 1 in the 1st failure mode and exitValue 255 in the 2nd.</comment>
                            <comment id="14685855" author="cjplummer" created="Sat, 29 Jun 2024 10:32:02 -0700"  >All 6 failures on macosx-aarch64 so far. Failures started 20024-06-02. JVM args don&amp;#39;t seem to matter. Last change to test was 2024-03-12 for:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8324868&quot; title=&quot;debug agent does not properly handle interrupts of a virtual thread&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8324868&quot;&gt;&lt;strike&gt;JDK-8324868&lt;/strike&gt;&lt;/a&gt;: debug agent does not properly handle interrupts of a virtual thread&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5141949">JDK-8342604</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5142176">JDK-8342794</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5142177">JDK-8342795</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5142178">JDK-8342796</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5142179">JDK-8342797</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145630">JDK-8345703</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5146491">JDK-8346422</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="20005"><![CDATA[os_x_10.15]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ki3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17337"><![CDATA[b08]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="370"><![CDATA[debugger]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>