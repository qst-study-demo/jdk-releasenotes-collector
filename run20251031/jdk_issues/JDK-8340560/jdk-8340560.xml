<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:37:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8340560] Open Source several AWT/2D font and rendering tests</title>
                <link>https://bugs.openjdk.org/browse/JDK-8340560</link>
                <project id="10100" key="JDK">JDK</project>
                    <description></description>
                <environment></environment>
        <key id="5139562">JDK-8340560</key>
            <summary>Open Source several AWT/2D font and rendering tests</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prr">Philip Race</assignee>
                                    <reporter username="prr">Philip Race</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>sn_178</label>
                            <label>sn_179</label>
                            <label>test_sprint</label>
                            <label>testbug</label>
                    </labels>
                <created>Fri, 20 Sep 2024 15:40:01 -0700</created>
                <updated>Tue, 22 Jul 2025 03:36:10 -0700</updated>
                            <resolved>Sun, 29 Sep 2024 10:07:53 -0700</resolved>
                                                    <fixVersion>24</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14756796" author="roboduke" created="Thu, 27 Feb 2025 00:40:30 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1435&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1435&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-27 08:33:39 +0000</comment>
                            <comment id="14756795" author="roboduke" created="Thu, 27 Feb 2025 00:40:27 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3303&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3303&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-27 08:33:49 +0000</comment>
                            <comment id="14756786" author="goetz" created="Thu, 27 Feb 2025 00:30:49 -0800"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.7-oracle,17.0.15-oracle.&lt;br/&gt;
No risk, only a test change. Requires follow-up &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8341535&quot; title=&quot;sun/awt/font/TestDevTransform.java fails with RuntimeException: Different rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8341535&quot;&gt;&lt;strike&gt;JDK-8341535&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Tests pass with follow-up. SAP nighlty testing passed. </comment>
                            <comment id="14710323" author="mbaesken" created="Fri, 4 Oct 2024 05:36:37 -0700"  >The test failed also on Linux x86_64 when run on SLES12.5 .&lt;br/&gt;
Output is :&lt;br/&gt;
&lt;br/&gt;
----------System.out:(3/217)----------&lt;br/&gt;
TL font is java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12]&lt;br/&gt;
Str font is java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12]&lt;br/&gt;
GV font is java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12]&lt;br/&gt;
----------System.err:(12/674)----------&lt;br/&gt;
java.lang.RuntimeException: Different rendering&lt;br/&gt;
	at TestDevTransform.compare(TestDevTransform.java:117)&lt;br/&gt;
	at TestDevTransform.main(TestDevTransform.java:160)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:573)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1576)&lt;br/&gt;
&lt;br/&gt;
I created  &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8341535&quot; title=&quot;sun/awt/font/TestDevTransform.java fails with RuntimeException: Different rendering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8341535&quot;&gt;&lt;strike&gt;JDK-8341535&lt;/strike&gt;&lt;/a&gt;  and attached the 2 images there ; they look very similar but seem to differ slightly.</comment>
                            <comment id="14710280" author="mbaesken" created="Fri, 4 Oct 2024 03:17:56 -0700"  >This is the output, with your patch added  (from the SLES12.5 Linux ppc64le system):&lt;br/&gt;
----------System.out:(3/217)----------&lt;br/&gt;
TL font is java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12]&lt;br/&gt;
Str font is java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12]&lt;br/&gt;
GV font is java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12]&lt;br/&gt;
----------System.err:(12/674)----------&lt;br/&gt;
java.lang.RuntimeException: Different rendering&lt;br/&gt;
	at TestDevTransform.compare(TestDevTransform.java:117)&lt;br/&gt;
	at TestDevTransform.main(TestDevTransform.java:160)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:573)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1576)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
I tested on a few more Linux ppc64le systems.&lt;br/&gt;
Power8/Linux RHEL 8.9 success&lt;br/&gt;
Power9/Ubuntu 23.10   fails&lt;br/&gt;
Power10/SLES15.5      success&lt;br/&gt;
&lt;br/&gt;
So it is not just an issue of that single system with SLES 12.5  (this version of SLES is pretty old anyway).</comment>
                            <comment id="14710249" author="mbaesken" created="Fri, 4 Oct 2024 01:13:32 -0700"  >Thanks Phil, I added the patch to our build/test environment, will come back later with some output.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Perhaps there is some different positional rounding due to PPC ??&lt;br/&gt;
Maybe; but the issue does not show up on all our PPC based machines,&lt;br/&gt;
On Linux ppc64le SLES 12.5  (Power8 based)  we see it.&lt;br/&gt;
On RHEL 9.3 (Power9 based) the test runs fine.&lt;br/&gt;
On all our other Linux test systems (aarch64/x86_64) the test runs fine too.</comment>
                            <comment id="14709905" author="prr" created="Wed, 2 Oct 2024 13:41:36 -0700"  >Since being integrated the test has been run at least 20 times per-platform in our internal&lt;br/&gt;
CI test system and I don&amp;#39;t see a single failure.&lt;br/&gt;
And it is a headless test so not affected by a desktop environment.&lt;br/&gt;
Perhaps there is some different positional rounding due to PPC ??&lt;br/&gt;
&lt;br/&gt;
As a first step to understanding what is going wrong, gathering some more information would be useful :&lt;br/&gt;
iff --git a/test/jdk/sun/awt/font/TestDevTransform.java b/test/jdk/sun/awt/font/TestDevTransform.java&lt;br/&gt;
index 035cb0b13d7..7f3f07a6105 100644&lt;br/&gt;
--- a/test/jdk/sun/awt/font/TestDevTransform.java&lt;br/&gt;
+++ b/test/jdk/sun/awt/font/TestDevTransform.java&lt;br/&gt;
@@ -106,6 +106,11 @@ static void init(Graphics2D g2d) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;static void compare(BufferedImage bi1, BufferedImage bi2) {&lt;br/&gt;
+        try {&lt;br/&gt;
+             javax.imageio.ImageIO.write(bi1, &amp;quot;png&amp;quot;, new java.io.File(&amp;quot;image1.png&amp;quot;));&lt;br/&gt;
+             javax.imageio.ImageIO.write(bi2, &amp;quot;png&amp;quot;, new java.io.File(&amp;quot;image2.png&amp;quot;));&lt;br/&gt;
+        } catch (Exception e) {&lt;br/&gt;
+        }&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (int x = 0; x &amp;lt; bi1.getWidth(); x++) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (int y = 0; y &amp;lt; bi1.getHeight(); y++) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (bi1.getRGB(x, y) != bi2.getRGB(x, y)) {&lt;br/&gt;
@@ -123,6 +128,7 @@ public static void main(String args[]) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;init(tl_g2d);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FontRenderContext frc = tl_g2d.getFontRenderContext();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Specify font from graphics to be sure it is the same as the other cases.&lt;br/&gt;
+          System.out.println(&amp;quot;TL font is &amp;quot; + tl_g2d.getFont());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TextLayout tl = new TextLayout(test, tl_g2d.getFont(), frc);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;draw(tl_g2d, tl, 10f, 12f, 3.0f);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;draw(tl_g2d, tl, 10f, 24f, 1.0f);&lt;br/&gt;
@@ -132,6 +138,7 @@ public static void main(String args[]) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BufferedImage st_Image = new BufferedImage(400, 400, BufferedImage.TYPE_INT_RGB);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Graphics2D st_g2d = st_Image.createGraphics();&lt;br/&gt;
+          System.out.println(&amp;quot;Str font is &amp;quot; + st_g2d.getFont());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;init(st_g2d);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;draw(st_g2d, test, 10f, 12f, 3.0f);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;draw(st_g2d, test, 10f, 24f, 1.0f);&lt;br/&gt;
@@ -141,6 +148,7 @@ public static void main(String args[]) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BufferedImage gv_Image = new BufferedImage(400, 400, BufferedImage.TYPE_INT_RGB);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Graphics2D gv_g2d = gv_Image.createGraphics();&lt;br/&gt;
+          System.out.println(&amp;quot;GV font is &amp;quot; + gv_g2d.getFont());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;init(gv_g2d);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FontRenderContext frc = gv_g2d.getFontRenderContext();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GlyphVector gv = gv_g2d.getFont().createGlyphVector(frc, test);&lt;br/&gt;
</comment>
                            <comment id="14709689" author="mbaesken" created="Wed, 2 Oct 2024 00:16:17 -0700"  >The test sun/awt/font/TestDevTransform.java added by this commit always fails on our linux ppc64le SLES 12.5 test box.&lt;br/&gt;
Exception is :&lt;br/&gt;
java.lang.RuntimeException: Different rendering&lt;br/&gt;
	at TestDevTransform.compare(TestDevTransform.java:112)&lt;br/&gt;
	at TestDevTransform.main(TestDevTransform.java:152)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:573)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1576)</comment>
                            <comment id="14708750" author="dukebot" created="Sun, 29 Sep 2024 10:08:55 -0700"  >Changeset: ade17ecb&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Phil Race &amp;lt;&lt;a href=&apos;mailto:prr@openjdk.org&apos;&gt;prr@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-09-29 17:05:01 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ade17ecb6cb5125d048401a878b557e5afefc08c&quot;&gt;https://git.openjdk.org/jdk/commit/ade17ecb6cb5125d048401a878b557e5afefc08c&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14707965" author="roboduke" created="Wed, 25 Sep 2024 13:35:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/21192&quot;&gt;https://git.openjdk.org/jdk/pull/21192&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-25 20:29:40 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5146560">JDK-8346485</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5146592">JDK-8346516</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5146679">JDK-8346596</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152380">JDK-8351511</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152403">JDK-8351534</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="5140674">JDK-8341535</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37zyz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>