<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:31:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8311546] Certificate name constraints improperly validated with leading period</title>
                <link>https://bugs.openjdk.org/browse/JDK-8311546</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
When a CA certificate contains a name constraint that begins with a period, `.`, an end entity certificate will be improperly rejected with `java.security.cert.CertPathValidatorException: name constraints check failed`.&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Create a CA certificate with `nameConstraints = critical,permitted;DNS:.example.com`&lt;br/&gt;
Sign a certificate for `demo.example.com` with the CA&lt;br/&gt;
Load CA certificate into keystore / as a TrustAnchor directly&lt;br/&gt;
Attempt to validate end entity certificate&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
Certificate validates successfully&lt;br/&gt;
ACTUAL -&lt;br/&gt;
`java.security.cert.CertPathValidatorException: name constraints check failed` is thrown&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
See attached zip file.&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5104621">JDK-8311546</key>
            <summary>Certificate name constraints improperly validated with leading period</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bperez">Ben Perez</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>additional-information-received</label>
                            <label>amazon-interest</label>
                            <label>dcsaw</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>reproducer-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Tue, 4 Jul 2023 08:58:49 -0700</created>
                <updated>Wed, 12 Mar 2025 01:40:44 -0700</updated>
                            <resolved>Wed, 1 Nov 2023 09:51:55 -0700</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>20</version>
                    <version>21</version>
                                    <fixVersion>22</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14740541" author="roboduke" created="Fri, 17 Jan 2025 02:25:14 -0800"  >[jdk17u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes the compatibility bug in certificate checking. Seen in the wild. The patch was in JDK 22 without product bugtail. The only problems are with the test, which requires additional followups, &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320372&quot; title=&quot;test/jdk/sun/security/x509/DNSName/LeadingPeriod.java validity check failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320372&quot;&gt;&lt;strike&gt;JDK-8320372&lt;/strike&gt;&lt;/a&gt;, &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8347424&quot; title=&quot;Fix and rewrite sun/security/x509/DNSName/LeadingPeriod.java test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8347424&quot;&gt;&lt;strike&gt;JDK-8347424&lt;/strike&gt;&lt;/a&gt;. Applies cleanly, all tests pass, new test fails without a fix, passes with it. Risk is medium-low: touches certpath code, but the fix is simple and already shipping in existing JDKs.</comment>
                            <comment id="14740537" author="roboduke" created="Fri, 17 Jan 2025 02:20:24 -0800"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes the compatibility bug in certificate checking. Seen in the wild. The patch was in JDK 22 without product bugtail. The only problems are with the test, which requires additional followups, &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320372&quot; title=&quot;test/jdk/sun/security/x509/DNSName/LeadingPeriod.java validity check failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320372&quot;&gt;&lt;strike&gt;JDK-8320372&lt;/strike&gt;&lt;/a&gt;, &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8347424&quot; title=&quot;Fix and rewrite sun/security/x509/DNSName/LeadingPeriod.java test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8347424&quot;&gt;&lt;strike&gt;JDK-8347424&lt;/strike&gt;&lt;/a&gt;. Applies cleanly, all tests pass, new test fails without a fix, passes with it. Risk is medium-low: touches certpath code, but the fix is simple and already shipping in existing JDKs.</comment>
                            <comment id="14737308" author="shade" created="Fri, 10 Jan 2025 04:28:29 -0800"  >&amp;gt; I have a question for to backports. Is the newly added test (test/jdk/sun/security/x509/DNSName/LeadingPeriod.java) supposed to fail without the fix? &lt;br/&gt;
&lt;br/&gt;
Answering this myself: the test is actually broken, as it does not include CA cert in the certification path. So it passes even without the fix, and thus does not actually tests what the fix is supposed to test. I am going to rewrite the test in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8347424&quot; title=&quot;Fix and rewrite sun/security/x509/DNSName/LeadingPeriod.java test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8347424&quot;&gt;&lt;strike&gt;JDK-8347424&lt;/strike&gt;&lt;/a&gt; and backport that separately.</comment>
                            <comment id="14733345" author="roboduke" created="Wed, 18 Dec 2024 09:06:14 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3149&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3149&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-18 16:55:53 +0000</comment>
                            <comment id="14733335" author="roboduke" created="Wed, 18 Dec 2024 08:05:26 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1268&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1268&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-18 15:56:26 +0000</comment>
                            <comment id="14733332" author="shade" created="Wed, 18 Dec 2024 07:38:22 -0800"  >I have a question for to backports. Is the newly added test (test/jdk/sun/security/x509/DNSName/LeadingPeriod.java) supposed to fail without the fix? If I revert the fix hunks from mainline: &lt;a href=&quot;https://github.com/openjdk/jdk/commit/bfaf5704e7e71f968b716b5f448860e9cda721b4#diff-7eee55578098c26ee047c87b9beee84bb2de4693d1c39d791d8ee313c81d336c,&quot;&gt;https://github.com/openjdk/jdk/commit/bfaf5704e7e71f968b716b5f448860e9cda721b4#diff-7eee55578098c26ee047c87b9beee84bb2de4693d1c39d791d8ee313c81d336c,&lt;/a&gt; the test does not fail.</comment>
                            <comment id="14623050" author="dukebot" created="Wed, 1 Nov 2023 09:51:50 -0700"  >Changeset: bfaf5704&lt;br/&gt;
Author:    Ben Perez &amp;lt;&lt;a href=&apos;mailto:ben.perez@oracle.com&apos;&gt;ben.perez@oracle.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Sean Mullan &amp;lt;&lt;a href=&apos;mailto:mullan@openjdk.org&apos;&gt;mullan@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-11-01 16:49:50 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/bfaf5704e7e71f968b716b5f448860e9cda721b4&quot;&gt;https://git.openjdk.org/jdk/commit/bfaf5704e7e71f968b716b5f448860e9cda721b4&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14620454" author="roboduke" created="Mon, 23 Oct 2023 18:51:33 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/16295&quot;&gt;https://git.openjdk.org/jdk/pull/16295&lt;/a&gt;&lt;br/&gt;
Date: 2023-10-20 20:52:13 +0000</comment>
                            <comment id="14618352" author="mullan" created="Mon, 16 Oct 2023 05:50:30 -0700"  >Raising to P3 as we now have 3 reports on this issue.</comment>
                            <comment id="14613207" author="mullan" created="Fri, 22 Sep 2023 07:50:11 -0700"  >Another similar bug was filed (&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8315975&quot; title=&quot;Adopt de-facto standards on x509 Name Constraints with leading dot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8315975&quot;&gt;&lt;strike&gt;JDK-8315975&lt;/strike&gt;&lt;/a&gt;), which I marked as a duplicate of this and I added the following comment to that issue:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;This appears to be a duplicate of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8311546&quot; title=&quot;Certificate name constraints improperly validated with leading period&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8311546&quot;&gt;&lt;strike&gt;JDK-8311546&lt;/strike&gt;&lt;/a&gt;, which I initially added a comment that I didn&amp;#39;t think it was a bug.&lt;br/&gt;
&lt;br/&gt;
However, after reading the associated links in this issue, I now think this seems worthy of fixing, given that at least two other major implementations support the requested behavior, and RFC 5280 does not specify how a leading dot in a DNS name in name constraints should be handled.&lt;br/&gt;
&lt;br/&gt;
Also, I now see an Errata has already been added to RFC 5280 to correct and clarify this behavior: &lt;a href=&quot;https://www.rfc-editor.org/errata/eid5997&quot;&gt;https://www.rfc-editor.org/errata/eid5997&lt;/a&gt;&amp;quot;</comment>
                            <comment id="14594305" author="mullan" created="Thu, 6 Jul 2023 13:13:59 -0700"  >I don&amp;#39;t think this is a bug. Section 4.2.1.10 of RFC 5280 states that DNS name restrictions are expressed as host.example.com, so this certificate appears to be non-compliant since the DNS name starts with a &amp;quot;.&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
However, I&amp;#39;ll let the RE triage this and also check my eval in case I missed something.</comment>
                            <comment id="14594144" author="tongwan" created="Wed, 5 Jul 2023 19:52:30 -0700"  >The observations on Windows 10:&lt;br/&gt;
JDK 8: Failed, CertPathValidatorException observed.&lt;br/&gt;
JDK 11: Failed.&lt;br/&gt;
JDK 17: Failed.&lt;br/&gt;
JDK 20: Failed.&lt;br/&gt;
JDK 21ea+20: Failed.&lt;br/&gt;
</comment>
                            <comment id="14594141" author="tongwan" created="Wed, 5 Jul 2023 19:44:32 -0700"  >Additional information from the submitter:&lt;br/&gt;
Guess it&amp;#39;s a different version of openssl since it works for me.&lt;br/&gt;
I&amp;#39;ve updated the reproducer with some example certs now so you should be able to run the java file without having to run the script first.The naming should tell you which one is which anyway, and you can see the difference with `openssl x509 -in ca-without-leading-period.pem -noout -ext nameConstraints` as well.&lt;br/&gt;
</comment>
                            <comment id="14593693" author="tongwan" created="Tue, 4 Jul 2023 22:10:17 -0700"  >Contact the submitter that there seems errors happened when running sh generate-certs.sh:&lt;br/&gt;
Generating a RSA private key&lt;br/&gt;
...............+++++&lt;br/&gt;
........................................................+++++&lt;br/&gt;
writing new private key to &amp;#39;withLeadingPeriod/ca.key&amp;#39;&lt;br/&gt;
-----&lt;br/&gt;
Signature ok&lt;br/&gt;
subject=C = US, O = Example, CN = Example CA with period&lt;br/&gt;
Getting Private key&lt;br/&gt;
Generating a RSA private key&lt;br/&gt;
.........+++++&lt;br/&gt;
...........................................+++++&lt;br/&gt;
writing new private key to &amp;#39;withLeadingPeriod/leaf.key&amp;#39;&lt;br/&gt;
-----&lt;br/&gt;
Signature ok&lt;br/&gt;
subject=CN = demo.example.com&lt;br/&gt;
Getting CA Private Key&lt;br/&gt;
withLeadingPeriod/ca.srl: No such file or directory&lt;br/&gt;
140213751674176:error:06067099:digital envelope routines:EVP_PKEY_copy_parameters:different parameters:../crypto/evp/p_lib.c:93:&lt;br/&gt;
140213751674176:error:02001002:system library:fopen:No such file or directory:../crypto/bio/bss_file.c:69:fopen(&amp;#39;withLeadingPeriod/ca.srl&amp;#39;,&amp;#39;r&amp;#39;)&lt;br/&gt;
140213751674176:error:2006D080:BIO routines:BIO_new_file:no such file:../crypto/bio/bss_file.c:76:</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5148446">JDK-8348062</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148449">JDK-8348065</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150680">JDK-8350054</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150681">JDK-8350055</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5111720">JDK-8317848</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5109903">JDK-8315975</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5147703">JDK-8347424</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5115034">JDK-8320372</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="104513" name="JI-9075490 (2).zip" size="7293" author="tongwan" created="Wed, 5 Jul 2023 19:40:37 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i325g3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17433"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="195"><![CDATA[java.security]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>