<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:13:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8314319] LogCompilation doesn&apos;t reset lateInlining when it encounters a failure.</title>
                <link>https://bugs.openjdk.org/browse/JDK-8314319</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>here is the stacktrace. &lt;br/&gt;
&lt;br/&gt;
&#10140;  LogCompilation git:(master) &#10007; java -jar ./target/LogCompilation-1.0-SNAPSHOT.jar jit.xml&lt;br/&gt;
java.lang.InternalError: Unexpected method mismatch during late inlining (method at call site: java.util.LinkedHashMap$LinkedHashIterator::hasNext (13 bytes), method being parsed: java.util.AbstractCollection::addAll (42 bytes)) at 29018:56&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.reportInternalError(LogParser.java:643)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.reportInternalError(LogParser.java:623)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.startElement(LogParser.java:1224)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:518)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1407)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2726)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:542)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:889)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1224)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:637)&lt;br/&gt;
	at java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(SAXParserImpl.java:326)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.parse(LogParser.java:706)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.parse(LogParser.java:684)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogCompilation.main(LogCompilation.java:145)&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.InternalError: only nmethods should have a null compilation, here&amp;#39;s a class com.sun.hotspot.tools.compiler.UncommonTrapEvent&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.parse(LogParser.java:723)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogParser.parse(LogParser.java:684)&lt;br/&gt;
	at com.sun.hotspot.tools.compiler.LogCompilation.main(LogCompilation.java:145)</description>
                <environment></environment>
        <key id="5108087">JDK-8314319</key>
            <summary>LogCompilation doesn&apos;t reset lateInlining when it encounters a failure.</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thartmann">Tobias Hartmann</assignee>
                                    <reporter username="xliu">Xin Liu</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>diagnostics</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>oracle-triage-22</label>
                    </labels>
                <created>Tue, 15 Aug 2023 13:06:49 -0700</created>
                <updated>Tue, 2 Sep 2025 10:25:43 -0700</updated>
                            <resolved>Fri, 1 Sep 2023 09:56:16 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14776934" author="roboduke" created="Mon, 5 May 2025 12:21:11 -0700"  >[jdk17u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. One line fix to address issue where compilation encounters a failure after it processes &amp;#39;&amp;lt;late_inline&amp;gt;&amp;#39; tag, and, in cases where the C2 compiler retries after tweaking options, it omits subsume_load&lt;br/&gt;
&lt;br/&gt;
Risk: Low. Tip change was merged in September 2023 and PR adds a test to confirm functionality. Touches logCompilation, but is a one line change, easy to reason through.&lt;br/&gt;
&lt;br/&gt;
Testing:&lt;br/&gt;
* GHA Sanity Checks&lt;br/&gt;
* Tier 1 and 2 tests locally&lt;br/&gt;
* `src/utils/LogCompilation/src/test/java/com/sun/hotspot/tools/compiler/TestPrebuiltLogs.java`</comment>
                            <comment id="14776933" author="roboduke" created="Mon, 5 May 2025 12:20:02 -0700"  >[jdk21u-fix-request] Approval Request from Satyen Subramaniam&lt;br/&gt;
for backport. One line fix to address issue where compilation encounters a failure after it processes &amp;#39;&amp;lt;late_inline&amp;gt;&amp;#39; tag, and, in cases where the C2 compiler retries after tweaking options, it omits subsume_load&lt;br/&gt;
&lt;br/&gt;
Risk: Low. Tip change was merged in September 2023 and PR adds a test to confirm functionality.&lt;br/&gt;
&lt;br/&gt;
Testing:&lt;br/&gt;
* GHA Sanity Checks&lt;br/&gt;
* Tier 1 and 2 tests locally&lt;br/&gt;
* `src/utils/LogCompilation/src/test/java/com/sun/hotspot/tools/compiler/TestPrebuiltLogs.java`</comment>
                            <comment id="14776924" author="roboduke" created="Mon, 5 May 2025 12:08:28 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3545&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3545&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-05 19:00:45 +0000</comment>
                            <comment id="14776923" author="roboduke" created="Mon, 5 May 2025 12:08:26 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1737&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1737&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-05 19:00:42 +0000</comment>
                            <comment id="14608423" author="dukebot" created="Fri, 1 Sep 2023 09:56:15 -0700"  >Changeset: e9e0c569&lt;br/&gt;
Author:    Xin Liu &amp;lt;&lt;a href=&apos;mailto:xliu@openjdk.org&apos;&gt;xliu@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-09-01 16:54:55 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/e9e0c5699b8d0fbd1bd3a6caa3e0182a2e5bdda3&quot;&gt;https://git.openjdk.org/jdk/commit/e9e0c5699b8d0fbd1bd3a6caa3e0182a2e5bdda3&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14605699" author="thartmann" created="Tue, 22 Aug 2023 01:39:00 -0700"  >ILW = Log compilation tool throws an InternalError, when parsing a compilation error, no workaround = MLH = P4</comment>
                            <comment id="14605566" author="roboduke" created="Mon, 21 Aug 2023 19:55:22 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/15375&quot;&gt;https://git.openjdk.org/jdk/pull/15375&lt;/a&gt;&lt;br/&gt;
Date: 2023-08-22 02:48:26 +0000</comment>
                            <comment id="14605125" author="xliu" created="Fri, 18 Aug 2023 16:57:25 -0700"  >the rootcause of this is that c2 has trouble for method=&amp;#39;1387&amp;#39;, or AbstractCollection::addAll. &lt;br/&gt;
it decides to retry 1387 without &amp;#39;subsuming loads&amp;#39;.  however, it doesn&amp;#39;t reset lateInlining flag &lt;br/&gt;
The new parse of 1387 gets confused then.&lt;br/&gt;
&lt;br/&gt;
I think we should reset lateInlining every time we encounter &amp;lt;failure&amp;gt;</comment>
                            <comment id="14604126" author="xliu" created="Tue, 15 Aug 2023 13:23:59 -0700"  >I generated jit.xml when I try to rerun jtreg test &amp;#39;jdk/incubator/vector/ByteMaxVectorTests.java&amp;#39;</comment>
                            <comment id="14604124" author="xliu" created="Tue, 15 Aug 2023 13:11:56 -0700"  >here is the problematic code snippet.  it late inlines method &amp;#39;1387&amp;#39;. &lt;br/&gt;
&lt;br/&gt;
&amp;lt;late_inline method=&amp;#39;1396&amp;#39;  inline_id=&amp;#39;0&amp;#39;&amp;gt;&lt;br/&gt;
&amp;lt;jvms bci=&amp;#39;10&amp;#39; method=&amp;#39;1387&amp;#39;/&amp;gt;&lt;br/&gt;
&amp;lt;/late_inline&amp;gt;&lt;br/&gt;
&amp;lt;call method=&amp;#39;1446&amp;#39; count=&amp;#39;10906&amp;#39; prof_factor=&amp;#39;1.000000&amp;#39;/&amp;gt;&lt;br/&gt;
&amp;lt;predicted_call bci=&amp;#39;10&amp;#39; exact=&amp;#39;0&amp;#39; klass=&amp;#39;1412&amp;#39;/&amp;gt;&lt;br/&gt;
&amp;lt;direct_call bci=&amp;#39;10&amp;#39;/&amp;gt;&lt;br/&gt;
&amp;lt;failure reason=&amp;#39;retry without subsuming loads&amp;#39; phase=&amp;#39;compile&amp;#39;/&amp;gt;&lt;br/&gt;
&amp;lt;parse method=&amp;#39;1387&amp;#39; uses=&amp;#39;6656.000000&amp;#39; stamp=&amp;#39;11.779&amp;#39;&amp;gt;&lt;br/&gt;
&amp;lt;observe trap=&amp;#39;bimorphic_or_optimized_type_check&amp;#39; count=&amp;#39;4&amp;#39; total=&amp;#39;4&amp;#39;/&amp;gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5158327">JDK-8356677</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5169778">JDK-8366721</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="105112" name="jit.xml.zip" size="2342680" author="xliu" created="Tue, 15 Aug 2023 13:07:42 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32qq3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17407"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>