<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Fri Sep 26 01:27:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8325203] System.exit(0) kills the launched 3rd party application</title>
                <link>https://bugs.openjdk.org/browse/JDK-8325203</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Windows 11, &lt;br/&gt;
openjdk version &amp;quot;21.0.2&amp;quot; 2024-01-16 LTS&lt;br/&gt;
OpenJDK Runtime Environment Temurin-21.0.2+13 (build 21.0.2+13-LTS)&lt;br/&gt;
OpenJDK 64-Bit Server VM Temurin-21.0.2+13 (build 21.0.2+13-LTS, mixed mode, sharing)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
Hi there,&lt;br/&gt;
my Java app experienced a very weird regression when switching from JDK&lt;br/&gt;
OpenJDK21U-jdk_x64_windows_hotspot_21.0.1_12&lt;br/&gt;
to&lt;br/&gt;
OpenJDK21U-jdk_x64_windows_hotspot_21.0.2_13&lt;br/&gt;
&lt;br/&gt;
This small snippet should start a third party software (in this case Notepad++.exe but it&amp;#39;s just an example) and after 30 seconds, close the java app that launched it.&lt;br/&gt;
&lt;br/&gt;
public static void main(String... args) throws IOException {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String[] cmdToRunUsingArgs = {&amp;quot;cmd.exe&amp;quot;, &amp;quot;/C&amp;quot;, &amp;quot;C:\\Program Files\\Notepad++\\notepad++.exe&amp;quot;};&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Runtime.getRuntime().exec(cmdToRunUsingArgs);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Executors.newSingleThreadScheduledExecutor().schedule(() -&amp;gt; {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.exit(0);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}, 30, TimeUnit.SECONDS);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
It works well with all previous JDK versions but it stopped working from java 21.0.2 and later.&lt;br/&gt;
&lt;br/&gt;
With java 21.0.1, the program launches the third party app correcly, after 30 seconds, it kills itself by leaving the third app running.&lt;br/&gt;
With java 21.0.2, the program launches the third party app correcly, after 30 seconds, it kills itself AND the third party app.&lt;br/&gt;
&lt;br/&gt;
This makes even impossible to restart a java app from the app itself.&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 17.0.10&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
Run the code snippet from a JAR file not in an IDE!&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
The program should run a third party software and then close itself leaving the third party software running.&lt;br/&gt;
ACTUAL -&lt;br/&gt;
The program kills both the third party software and itself.&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
public static void main(String... args) throws IOException {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String[] cmdToRunUsingArgs = {&amp;quot;cmd.exe&amp;quot;, &amp;quot;/C&amp;quot;, &amp;quot;C:\\Program Files\\Notepad++\\notepad++.exe&amp;quot;};&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Runtime.getRuntime().exec(cmdToRunUsingArgs);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Executors.newSingleThreadScheduledExecutor().schedule(() -&amp;gt; {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.exit(0);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}, 30, TimeUnit.SECONDS);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
CUSTOMER SUBMITTED WORKAROUND :&lt;br/&gt;
no workaround found&lt;br/&gt;
&lt;br/&gt;
FREQUENCY : always&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5120670">JDK-8325203</key>
            <summary>System.exit(0) kills the launched 3rd party application</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asemenyuk">Alexey Semenyuk</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>additional-information-received</label>
                            <label>dcsaw</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>regression</label>
                            <label>reproducer-yes</label>
                            <label>sn_162</label>
                            <label>webbug</label>
                    </labels>
                <created>Sun, 4 Feb 2024 08:26:57 -0800</created>
                <updated>Sun, 2 Mar 2025 22:09:54 -0800</updated>
                            <resolved>Fri, 9 Feb 2024 09:06:50 -0800</resolved>
                                    <version>17.0.10-oracle</version>
                    <version>21.0.2</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="14677016" author="roboduke" created="Tue, 28 May 2024 23:24:42 -0700"  >[jdk17u-fix-request] Approval Request from Martin&lt;br/&gt;
Should get backported for parity with 17.0.12-oracle. Applies cleanly and the tests have passed.</comment>
                            <comment id="14676933" author="roboduke" created="Tue, 28 May 2024 13:20:40 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2505&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2505&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-28 20:14:47 +0000</comment>
                            <comment id="14663140" author="goetz" created="Fri, 5 Apr 2024 01:58:33 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.4-oracle to fix regression in 21.0.2.&lt;br/&gt;
Low risk, limited to one platform.&lt;br/&gt;
Clean backport except for Copyright. Will mark clean.&lt;br/&gt;
SAP nightly testing passed.&lt;br/&gt;
</comment>
                            <comment id="14663135" author="roboduke" created="Fri, 5 Apr 2024 01:46:42 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/459&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/459&lt;/a&gt;&lt;br/&gt;
Date: 2024-04-05 08:36:47 +0000</comment>
                            <comment id="14648050" author="roboduke" created="Fri, 9 Feb 2024 13:24:09 -0800"  >[jdk22u-fix-request] Approval Request from Aleksei Semeniuk&lt;br/&gt;
</comment>
                            <comment id="14648028" author="asemenyuk" created="Fri, 9 Feb 2024 11:00:51 -0800"  >Fix Request&lt;br/&gt;
&lt;br/&gt;
Fixes unexpected automatic shutdown of child subprocess started from Java app launched from jpackage launcher.&lt;br/&gt;
&lt;br/&gt;
The issue is a regression reported by a user. Critical for their use case and there are no workarounds available.&lt;br/&gt;
&lt;br/&gt;
Low-risk fix with a limited scope: minor code change affecting jpackage app launcher on Windows only in corner cases.&lt;br/&gt;
&lt;br/&gt;
This is a clean backport to 22u repo</comment>
                            <comment id="14648019" author="roboduke" created="Fri, 9 Feb 2024 10:51:03 -0800"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/49&quot;&gt;https://git.openjdk.org/jdk22u/pull/49&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-09 18:47:13 +0000</comment>
                            <comment id="14647999" author="dukebot" created="Fri, 9 Feb 2024 09:06:49 -0800"  >Changeset: 6944537c&lt;br/&gt;
Author:    Alexey Semenyuk &amp;lt;&lt;a href=&apos;mailto:asemenyuk@openjdk.org&apos;&gt;asemenyuk@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-02-09 17:05:05 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/6944537c3ebbbb638479e4c2b90a71ad5869023c&quot;&gt;https://git.openjdk.org/jdk/commit/6944537c3ebbbb638479e4c2b90a71ad5869023c&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14647777" author="roboduke" created="Thu, 8 Feb 2024 13:01:19 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/17779&quot;&gt;https://git.openjdk.org/jdk/pull/17779&lt;/a&gt;&lt;br/&gt;
Date: 2024-02-08 20:57:51 +0000</comment>
                            <comment id="14647750" author="asemenyuk" created="Thu, 8 Feb 2024 10:21:33 -0800"  >Looks like replacing &amp;quot;JOB_OBJECT_LIMIT_KILL_ON_JOB_CLOSE&amp;quot; at &lt;a href=&quot;https://github.com/openjdk/jdk/blob/master/src/jdk.jpackage/windows/native/applauncher/WinLauncher.cpp#L267&quot;&gt;https://github.com/openjdk/jdk/blob/master/src/jdk.jpackage/windows/native/applauncher/WinLauncher.cpp#L267&lt;/a&gt; with &amp;quot;JOB_OBJECT_LIMIT_KILL_ON_JOB_CLOSE | JOB_OBJECT_LIMIT_SILENT_BREAKAWAY_OK&amp;quot; should be sufficient</comment>
                            <comment id="14646678" author="kcr" created="Mon, 5 Feb 2024 09:02:59 -0800"  >This might be related to the fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8301247&quot; title=&quot;JPackage app-image exe launches multiple exe&amp;#39;s in JDK 17+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8301247&quot;&gt;&lt;strike&gt;JDK-8301247&lt;/strike&gt;&lt;/a&gt;</comment>
                            <comment id="14646597" author="alanb" created="Mon, 5 Feb 2024 02:35:54 -0800"  >I think this one needs someone on jpackage to do the initial triage to see if this is related to the launcher created by jpackage or not.</comment>
                            <comment id="14646594" author="pnarayanaswa" created="Mon, 5 Feb 2024 02:32:16 -0800"  >Additional Information from submitter:&lt;br/&gt;
===============================&lt;br/&gt;
Please test the problem with jpackage and run the program from the exe that generates jpackage&lt;br/&gt;
&lt;br/&gt;
To reproduce the issue you need to create a Windows executable with jpackage and execute the program via the generated exe file.&lt;br/&gt;
example&lt;br/&gt;
&amp;nbsp;jpackage -i --type exe --main-class org.example.Main --main-jar prova2-1.0-SNAPSHOT.jar --copyright &amp;quot;Pluto&amp;quot; --name &amp;quot;Pippo&amp;quot;  --vendor DPsoftware --win-dir-chooser --win-shortcut --win-per-user-install --win-shortcut --win-shortcut-prompt --java-options &amp;quot;-XX:+UseZGC -Xms64m -Xmx1024m&amp;quot;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14646419" author="tongwan" created="Sun, 4 Feb 2024 22:34:37 -0800"  >The observations on Windows 11:&lt;br/&gt;
JDK 21.0.2+13: Passed, Notepad++ is not killed.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5121115">JDK-8325573</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121124">JDK-8325581</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5122608">JDK-8326841</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5126438">JDK-8329880</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5130553">JDK-8333143</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5122835">JDK-8327060</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5130097">JDK-8333411</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5120260">JDK-8325924</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5092200">JDK-8301247</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5121062">JDK-8325525</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5130097">JDK-8333411</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="108146" name="Main.java" size="485" author="tongwan" created="Sun, 4 Feb 2024 22:30:06 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19000"><![CDATA[x86_64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19301"><![CDATA[windows_10]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34uyz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17338"><![CDATA[b10]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2192"><![CDATA[jpackage]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>