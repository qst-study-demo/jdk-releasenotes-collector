<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:48:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8346581] JRadioButton/ButtonGroupFocusTest.java fails in CI on Linux</title>
                <link>https://bugs.openjdk.org/browse/JDK-8346581</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The javax/swing/JRadioButton/ButtonGroupFocus/ButtonGroupFocusTest.java test fails on Linux:&lt;br/&gt;
&lt;br/&gt;
----------System.out:(0/0)----------&lt;br/&gt;
----------System.err:(25/1755)----------&lt;br/&gt;
java.lang.reflect.InvocationTargetException&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventQueue.invokeAndWait(EventQueue.java:1312)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventQueue.invokeAndWait(EventQueue.java:1287)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/javax.swing.SwingUtilities.invokeAndWait(SwingUtilities.java:1474)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at ButtonGroupFocusTest.main(ButtonGroupFocusTest.java:95)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.reflect.Method.invoke(Method.java:565)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.Thread.run(Thread.java:1447)&lt;br/&gt;
Caused by: java.lang.RuntimeException: Button 4 should get focus&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at ButtonGroupFocusTest.lambda$main$2(ButtonGroupFocusTest.java:98)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:308)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:702)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)</description>
                <environment></environment>
        <key id="5146662">JDK-8346581</key>
            <summary>JRadioButton/ButtonGroupFocusTest.java fails in CI on Linux</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aivanov">Alexey Ivanov</assignee>
                                    <reporter username="aivanov">Alexey Ivanov</reporter>
                        <labels>
                            <label>cssn24_12_02</label>
                            <label>cssn25_01_01</label>
                            <label>cssn25_02_01</label>
                            <label>cssn25_02_02</label>
                            <label>cssn25_03_01</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk24u-fix-SQE-ok</label>
                            <label>jdk24u-fix-request</label>
                            <label>jdk24u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>sust-clts</label>
                            <label>sustaining</label>
                    </labels>
                <created>Wed, 18 Dec 2024 10:32:50 -0800</created>
                <updated>Tue, 18 Mar 2025 01:44:23 -0700</updated>
                            <resolved>Fri, 10 Jan 2025 02:39:25 -0800</resolved>
                                    <version>8</version>
                    <version>24</version>
                    <version>25</version>
                                    <fixVersion>25</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14761175" author="roboduke" created="Sat, 15 Mar 2025 14:38:18 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3361&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3361&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-15 21:32:57 +0000</comment>
                            <comment id="14761174" author="roboduke" created="Sat, 15 Mar 2025 14:36:56 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1503&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1503&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-15 21:32:35 +0000</comment>
                            <comment id="14761169" author="goetz" created="Sat, 15 Mar 2025 14:20:26 -0700"  >Fix request [17u,21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.16-oracle,21.0.8-oracle.&lt;br/&gt;
No risk, only a test change&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14743760" author="roboduke" created="Fri, 24 Jan 2025 11:56:29 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/32&quot;&gt;https://git.openjdk.org/jdk24u/pull/32&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-24 19:50:49 +0000</comment>
                            <comment id="14743758" author="aivanov" created="Fri, 24 Jan 2025 11:51:11 -0800"  >Fix Request for 24u&lt;br/&gt;
&lt;br/&gt;
This fix improves stability of the `javax/swing/JRadioButton/ButtonGroupFocus/ButtonGroupFocusTest.java` test. The test passes successfully in (Oracle) CI.&lt;br/&gt;
Risk: Low&lt;br/&gt;
&lt;br/&gt;
Pull request for 24u: &lt;a href=&quot;https://github.com/openjdk/jdk24u/pull/32&quot;&gt;https://github.com/openjdk/jdk24u/pull/32&lt;/a&gt;</comment>
                            <comment id="14737279" author="dukebot" created="Fri, 10 Jan 2025 02:39:24 -0800"  >Changeset: 57af52c5&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Alexey Ivanov &amp;lt;&lt;a href=&apos;mailto:aivanov@openjdk.org&apos;&gt;aivanov@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-01-10 10:34:22 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/57af52c57390f6f7413b5d3ffe64921c9b83aae4&quot;&gt;https://git.openjdk.org/jdk/commit/57af52c57390f6f7413b5d3ffe64921c9b83aae4&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14736796" author="roboduke" created="Wed, 8 Jan 2025 11:48:44 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/22977&quot;&gt;https://git.openjdk.org/jdk/pull/22977&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-08 19:40:29 +0000</comment>
                            <comment id="14736794" author="aivanov" created="Wed, 8 Jan 2025 11:31:20 -0800"  >image-1.png is the screenshot of the test frame when the test fails.</comment>
                            <comment id="14735715" author="aivanov" created="Fri, 3 Jan 2025 10:05:33 -0800"  >Using latches has improved the test stability.&lt;br/&gt;
&lt;br/&gt;
Yet the test still fails in CI when run with `JTREG=REPEAT_COUNT=20`. The javax/swing/JRadioButton/ButtonGroupFocus/ButtonGroupFocusTest.java test usually passes on the first attempt, but it fails on the second or third attempt.&lt;br/&gt;
&lt;br/&gt;
The reason why it fails is because the KEY_PRESSED event is dispatched twice. The test code contains:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;\n\n*** Tab 1st&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;robot.keyPress(KeyEvent.VK_TAB);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;robot.keyRelease(KeyEvent.VK_TAB);&lt;br/&gt;
&lt;br/&gt;
These lines of code result in the following log:&lt;br/&gt;
&lt;br/&gt;
Dispatched java.awt.event.KeyEvent[KEY_PRESSED,keyCode=9,keyText=Tab,&#8230;] on JRadioButton[&#8230;,text=Button 2]&lt;br/&gt;
// focus moves from Button 2 to Button 4&lt;br/&gt;
Dispatched java.awt.event.KeyEvent[KEY_TYPED,keyCode=0,&#8230;] on JRadioButton[&#8230;,text=Button 4]&lt;br/&gt;
Dispatched java.awt.event.KeyEvent[KEY_PRESSED,keyCode=9,keyText=Tab,&#8230;] on JRadioButton[&#8230;,text=Button 4]&lt;br/&gt;
Dispatched java.awt.event.KeyEvent[KEY_TYPED,keyCode=0,&#8230;] on JRadioButton[&#8230;,text=Button 4]&lt;br/&gt;
Dispatched java.awt.event.KeyEvent[KEY_RELEASED,keyCode=9,keyText=Tab,&#8230;] on JRadioButton[&#8230;,text=Button 4]&lt;br/&gt;
&lt;br/&gt;
Because of the second spurious KEY_PRESSES, focus moves back to Button 2. This breaks the test expectations.&lt;br/&gt;
&lt;br/&gt;
When the Tab key is pressed / released for the second time, it produces the expected sequence: KEY_PRESSED, KEY_TYPED, KEY_RELEASED. But because the focus is on Button 2, it moves to Button 4.</comment>
                            <comment id="14733909" author="aivanov" created="Fri, 20 Dec 2024 08:03:50 -0800"  >The test could be improved not only in 8u but in mainline too.&lt;br/&gt;
&lt;br/&gt;
Firstly, using a focusGained latch proves to be much more stable.&lt;br/&gt;
&lt;br/&gt;
Secondly, the test could capture a screenshot which helps diagnose the problem. Printing the current focus owner is also a good addition.</comment>
                            <comment id="14733896" author="aivanov" created="Fri, 20 Dec 2024 07:10:19 -0800"  >I added capturing of screenshot if the test fails, and the screenshot contains the background image only on Linux in 8u. The error message is &#8220;Button 2 should get focus after activation.&#8221;&lt;br/&gt;
&lt;br/&gt;
This means the first condition in the test is verified before the UI is fully initialised and shown.&lt;br/&gt;
&lt;br/&gt;
In mainline, the focus on the screenshot is at Button 2, and the error message is the one in the bug description: &#8220;Button 4 should get focus.&#8221;</comment>
                            <comment id="14733372" author="aivanov" created="Wed, 18 Dec 2024 10:38:56 -0800"  >I should&amp;#39;ve used JDK-8346023 instead of submitting a new bug.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5149928">JDK-8349393</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152035">JDK-8351204</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152038">JDK-8351205</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152040">JDK-8351207</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152200">JDK-8351353</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153161">JDK-8352233</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153164">JDK-8352236</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                                        </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="112893" name="image-1.png" size="4504" author="aivanov" created="Wed, 8 Jan 2025 11:30:25 -0800"/>
                            <attachment id="112604" name="image.png" size="30477" author="aivanov" created="Fri, 20 Dec 2024 07:03:15 -0800"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3967n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="206"><![CDATA[javax.swing]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>