<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:03:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8328665] serviceability/jvmti/vthread/PopFrameTest failed with a timeout</title>
                <link>https://bugs.openjdk.org/browse/JDK-8328665</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The test serviceability/jvmti/vthread/PopFrameTest/PopFrameTest.java#no-vmcontinuations resulted in test timeout after 480 secs.&lt;br/&gt;
&lt;br/&gt;
This bug is a copy of the JDK-8327781 as it was created as a confidential by accident. The JDK-8327781 is closed as dup.</description>
                <environment></environment>
        <key id="5124808">JDK-8328665</key>
            <summary>serviceability/jvmti/vthread/PopFrameTest failed with a timeout</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sspitsyn">Serguei Spitsyn</assignee>
                                    <reporter username="sspitsyn">Serguei Spitsyn</reporter>
                        <labels>
                            <label>intermittent</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>loom</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Wed, 20 Mar 2024 23:23:03 -0700</created>
                <updated>Fri, 13 Sep 2024 10:34:49 -0700</updated>
                            <resolved>Mon, 1 Apr 2024 16:39:18 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14703919" author="roboduke" created="Tue, 10 Sep 2024 06:09:09 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/963&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/963&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-10 13:01:47 +0000</comment>
                            <comment id="14703916" author="goetz" created="Tue, 10 Sep 2024 06:03:52 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.6-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
PopFrameTest passes.</comment>
                            <comment id="14661846" author="dukebot" created="Mon, 1 Apr 2024 16:39:17 -0700"  >Changeset: 70c8ff1c&lt;br/&gt;
Author:    Serguei Spitsyn &amp;lt;&lt;a href=&apos;mailto:sspitsyn@openjdk.org&apos;&gt;sspitsyn@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-04-01 23:37:07 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/70c8ff1c9a9adf21a16d8a6b4da1eeec65afe61d&quot;&gt;https://git.openjdk.org/jdk/commit/70c8ff1c9a9adf21a16d8a6b4da1eeec65afe61d&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14659231" author="roboduke" created="Thu, 21 Mar 2024 00:15:41 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18419&quot;&gt;https://git.openjdk.org/jdk/pull/18419&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-21 07:11:33 +0000</comment>
                            <comment id="14659222" author="sspitsyn" created="Wed, 20 Mar 2024 23:26:04 -0700"  >The suggested fix is:&lt;br/&gt;
&lt;br/&gt;
diff --git a/test/hotspot/jtreg/serviceability/jvmti/vthread/PopFrameTest/PopFrameTest.java b/test/hotspot/jtreg/serviceability/jvmti/vthread/PopFrameTest/PopFrameTest.java&lt;br/&gt;
index f3500fec4a9..013fe050107 100644&lt;br/&gt;
--- a/test/hotspot/jtreg/serviceability/jvmti/vthread/PopFrameTest/PopFrameTest.java&lt;br/&gt;
+++ b/test/hotspot/jtreg/serviceability/jvmti/vthread/PopFrameTest/PopFrameTest.java&lt;br/&gt;
@@ -145,6 +145,7 @@ public static void run() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;log(&amp;quot;Main #B.2: got expected JVMTI_ERROR_NONE&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resumeThread(testTaskThread);&lt;br/&gt;
+ ensureAtBreakpoint();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;notifyAtBreakpoint();&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;log(&amp;quot;\nMain #B.3: unsuspended, call PopFrame on own thread&amp;quot;); </comment>
                            <comment id="14659221" author="sspitsyn" created="Wed, 20 Mar 2024 23:25:30 -0700"  >This part of the log is the most interesting:&lt;br/&gt;
&lt;br/&gt;
LOG with timeout:&lt;br/&gt;
=============&lt;br/&gt;
. . .&lt;br/&gt;
Main #B.2: suspended&lt;br/&gt;
Main: suspendThread&lt;br/&gt;
Main: popFrame: PopFrame returned code: JVMTI_ERROR_NONE (0)&lt;br/&gt;
Main #B.2: got expected JVMTI_ERROR_NONE&lt;br/&gt;
Main: resumeThread&lt;br/&gt;
Main: notifyAtBreakpoint&lt;br/&gt;
&lt;br/&gt;
Main #B.3: unsuspended, call PopFrame on own thread&lt;br/&gt;
Main: ensureAtBreakpoint&lt;br/&gt;
Breakpoint: In method TestTask.B(): after sync section&lt;br/&gt;
Breakpoint: In method TestTask.B() finished&lt;br/&gt;
TestTask.B: started&lt;br/&gt;
. . .&lt;br/&gt;
=============&lt;br/&gt;
&lt;br/&gt;
Normal log is a little bit different:&lt;br/&gt;
&lt;br/&gt;
LOG without timeout:&lt;br/&gt;
=============&lt;br/&gt;
. . .&lt;br/&gt;
Main #B.2: suspended&lt;br/&gt;
Main: suspendThread&lt;br/&gt;
Main: popFrame: PopFrame returned code: JVMTI_ERROR_NONE (0)&lt;br/&gt;
Main #B.2: got expected JVMTI_ERROR_NONE&lt;br/&gt;
Main: resumeThread&lt;br/&gt;
Main: notifyAtBreakpoint&lt;br/&gt;
Breakpoint: In method TestTask.B(): after sync section&lt;br/&gt;
Breakpoint: In method TestTask.B() finished&lt;br/&gt;
&lt;br/&gt;
Main #B.3: unsuspended, call PopFrame on own thread&lt;br/&gt;
Main: ensureAtBreakpoint&lt;br/&gt;
TestTask.B: started&lt;br/&gt;
. . .&lt;br/&gt;
=============&lt;br/&gt;
&lt;br/&gt;
In normal case, these two lines appear before the &amp;quot;Main #B.3: ...&amp;quot;, not after:&lt;br/&gt;
Breakpoint: In method TestTask.B(): after sync section&lt;br/&gt;
Breakpoint: In method TestTask.B() finished&lt;br/&gt;
&lt;br/&gt;
It means that the TestTask thread was notified before it reached the expected&lt;br/&gt;
point of execution in the Breakpoint callback.&lt;br/&gt;
So, the issue is a gap in the synchronization between `MainThread` and `TestTask` threads. </comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5136656">JDK-8338259</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5139080">JDK-8340136</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                                                <inwardlinks description="duplicates">
                                                        </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35juj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17417"><![CDATA[b17]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="372"><![CDATA[jvmti]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>