<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Thu Sep 25 23:11:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8354893] [REDO BACKPORT] javac crashes while adding type annotations to the return type of a constructor (JDK-8320001)</title>
                <link>https://bugs.openjdk.org/browse/JDK-8354893</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>It&amp;#39;s observed that some of the JCK tests related to Annotation processing are failing in JDK 22-b23 with &amp;quot;java.lang.AssertionError: Cannot add metadata to this type: VOID&amp;quot;&lt;br/&gt;
Possibly a regression caused by - &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8225377&quot;&gt;https://bugs.openjdk.org/browse/JDK-8225377&lt;/a&gt; &lt;br/&gt;
&lt;br/&gt;
The tests are passing with JDK22-b22.&lt;br/&gt;
&lt;br/&gt;
Attaching the sample AnnotationProcessor with sample target class file (Tester)&lt;br/&gt;
&lt;br/&gt;
Here is the observation :&lt;br/&gt;
====&lt;br/&gt;
&lt;br/&gt;
With b-22 ( Tester class successfully parsed by Annotation Processor)&lt;br/&gt;
====&lt;br/&gt;
/scratch/jdk-cache/22/22/jdk-22/bin/javac -processor  AnnoProc Tester&lt;br/&gt;
init...&lt;br/&gt;
process...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;annotations []&lt;br/&gt;
&lt;br/&gt;
With b-23 ( java.lang.AssertionError: Cannot add metadata to this type: VOID )&lt;br/&gt;
====&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;/scratch/jdk-cache/22/23/jdk-22/bin/javac -processor  AnnoProc Tester&lt;br/&gt;
An exception has occurred in the compiler (22-ea). Please file a bug against the Java compiler via the Java bug reporting page (&lt;a href=&quot;https://bugreport.java.com&quot;&gt;https://bugreport.java.com&lt;/a&gt;) after checking the Bug Database (&lt;a href=&quot;https://bugs.java.com&quot;&gt;https://bugs.java.com&lt;/a&gt;) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.&lt;br/&gt;
java.lang.AssertionError: Cannot add metadata to this type: VOID&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Type.cloneWithMetadata(Type.java:351)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Type.addMetadata(Type.java:390)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Type.annotatedType(Type.java:456)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationTypeMapping.reannotate(ClassReader.java:2548)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationTypeMapping.visitType(ClassReader.java:2568)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationTypeMapping.visitType(ClassReader.java:2523)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Type.accept(Type.java:223)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Types$DefaultTypeVisitor.visit(Types.java:4894)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationSymbolVisitor.addTypeAnnotations(ClassReader.java:2426)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationSymbolVisitor.addTypeAnnotations(ClassReader.java:2394)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationSymbolVisitor.visitMethodSymbol(ClassReader.java:2335)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationSymbolVisitor.visitMethodSymbol(ClassReader.java:2286)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Symbol$MethodSymbol.accept(Symbol.java:2271)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Types$DefaultSymbolVisitor.visit(Types.java:4921)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader.addTypeAnnotationsToSymbol(ClassReader.java:2283)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.jvm.ClassReader$TypeAnnotationCompleter.run(ClassReader.java:2266)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.comp.Annotate.flush(Annotate.java:191)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.ClassFinder.complete(ClassFinder.java:322)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Symbol.complete(Symbol.java:682)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.Symbol$ClassSymbol.complete(Symbol.java:1418)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.code.ClassFinder.loadClass(ClassFinder.java:446)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.resolveBinaryNameOrIdent(JavaCompiler.java:730)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.resolveBinaryNameOrIdent(JavaCompiler.java:719)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1239)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:946)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.main.Main.compile(Main.java:319)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.main.Main.compile(Main.java:178)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.Main.compile(Main.java:66)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.compiler/com.sun.tools.javac.Main.main(Main.java:52)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5156224">JDK-8354893</key>
            <summary>[REDO BACKPORT] javac crashes while adding type annotations to the return type of a constructor (JDK-8320001)</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cushon">Liam Miller-Cushon</assignee>
                                    <reporter username="cushon">Liam Miller-Cushon</reporter>
                        <labels>
                            <label>22-na</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Wed, 16 Apr 2025 12:14:11 -0700</created>
                <updated>Wed, 30 Apr 2025 02:16:48 -0700</updated>
                            <resolved>Mon, 21 Apr 2025 09:20:11 -0700</resolved>
                                    <version>21.0.8</version>
                                    <fixVersion>21.0.8</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14775174" author="dukebot" created="Wed, 30 Apr 2025 01:02:06 -0700"  >Changeset: b2225c8c&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Liam Miller-Cushon &amp;lt;&lt;a href=&apos;mailto:cushon@openjdk.org&apos;&gt;cushon@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Paul Hohensee &amp;lt;&lt;a href=&apos;mailto:phh@openjdk.org&apos;&gt;phh@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-04-21 16:14:50 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk21u/commit/b2225c8c491e9a5f4f6d2ef14338369d681d6110&quot;&gt;https://git.openjdk.org/jdk21u/commit/b2225c8c491e9a5f4f6d2ef14338369d681d6110&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14772214" author="dukebot" created="Mon, 21 Apr 2025 09:20:09 -0700"  >Changeset: b2225c8c&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Liam Miller-Cushon &amp;lt;&lt;a href=&apos;mailto:cushon@openjdk.org&apos;&gt;cushon@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Paul Hohensee &amp;lt;&lt;a href=&apos;mailto:phh@openjdk.org&apos;&gt;phh@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-04-21 16:14:50 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/commit/b2225c8c491e9a5f4f6d2ef14338369d681d6110&quot;&gt;https://git.openjdk.org/jdk21u-dev/commit/b2225c8c491e9a5f4f6d2ef14338369d681d6110&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14771186" author="roboduke" created="Thu, 17 Apr 2025 08:57:34 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1675&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1675&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-17 15:51:15 +0000</comment>
                            <comment id="14771028" author="sgehwolf" created="Thu, 17 Apr 2025 01:49:40 -0700"  >This got backed out of the JDK 21.0.2 release with &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8322883&quot; title=&quot;[BACKOUT] 8225377: type annotations are not visible to javac plugins across compilation boundaries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8322883&quot;&gt;&lt;strike&gt;JDK-8322883&lt;/strike&gt;&lt;/a&gt;. Thus, a JDK 21-specific redo bug. In later JDKs the fix &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8320001&quot; title=&quot;javac crashes while adding type annotations to the return type of a constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8320001&quot;&gt;&lt;strike&gt;JDK-8320001&lt;/strike&gt;&lt;/a&gt; (for which this is a redo), didn&amp;#39;t get backed out.</comment>
                            <comment id="14770892" author="roboduke" created="Wed, 16 Apr 2025 12:28:03 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1670&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1670&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-16 19:20:25 +0000</comment>
                            <comment id="14770891" author="roboduke" created="Wed, 16 Apr 2025 12:26:47 -0700"  >[jdk21u-fix-request] Approval Request from Liam Miller-Cushon&lt;br/&gt;
for backport. This is a follow-on fix related to the backport of &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8341779&quot; title=&quot;[REDO BACKPORT] type annotations are not visible to javac plugins across compilation boundaries (JDK-8225377)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8341779&quot;&gt;&lt;strike&gt;JDK-8341779&lt;/strike&gt;&lt;/a&gt; (allow accessing type-use annotations on types loaded from class files). Affected tests pass. The patch applies cleanly, I resolved a trivial merge conflict due to changes in context lines.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>Cloners</name>
                                            <outwardlinks description="clones">
                                        <issuelink>
            <issuekey id="5114629">JDK-8320001</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5141006">JDK-8341779</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5117958">JDK-8322883</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17640"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3arpn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17304"><![CDATA[b01]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="212"><![CDATA[javac]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>