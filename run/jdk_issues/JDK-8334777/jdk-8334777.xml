<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:44:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8334777] Test javax/management/remote/mandatory/notif/NotifReconnectDeadlockTest.java failed with NullPointerException</title>
                <link>https://bugs.openjdk.org/browse/JDK-8334777</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Test: javax/management/remote/mandatory/notif/NotifReconnectDeadlockTest.java&lt;br/&gt;
&lt;br/&gt;
----------System.out:(1/57)----------&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; Tests reconnection done by a fetching notif thread.&lt;br/&gt;
----------System.err:(16/1440)----------&lt;br/&gt;
Jun 20, 2024 5:26:08 PM com.sun.jmx.remote.internal.ServerCommunicatorAdmin reqIncoming&lt;br/&gt;
WARNING: The server has decided to close this client connection.&lt;br/&gt;
java.lang.NullPointerException: Cannot invoke &amp;quot;javax.management.remote.NotificationResult.getNextSequenceNumber()&amp;quot; because &amp;quot;nr&amp;quot; is null&lt;br/&gt;
	at java.management/com.sun.jmx.remote.internal.ClientNotifForwarder.init(ClientNotifForwarder.java:844)&lt;br/&gt;
	at java.management/com.sun.jmx.remote.internal.ClientNotifForwarder.addNotificationListener(ClientNotifForwarder.java:185)&lt;br/&gt;
	at java.management.rmi/javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.addNotificationListener(RMIConnector.java:1218)&lt;br/&gt;
	at NotifReconnectDeadlockTest.main(NotifReconnectDeadlockTest.java:94)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1575)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.NullPointerException: Cannot invoke &amp;quot;javax.management.remote.NotificationResult.getNextSequenceNumber()&amp;quot; because &amp;quot;nr&amp;quot; is null&lt;br/&gt;
JavaTest Message: shutting down test</description>
                <environment></environment>
        <key id="5132444">JDK-8334777</key>
            <summary>Test javax/management/remote/mandatory/notif/NotifReconnectDeadlockTest.java failed with NullPointerException</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinw">Kevin Walls</assignee>
                                    <reporter username="dholmes">David Holmes</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>tier6</label>
                    </labels>
                <created>Sun, 23 Jun 2024 15:19:46 -0700</created>
                <updated>Thu, 19 Jun 2025 21:10:11 -0700</updated>
                            <resolved>Tue, 9 Jul 2024 01:27:33 -0700</resolved>
                                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>core-svc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14732280" author="roboduke" created="Mon, 16 Dec 2024 01:34:52 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3121&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3121&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-16 09:28:43 +0000</comment>
                            <comment id="14732279" author="roboduke" created="Mon, 16 Dec 2024 01:34:50 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1239&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1239&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-16 09:28:36 +0000</comment>
                            <comment id="14732274" author="goetz" created="Mon, 16 Dec 2024 01:28:02 -0800"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.7-oracle,17.0.15-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14688178" author="dukebot" created="Tue, 9 Jul 2024 01:27:32 -0700"  >Changeset: 2a296475&lt;br/&gt;
Author:    Kevin Walls &amp;lt;&lt;a href=&apos;mailto:kevinw@openjdk.org&apos;&gt;kevinw@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-07-09 08:25:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/2a2964759c73b3b9ab6afaad109383c89952977b&quot;&gt;https://git.openjdk.org/jdk/commit/2a2964759c73b3b9ab6afaad109383c89952977b&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14685432" author="roboduke" created="Thu, 27 Jun 2024 09:00:14 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19930&quot;&gt;https://git.openjdk.org/jdk/pull/19930&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-27 15:53:09 +0000</comment>
                            <comment id="14685419" author="kevinw" created="Thu, 27 Jun 2024 08:34:53 -0700"  >Given the -Xcomp makes the timing artificially, and we timeout during while establishing a connection, we should skip this test with -Xcomp as we have done for some other tests.&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14684492" author="kevinw" created="Tue, 25 Jun 2024 01:40:26 -0700"  >&lt;br/&gt;
Two occurrences, both on Windows and with: -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation&lt;br/&gt;
&lt;br/&gt;
This is be caused by a timeout on the connection by ServerCommunicatorAdmin, during an addNotificationListener call.&lt;br/&gt;
Happens when using JVM options like -Xcomp or -XX:CompileThreshold=100&lt;br/&gt;
&lt;br/&gt;
These test failures are with the low threshold.  I can&amp;#39;t reproduce it that way, but can reproduce the same failure with -Xcomp&lt;br/&gt;
&lt;br/&gt;
--&lt;br/&gt;
&lt;br/&gt;
While adding a NotificationListener, ClientNotifForwarder&amp;#39;s init method calls: &lt;br/&gt;
835                      NotificationResult nr = fetchNotifs(-1, 0, 0);&lt;br/&gt;
and gets null.&lt;br/&gt;
&lt;br/&gt;
This would have called into RMIConnector$RMINotifClient.fetchNotifs(RMIConnector.java)&lt;br/&gt;
&lt;br/&gt;
1318                      return connection.fetchNotifications(clientSequenceNumber,&lt;br/&gt;
1319                              maxNotifications,&lt;br/&gt;
1320                              timeout);&lt;br/&gt;
&lt;br/&gt;
...which calls into RMIConnectionImpl which checks&lt;br/&gt;
&lt;br/&gt;
1280          final boolean serverTerminated =&lt;br/&gt;
1281              serverCommunicatorAdmin.reqIncoming();&lt;br/&gt;
&lt;br/&gt;
...and would return null if serverTerminated.&lt;br/&gt;
&lt;br/&gt;
We have in the log, before the Exception:&lt;br/&gt;
&lt;br/&gt;
WARNING: The server has decided to close this client connection.&lt;br/&gt;
&lt;br/&gt;
This message is from:&lt;br/&gt;
open/src/java.management/share/classes/com/sun/jmx/remote/internal/ServerCommunicatorAdmin.java&lt;br/&gt;
method reqIncoming() if terminated is true (this is the call from RMIConnectionImpl).&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Timeout value is set in RMIConnectionImpl:&lt;br/&gt;
&lt;br/&gt;
159          serverCommunicatorAdmin = new&lt;br/&gt;
160            RMIServerCommunicatorAdmin(EnvHelp.getServerConnectionTimeout(env));&lt;br/&gt;
&lt;br/&gt;
EnvHelp defines this as:&lt;br/&gt;
&lt;br/&gt;
630      /**&lt;br/&gt;
631       * Name of the attribute that specifies the timeout to keep a&lt;br/&gt;
632       * server side connection after answering last client request.&lt;br/&gt;
633       * The default value is 120000 milliseconds.&lt;br/&gt;
634       */&lt;br/&gt;
635      public static final String SERVER_CONNECTION_TIMEOUT =&lt;br/&gt;
636          &amp;quot;jmx.remote.x.server.connection.timeout&amp;quot;;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Both test failures have elapsed time a few seconds under 2 minutes.&lt;br/&gt;
elapsed=112389 0\:01\:52.389&lt;br/&gt;
end=Fri Jun 21 00\:09\:23 UTC 2024&lt;br/&gt;
&lt;br/&gt;
elapsed=118655 0\:01\:58.655&lt;br/&gt;
end=Thu Jun 20 17\:26\:27 UTC 2024</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5145555">JDK-8345636</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145559">JDK-8345640</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145560">JDK-8345641</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145698">JDK-8345772</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5146481">JDK-8346412</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5146484">JDK-8346415</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5132442">JDK-8334775</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132443">JDK-8334776</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5132445">JDK-8334778</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                                        </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ucr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="375"><![CDATA[javax.management]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>