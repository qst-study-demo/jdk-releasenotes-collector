<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Fri Sep 26 01:07:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8328366] Thread.setContextClassloader from thread in FJP commonPool task no longer works after JDK-8327501</title>
                <link>https://bugs.openjdk.org/browse/JDK-8328366</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Christian Wimmer in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327501&quot; title=&quot;Common ForkJoinPool prevents class unloading in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8327501&quot;&gt;&lt;strike&gt;JDK-8327501&lt;/strike&gt;&lt;/a&gt; writes:&lt;br/&gt;
&lt;br/&gt;
The fix for &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327501&quot; title=&quot;Common ForkJoinPool prevents class unloading in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8327501&quot;&gt;&lt;strike&gt;JDK-8327501&lt;/strike&gt;&lt;/a&gt; has a compatibility impact that has been overlooked: Using `InnocuousForkJoinWorkerThread` means that any task that runs in the common pool can no longer use `Thread.currentThread().setContextClassLoader(...)` - that unconditionally throws a `SecurityException`.&lt;br/&gt;
&lt;br/&gt;
This breaks many existing Java libraries and frameworks. One example is Quarkus. See:&lt;br/&gt;
&lt;a href=&quot;https://github.com/quarkusio/quarkus/issues/39526&quot;&gt;https://github.com/quarkusio/quarkus/issues/39526&lt;/a&gt;</description>
                <environment></environment>
        <key id="5124459">JDK-8328366</key>
            <summary>Thread.setContextClassloader from thread in FJP commonPool task no longer works after JDK-8327501</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vklang">Viktor Klang</assignee>
                                    <reporter username="sgehwolf">Severin Gehwolf</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk22u-fix-SQE-ok</label>
                            <label>jdk22u-fix-request</label>
                            <label>jdk22u-fix-yes</label>
                            <label>redhat-interest</label>
                            <label>regression</label>
                    </labels>
                <created>Mon, 18 Mar 2024 09:50:10 -0700</created>
                <updated>Mon, 25 Nov 2024 13:35:10 -0800</updated>
                            <resolved>Thu, 4 Apr 2024 11:35:48 -0700</resolved>
                                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14677781" author="roboduke" created="Fri, 31 May 2024 04:38:47 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes the regression introduced by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327501&quot; title=&quot;Common ForkJoinPool prevents class unloading in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8327501&quot;&gt;&lt;strike&gt;JDK-8327501&lt;/strike&gt;&lt;/a&gt;. Applies cleanly. Tests pass.</comment>
                            <comment id="14676303" author="roboduke" created="Mon, 27 May 2024 01:45:47 -0700"  >[jdk22u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes the regression introduced by &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327501&quot; title=&quot;Common ForkJoinPool prevents class unloading in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8327501&quot;&gt;&lt;strike&gt;JDK-8327501&lt;/strike&gt;&lt;/a&gt;. Applies cleanly. Tests pass.</comment>
                            <comment id="14673706" author="roboduke" created="Wed, 15 May 2024 10:25:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk22u/pull/206&quot;&gt;https://git.openjdk.org/jdk22u/pull/206&lt;/a&gt;&lt;br/&gt;
Date: 2024-05-15 09:32:31 +0000</comment>
                            <comment id="14663497" author="roboduke" created="Mon, 8 Apr 2024 00:09:48 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/338&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/338&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-07 10:07:27 +0000</comment>
                            <comment id="14662966" author="dukebot" created="Thu, 4 Apr 2024 11:35:47 -0700"  >Changeset: 28216aa9&lt;br/&gt;
Author:    Viktor Klang &amp;lt;&lt;a href=&apos;mailto:vklang@openjdk.org&apos;&gt;vklang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-04-04 18:32:59 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/28216aa971ea65938117107542152abd532a5384&quot;&gt;https://git.openjdk.org/jdk/commit/28216aa971ea65938117107542152abd532a5384&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14662965" author="JIRAUSER20508" created="Thu, 4 Apr 2024 11:32:06 -0700"  >Created &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8329701&quot;&gt;https://bugs.openjdk.org/browse/JDK-8329701&lt;/a&gt; to track the thread locals</comment>
                            <comment id="14659629" author="JIRAUSER20508" created="Fri, 22 Mar 2024 06:17:22 -0700"  >Quick update, the proposed fix looks good. Awaiting review and a decision as to whether this PR should restore the clearing of ThreadLocals or not.</comment>
                            <comment id="14659036" author="roboduke" created="Wed, 20 Mar 2024 09:31:27 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/18374&quot;&gt;https://git.openjdk.org/jdk/pull/18374&lt;/a&gt;&lt;br/&gt;
Date: 2024-03-19 12:16:29 +0000</comment>
                            <comment id="14658881" author="jeisl" created="Wed, 20 Mar 2024 00:51:40 -0700"  >Sounds good. Thanks for the update [~alanb].</comment>
                            <comment id="14658876" author="alanb" created="Wed, 20 Mar 2024 00:44:17 -0700"  >[~jeisl] A fix is in the works, no need to revert. Main thing is that we have a good set of tests for the various cases.</comment>
                            <comment id="14658868" author="jeisl" created="Wed, 20 Mar 2024 00:27:03 -0700"  >Can we just revert &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327501&quot; title=&quot;Common ForkJoinPool prevents class unloading in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8327501&quot;&gt;&lt;strike&gt;JDK-8327501&lt;/strike&gt;&lt;/a&gt; until a proper fix is available?</comment>
                            <comment id="14658222" author="alanb" created="Mon, 18 Mar 2024 16:30:37 -0700"  >Setting the thread CCL in a task executed in a thread pool, or in this case, the FJP common pool, doesn&amp;#39;t usually make sense. Sometimes it is necessary to defend against this and reset the TCCL after the task completes. In any case, we need to restore long standing behavior as the set method shouldn&amp;#39;t fail with a SecurityException.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5130495">JDK-8333096</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5136379">JDK-8338028</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5136566">JDK-8338188</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5142307">JDK-8342905</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5144815">JDK-8344993</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5141258">JDK-8341989</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5123451">JDK-8327501</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17424"><![CDATA[b14]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="23032">23</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35hr7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="215"><![CDATA[java.util.concurrent]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10100" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Verification</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17000"><![CDATA[Verified]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>