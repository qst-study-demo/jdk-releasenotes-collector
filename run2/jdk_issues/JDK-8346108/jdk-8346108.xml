<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Fri Sep 26 00:37:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8346108] [21u][BACKOUT] 8337994: [REDO] Native memory leak when not recording any events</title>
                <link>https://bugs.openjdk.org/browse/JDK-8346108</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Backout the backport of 8337994 to 21u.&lt;br/&gt;
&lt;br/&gt;
We see failures of test/jdk/jdk/jfr/jvm/TestChunkIntegrity.java with slowdebug and fastdebug builds. &lt;br/&gt;
The failure is well reproducible with the slowdebug build, but with faster binaries the test passes sometimes. &lt;br/&gt;
In our nightly CI with high load the fastdebug build fails reliably.&lt;br/&gt;
&lt;br/&gt;
From the .jtr file of the testruns:&lt;br/&gt;
&lt;br/&gt;
Veryfying chunk: disassembled/recording_00.jfr 0&lt;br/&gt;
Veryfying chunk: disassembled/recording_01.jfr 3338&lt;br/&gt;
Veryfying chunk: disassembled/recording_02.jfr 9083&lt;br/&gt;
One value null&lt;br/&gt;
Value A: {&lt;br/&gt;
type = N/A&lt;br/&gt;
name = &amp;quot;bootstrap&amp;quot;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Value B: null&lt;br/&gt;
Field classLoader doesn&amp;#39;t match&lt;br/&gt;
Value A: {&lt;br/&gt;
type = N/A&lt;br/&gt;
name = &amp;quot;bootstrap&amp;quot;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Value B: null&lt;br/&gt;
Field type doesn&amp;#39;t match&lt;br/&gt;
Value A: {&lt;br/&gt;
classLoader = null&lt;br/&gt;
name = &amp;quot;jdk/internal/loader/ClassLoaders$AppClassLoader&amp;quot;&lt;br/&gt;
package = {&lt;br/&gt;
name = &amp;quot;jdk/internal/loader&amp;quot;&lt;br/&gt;
module = {&lt;br/&gt;
name = &amp;quot;java.base&amp;quot;&lt;br/&gt;
version = &amp;quot;21.0.7-internal&amp;quot;&lt;br/&gt;
location = &amp;quot;jrt:/java.base&amp;quot;&lt;br/&gt;
classLoader = null&lt;br/&gt;
}&lt;br/&gt;
exported = true&lt;br/&gt;
}&lt;br/&gt;
modifiers = 10&lt;br/&gt;
hidden = false&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Value B: {&lt;br/&gt;
classLoader = N/A&lt;br/&gt;
name = &amp;quot;jdk/internal/loader/ClassLoaders$AppClassLoader&amp;quot;&lt;br/&gt;
package = {&lt;br/&gt;
name = &amp;quot;jdk/internal/loader&amp;quot;&lt;br/&gt;
module = {&lt;br/&gt;
name = &amp;quot;java.base&amp;quot;&lt;br/&gt;
version = &amp;quot;21.0.7-internal&amp;quot;&lt;br/&gt;
location = &amp;quot;jrt:/java.base&amp;quot;&lt;br/&gt;
classLoader = N/A&lt;br/&gt;
}&lt;br/&gt;
exported = true&lt;br/&gt;
}&lt;br/&gt;
modifiers = 10&lt;br/&gt;
hidden = false&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Field classLoader doesn&amp;#39;t match&lt;br/&gt;
Value A: {&lt;br/&gt;
type = jdk.internal.loader.ClassLoaders$AppClassLoader (classLoader = bootstrap)&lt;br/&gt;
name = &amp;quot;app&amp;quot;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Value B: {&lt;br/&gt;
type = jdk.internal.loader.ClassLoaders$AppClassLoader (classLoader = null)&lt;br/&gt;
name = &amp;quot;app&amp;quot;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Field type doesn&amp;#39;t match&lt;br/&gt;
Value A: {&lt;br/&gt;
classLoader = jdk.internal.loader.ClassLoaders$AppClassLoader (id = 3)&lt;br/&gt;
name = &amp;quot;jdk/jfr/jvm/TestChunkIntegrity$ClassStressor&amp;quot;&lt;br/&gt;
package = {&lt;br/&gt;
name = &amp;quot;jdk/jfr/jvm&amp;quot;&lt;br/&gt;
module = {&lt;br/&gt;
name = N/A&lt;br/&gt;
version = N/A&lt;br/&gt;
location = N/A&lt;br/&gt;
classLoader = jdk.internal.loader.ClassLoaders$AppClassLoader (id = 3)&lt;br/&gt;
}&lt;br/&gt;
exported = true&lt;br/&gt;
}&lt;br/&gt;
modifiers = 8&lt;br/&gt;
hidden = false&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Value B: {&lt;br/&gt;
classLoader = jdk.internal.loader.ClassLoaders$AppClassLoader (id = 3)&lt;br/&gt;
name = &amp;quot;jdk/jfr/jvm/TestChunkIntegrity$ClassStressor&amp;quot;&lt;br/&gt;
package = {&lt;br/&gt;
name = &amp;quot;jdk/jfr/jvm&amp;quot;&lt;br/&gt;
module = {&lt;br/&gt;
name = N/A&lt;br/&gt;
version = N/A&lt;br/&gt;
location = N/A&lt;br/&gt;
classLoader = jdk.internal.loader.ClassLoaders$AppClassLoader (id = 3)&lt;br/&gt;
}&lt;br/&gt;
exported = true&lt;br/&gt;
}&lt;br/&gt;
modifiers = 8&lt;br/&gt;
hidden = false&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Field method doesn&amp;#39;t match&lt;br/&gt;
Value A: {&lt;br/&gt;
type = jdk.jfr.jvm.TestChunkIntegrity$ClassStressor (classLoader = app)&lt;br/&gt;
name = &amp;quot;stress&amp;quot;&lt;br/&gt;
descriptor = &amp;quot;()V&amp;quot;&lt;br/&gt;
modifiers = 4&lt;br/&gt;
hidden = false&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Value B: {&lt;br/&gt;
type = jdk.jfr.jvm.TestChunkIntegrity$ClassStressor (classLoader = app)&lt;br/&gt;
name = &amp;quot;stress&amp;quot;&lt;br/&gt;
descriptor = &amp;quot;()V&amp;quot;&lt;br/&gt;
modifiers = 4&lt;br/&gt;
hidden = false&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Array contents doesn&amp;#39;t match&lt;br/&gt;
Field frames doesn&amp;#39;t match&lt;br/&gt;
Value A: [Ljava.lang.Object;@16e87903&lt;br/&gt;
Value B: [Ljava.lang.Object;@466281af&lt;br/&gt;
Object A:&lt;br/&gt;
Clazz {&lt;br/&gt;
startTime = 01:26:04.779 (2024-12-12)&lt;br/&gt;
clazz = jdk.jfr.jvm.TestChunkIntegrity$MyClass (classLoader = JFR TestClassLoader)&lt;br/&gt;
eventThread = &amp;quot;Thread-1&amp;quot; (javaThreadId = 33)&lt;br/&gt;
stackTrace = [&lt;br/&gt;
jdk.jfr.jvm.TestChunkIntegrity$ClassStressor.stress() line: 272&lt;br/&gt;
jdk.jfr.jvm.TestChunkIntegrity$StressThread.run() line: 75&lt;br/&gt;
]&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Object B:&lt;br/&gt;
Clazz {&lt;br/&gt;
startTime = 01:26:04.779 (2024-12-12)&lt;br/&gt;
clazz = jdk.jfr.jvm.TestChunkIntegrity$MyClass (classLoader = JFR TestClassLoader)&lt;br/&gt;
eventThread = &amp;quot;Thread-1&amp;quot; (javaThreadId = 33)&lt;br/&gt;
stackTrace = [&lt;br/&gt;
jdk.jfr.jvm.TestChunkIntegrity$ClassStressor.stress() line: 272&lt;br/&gt;
jdk.jfr.jvm.TestChunkIntegrity$StressThread.run() line: 75&lt;br/&gt;
]&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
----------System.err:(12/755)----------&lt;br/&gt;
java.lang.AssertionError: Events don&amp;#39;t match. Event number 0&lt;br/&gt;
at jdk.jfr.jvm.TestChunkIntegrity.assertEventEquals(TestChunkIntegrity.java:174)&lt;br/&gt;
at jdk.jfr.jvm.TestChunkIntegrity.main(TestChunkIntegrity.java:131)&lt;br/&gt;
at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
at java.base/java.lang.reflect.Method.invoke(Method.java:580)&lt;br/&gt;
at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
at java.base/java.lang.Thread.run(Thread.java:1583)&lt;br/&gt;
&lt;br/&gt;
JavaTest Message: Test threw exception: java.lang.AssertionError: Events don&amp;#39;t match. Event number 0&lt;br/&gt;
JavaTest Message: shutting down test&lt;br/&gt;
&lt;br/&gt;
STATUS:Failed.`main&amp;#39; threw exception: java.lang.AssertionError: Events don&amp;#39;t match. Event number 0&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5146148">JDK-8346108</key>
            <summary>[21u][BACKOUT] 8337994: [REDO] Native memory leak when not recording any events</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="goetz">Goetz Lindenmaier</assignee>
                                    <reporter username="goetz">Goetz Lindenmaier</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Thu, 12 Dec 2024 07:21:23 -0800</created>
                <updated>Wed, 5 Feb 2025 02:12:26 -0800</updated>
                            <resolved>Thu, 12 Dec 2024 08:56:11 -0800</resolved>
                                    <version>21.0.7</version>
                                    <fixVersion>21.0.7</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14749304" author="dukebot" created="Wed, 5 Feb 2025 02:06:10 -0800"  >Changeset: e7111b2d&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Goetz Lindenmaier &amp;lt;&lt;a href=&apos;mailto:goetz@openjdk.org&apos;&gt;goetz@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-12-12 16:54:21 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk21u/commit/e7111b2d0c27518da4751a022b96e1dd7bffa723&quot;&gt;https://git.openjdk.org/jdk21u/commit/e7111b2d0c27518da4751a022b96e1dd7bffa723&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14731601" author="dukebot" created="Thu, 12 Dec 2024 08:56:09 -0800"  >Changeset: e7111b2d&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Goetz Lindenmaier &amp;lt;&lt;a href=&apos;mailto:goetz@openjdk.org&apos;&gt;goetz@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-12-12 16:54:21 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/commit/e7111b2d0c27518da4751a022b96e1dd7bffa723&quot;&gt;https://git.openjdk.org/jdk21u-dev/commit/e7111b2d0c27518da4751a022b96e1dd7bffa723&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14731574" author="bulasevich" created="Thu, 12 Dec 2024 07:37:18 -0800"  >My observation: TestChunkIntegrity.java test works good in fastdebug and release build but fails in slowdebug mode. This was not noticed during preparation for the backport.</comment>
                            <comment id="14731572" author="roboduke" created="Thu, 12 Dec 2024 07:31:49 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1226&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1226&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-12 15:24:45 +0000</comment>
                            <comment id="14731571" author="goetz" created="Thu, 12 Dec 2024 07:29:33 -0800"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I want to backout the change as it causes test failures. &lt;br/&gt;
I verified that the test passes again with this change.&lt;br/&gt;
Review pending, but I request anyways to get this done.&lt;br/&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5136345">JDK-8337994</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145963">JDK-8346000</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3931f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17304"><![CDATA[b01]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="374"><![CDATA[jfr]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>