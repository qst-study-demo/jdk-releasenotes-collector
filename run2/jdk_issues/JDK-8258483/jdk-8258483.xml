<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:08:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8258483] [TESTBUG] gtest CollectorPolicy.young_scaled_initial_ergo_vm fails if heap is too small</title>
                <link>https://bugs.openjdk.org/browse/JDK-8258483</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>If gtests are started with a small heap, this gtest fails:&lt;br/&gt;
&lt;br/&gt;
```&lt;br/&gt;
&lt;a href=&apos;mailto:thomas@mainframe&apos;&gt;thomas@mainframe&lt;/a&gt;:/shared/projects/openjdk/jdk-jdk/output-fastdebug$ ./hotspot/variant-server/libjvm/gtest/gtestLauncher -Xmx128m  -jdk:./images/jdk   --gtest_filter=CollectorPolicy.young_scaled_initial_ergo_vm&lt;br/&gt;
Note: Google Test filter = CollectorPolicy.young_scaled_initial_ergo_vm&lt;br/&gt;
[==========] Running 1 test from 1 test case.&lt;br/&gt;
[----------] Global test environment set-up.&lt;br/&gt;
[----------] 1 test from CollectorPolicy&lt;br/&gt;
[ RUN      ] CollectorPolicy.young_scaled_initial_ergo_vm&lt;br/&gt;
[0,118s][warning][gc,ergo] Inconsistency between generation sizes and heap size, resizing the generations to fit the heap.&lt;br/&gt;
/shared/projects/openjdk/jdk-jdk/source/test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp:124: Failure&lt;br/&gt;
Expected equality of these values:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;expected&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Which is: 34930688&lt;br/&gt;
&amp;nbsp;&amp;nbsp;NewSize&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Which is: 54525952&lt;br/&gt;
/shared/projects/openjdk/jdk-jdk/source/test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp:80: Failure&lt;br/&gt;
Expected: checker-&amp;gt;execute() doesn&amp;#39;t generate new fatal failures in the current thread.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Actual: it does.&lt;br/&gt;
[  FAILED  ] CollectorPolicy.young_scaled_initial_ergo_vm (0 ms)&lt;br/&gt;
[----------] 1 test from CollectorPolicy (119 ms total)&lt;br/&gt;
&lt;br/&gt;
[----------] Global test environment tear-down&lt;br/&gt;
[==========] 1 test from 1 test case ran. (119 ms total)&lt;br/&gt;
[  PASSED  ] 0 tests.&lt;br/&gt;
[  FAILED  ] 1 test, listed below:&lt;br/&gt;
[  FAILED  ] CollectorPolicy.young_scaled_initial_ergo_vm&lt;br/&gt;
```&lt;br/&gt;
&lt;br/&gt;
It would be nice if the test would just be ignored if it cannot be run under these circumstances.</description>
                <environment></environment>
        <key id="5037564">JDK-8258483</key>
            <summary>[TESTBUG] gtest CollectorPolicy.young_scaled_initial_ergo_vm fails if heap is too small</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lmesnik">Leonid Mesnik</assignee>
                                    <reporter username="stuefe">Thomas Stuefe</reporter>
                        <labels>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>testbug</label>
                    </labels>
                <created>Wed, 16 Dec 2020 04:14:19 -0800</created>
                <updated>Fri, 9 May 2025 02:11:16 -0700</updated>
                            <resolved>Wed, 28 Aug 2024 13:22:10 -0700</resolved>
                                    <version>17</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14777127" author="goetz" created="Tue, 6 May 2025 03:01:04 -0700"  >Fix request [11u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 11.0.28-oracle.&lt;br/&gt;
No risk, only a test change. Follow-up for PPC in work.&lt;br/&gt;
Trivial resolve.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14777112" author="roboduke" created="Tue, 6 May 2025 02:19:14 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/3028&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/3028&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-06 09:14:09 +0000</comment>
                            <comment id="14767140" author="roboduke" created="Fri, 4 Apr 2025 06:36:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1592&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1592&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-04 13:27:58 +0000</comment>
                            <comment id="14767139" author="roboduke" created="Fri, 4 Apr 2025 06:36:49 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3437&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3437&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-04 13:28:07 +0000</comment>
                            <comment id="14767132" author="goetz" created="Fri, 4 Apr 2025 06:28:54 -0700"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.8-oracle,17.0.16-oracle.&lt;br/&gt;
No risk, only a test change.  Follow-up for PPC in work.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14701789" author="stuefe" created="Fri, 30 Aug 2024 03:52:08 -0700"  >Do we understand why this error is happening? </comment>
                            <comment id="14701779" author="mbaesken" created="Fri, 30 Aug 2024 03:19:42 -0700"  >50M instead of 40M would work on Linux ppc64le too, should we use this value instead ?&lt;br/&gt;
&lt;br/&gt;
diff --git a/test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp b/test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp&lt;br/&gt;
index 06874ee0698..a7d89dcfdd6 100644&lt;br/&gt;
--- a/test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp&lt;br/&gt;
+++ b/test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp&lt;br/&gt;
@@ -67,7 +67,7 @@ class TestGenCollectorPolicy {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MinHeapSize = 40 * M;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FLAG_SET_ERGO(InitialHeapSize, 100 * M);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FLAG_SET_ERGO(NewSize, 1 * M);&lt;br/&gt;
-      FLAG_SET_ERGO(MaxNewSize, 40 * M);&lt;br/&gt;
+      FLAG_SET_ERGO(MaxNewSize, 50 * M);&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ASSERT_NO_FATAL_FAILURE(setter1-&amp;gt;execute());&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
@@ -196,7 +196,7 @@ TEST_OTHER_VM(CollectorPolicy, young_cmd) {&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;// If NewSize is set on command line, but is larger than the min&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;// heap size, it should only be used for initial young size.&lt;br/&gt;
-  TestGenCollectorPolicy::SetNewSizeCmd setter_large(40 * M);&lt;br/&gt;
-  TestGenCollectorPolicy::CheckYoungInitial checker_large(40 * M);&lt;br/&gt;
+  TestGenCollectorPolicy::SetNewSizeCmd setter_large(50 * M);&lt;br/&gt;
+  TestGenCollectorPolicy::CheckYoungInitial checker_large(50 * M);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;TestGenCollectorPolicy::TestWrapper::test(&amp;amp;setter_large, &amp;amp;checker_large);&lt;br/&gt;
</comment>
                            <comment id="14701738" author="stuefe" created="Fri, 30 Aug 2024 00:31:40 -0700"  >[~mbaesken] likely to do with the fact that ppc uses 64k pages.</comment>
                            <comment id="14701736" author="mbaesken" created="Fri, 30 Aug 2024 00:12:03 -0700"  >On AIX / Linux ppc64le  (the power platforms we test regularly) we see now this failure in the gtests  :&lt;br/&gt;
&lt;br/&gt;
[ RUN      ] CollectorPolicy.young_scaled_initial_ergo_vm&lt;br/&gt;
test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp:122: Failure&lt;br/&gt;
Expected equality of these values:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;expected&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Which is: 44695552&lt;br/&gt;
&amp;nbsp;&amp;nbsp;NewSize&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Which is: 41943040&lt;br/&gt;
&lt;br/&gt;
test/hotspot/gtest/gc/shared/test_collectorPolicy.cpp:78: Failure&lt;br/&gt;
Expected: checker-&amp;gt;execute() doesn&amp;#39;t generate new fatal failures in the current thread.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Actual: it does.&lt;br/&gt;
&lt;br/&gt;
[  FAILED  ] CollectorPolicy.young_scaled_initial_ergo_vm (0 ms)&lt;br/&gt;
&lt;br/&gt;
Reason might be that the heap is scaled up on the ppc64 platforms by ergonomics (?) .&lt;br/&gt;
So maybe should we better keep the old values on the ppc64 platforms ?</comment>
                            <comment id="14701375" author="dukebot" created="Wed, 28 Aug 2024 13:22:08 -0700"  >Changeset: d08b5bd9&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Leonid Mesnik &amp;lt;&lt;a href=&apos;mailto:lmesnik@openjdk.org&apos;&gt;lmesnik@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-08-28 20:18:51 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/d08b5bd9f5f740d75c1acfbd644ce1c822e03833&quot;&gt;https://git.openjdk.org/jdk/commit/d08b5bd9f5f740d75c1acfbd644ce1c822e03833&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14699585" author="roboduke" created="Tue, 20 Aug 2024 17:21:06 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20656&quot;&gt;https://git.openjdk.org/jdk/pull/20656&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-21 00:16:26 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5154463">JDK-8353339</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5154464">JDK-8353340</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155043">JDK-8353867</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155049">JDK-8353873</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5155148">JDK-8353963</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5158239">JDK-8356609</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="5137898">JDK-8339300</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5054223">JDK-8270555</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qtdf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17339"><![CDATA[b13]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="209"><![CDATA[gc]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>