<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:59:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8353237] [AArch64] Incorrect result of VectorizedHashCode intrinsic on Cortex-A53</title>
                <link>https://bugs.openjdk.org/browse/JDK-8353237</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>ADDITIONAL SYSTEM INFORMATION :&lt;br/&gt;
Hardware: Raspberry PI 3B&lt;br/&gt;
OS: Linux raspberrypi 6.6.74+rpt-rpi-v8 #1 SMP PREEMPT Debian 1:6.6.74-1+rpt1 (2025-01-27) aarch64 GNU/Linux&lt;br/&gt;
Java: openjdk 24 2025-03-18&lt;br/&gt;
OpenJDK Runtime Environment (build 24+36-3646)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 24+36-3646, mixed mode, sharing)&lt;br/&gt;
&lt;br/&gt;
A DESCRIPTION OF THE PROBLEM :&lt;br/&gt;
Running a simple Spring Boot jar application on JDK 24 (Linux/AArch64) fails with a ClassNotFoundException. &lt;br/&gt;
* The same application runs fine on JDK 23.0.2&lt;br/&gt;
* The same application runs fine on JDK 24 on Windows/x64&lt;br/&gt;
&lt;br/&gt;
The application consists of the demo application downloaded from &lt;a href=&quot;https://start.spring.io/&quot;&gt;https://start.spring.io/&lt;/a&gt; and packaged as a jar by Maven.&lt;br/&gt;
&lt;br/&gt;
REGRESSION : Last worked in version 23.0.2&lt;br/&gt;
&lt;br/&gt;
STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :&lt;br/&gt;
* Download a project from &lt;a href=&quot;https://start.spring.io/&quot;&gt;https://start.spring.io/&lt;/a&gt; with the settings: Maven build, Java language, Spring Boot 3.4.4 (also tried 3.5.0-M3), jar packaging, Java 21 (also tried 24), no extra dependencies&lt;br/&gt;
* Extract the project to a directory&lt;br/&gt;
* Build the project using:&lt;br/&gt;
mvn package&lt;br/&gt;
* Unpack the jar:&lt;br/&gt;
java -Djarmode=tools -jar demo-0.0.1-SNAPSHOT.jar extract&lt;br/&gt;
* Run the app:&lt;br/&gt;
java -jar demo-0.0.1-SNAPSHOT/demo-0.0.1-SNAPSHOT.jar&lt;br/&gt;
&lt;br/&gt;
(I also found that running -Djarmode=tools in JDK 24 on Linux/AArch64 failed with a ClassNotFoundException, albeit with a different class and stacktrace).&lt;br/&gt;
&lt;br/&gt;
EXPECTED VERSUS ACTUAL BEHAVIOR :&lt;br/&gt;
EXPECTED -&lt;br/&gt;
App runs and outputs something like:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;.   ____          _            __ _ _&lt;br/&gt;
&amp;nbsp;/\\ / ___&amp;#39;_ __ _ _(_)_ __  __ _ \ \ \ \&lt;br/&gt;
( ( )\___ | &amp;#39;_ | &amp;#39;_| | &amp;#39;_ \/ _` | \ \ \ \&lt;br/&gt;
&amp;nbsp;\\/  ___)| |_)| | | | | || (_| |  ) ) ) )&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;#39;  |____| .__|_| |_|_| |_\__, | / / / /&lt;br/&gt;
&amp;nbsp;=========|_|==============|___/=/_/_/_/&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;:: Spring Boot ::                (v3.4.4)&lt;br/&gt;
&lt;br/&gt;
2025-03-29T13:38:32.829+11:00  INFO 58508 --- [demo] [           main] com.example.demo.DemoApplication         : Starting DemoApplication v0.0.1-SNAPSHOT using Java 23.0.2 with PID 58508 (/home/pi/demo-0.0.1-SNAPSHOT/demo-0.0.1-SNAPSHOT.jar started by pi in /home/pi)&lt;br/&gt;
2025-03-29T13:38:32.852+11:00  INFO 58508 --- [demo] [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: &amp;quot;default&amp;quot;&lt;br/&gt;
2025-03-29T13:38:36.894+11:00  INFO 58508 --- [demo] [           main] com.example.demo.DemoApplication         : Started DemoApplication in 7.276 seconds (process running for 9.302)&lt;br/&gt;
ACTUAL -&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.springframework.boot.SpringApplication.&amp;lt;clinit&amp;gt;(SpringApplication.java:202)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at com.example.demo.DemoApplication.main(DemoApplication.java:11)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:580)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:490)&lt;br/&gt;
&lt;br/&gt;
---------- BEGIN SOURCE ----------&lt;br/&gt;
As described above.&lt;br/&gt;
---------- END SOURCE ----------&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5154325">JDK-8353237</key>
            <summary>[AArch64] Incorrect result of VectorizedHashCode intrinsic on Cortex-A53</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://bugs.openjdk.org/images/jbsImages/p2.png">P2</priority>
                        <status id="6" iconUrl="https://bugs.openjdk.org/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="avoitylov">Aleksei Voitylov</assignee>
                                    <reporter username="webbuggrp">Webbug Group</reporter>
                        <labels>
                            <label>additional-information-received</label>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>dcsaw</label>
                            <label>intrinsic</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk24u-fix-request</label>
                            <label>oracle-triage-25</label>
                            <label>regression</label>
                            <label>reproducer-yes</label>
                            <label>webbug</label>
                    </labels>
                <created>Fri, 28 Mar 2025 20:11:22 -0700</created>
                <updated>Mon, 28 Jul 2025 07:13:53 -0700</updated>
                            <resolved>Thu, 15 May 2025 04:09:55 -0700</resolved>
                                    <version>21.0.7</version>
                    <version>24</version>
                    <version>25</version>
                                    <fixVersion>25</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14783508" author="roboduke" created="Tue, 27 May 2025 01:09:08 -0700"  >[jdk24u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Same reason as for 21u, please refer to approval request there.</comment>
                            <comment id="14783503" author="roboduke" created="Tue, 27 May 2025 01:02:18 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk24u/pull/225&quot;&gt;https://git.openjdk.org/jdk24u/pull/225&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-27 07:54:37 +0000</comment>
                            <comment id="14783444" author="aph" created="Mon, 26 May 2025 14:10:17 -0700"  >Approved. Justification: hard crash on supported (albeit old) hardware, impossible to avoid.&lt;br/&gt;
In hindsight, maybe the intrinsic shouldn&amp;#39;t have been backported.</comment>
                            <comment id="14783323" author="roboduke" created="Mon, 26 May 2025 04:59:46 -0700"  >[jdk21u-fix-request] Approval Request from Aleksey Shipil&amp;#xEB;v&lt;br/&gt;
Fixes Cortex A53 regression in 21.0.7. While the fix is fairly recent, it is also predicated on A53 &amp;quot;feature&amp;quot;, so all other AArch64 code is not affected. We have seen customer reports that current 21.0.7 is broken without this patch on A53. Therefore risk/benefit is towards backporting it now. tier1 passes on Graviton 3; more testing is running. Asking for 21u approval ahead of time, since rampdown for 21.0.8 is looming.</comment>
                            <comment id="14783315" author="roboduke" created="Mon, 26 May 2025 04:34:59 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1832&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1832&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-26 11:29:29 +0000</comment>
                            <comment id="14780359" author="dukebot" created="Thu, 15 May 2025 04:09:54 -0700"  >Changeset: 883e52aa&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Aleksei Voitylov &amp;lt;&lt;a href=&apos;mailto:avoitylov@openjdk.org&apos;&gt;avoitylov@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Dmitry Chuyko &amp;lt;&lt;a href=&apos;mailto:dchuyko@openjdk.org&apos;&gt;dchuyko@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-05-15 11:06:22 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/883e52aa105727f4bc852d1497e049b689695152&quot;&gt;https://git.openjdk.org/jdk/commit/883e52aa105727f4bc852d1497e049b689695152&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14767506" author="roboduke" created="Mon, 7 Apr 2025 05:49:50 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/24489&quot;&gt;https://git.openjdk.org/jdk/pull/24489&lt;/a&gt;&lt;br/&gt;
Date: 2025-04-07 12:39:40 +0000</comment>
                            <comment id="14767404" author="thartmann" created="Sun, 6 Apr 2025 23:21:19 -0700"  >I think this should also be backported to JDK 24u if there&amp;#39;s time left.</comment>
                            <comment id="14767022" author="thartmann" created="Fri, 4 Apr 2025 00:10:45 -0700"  >ILW = Incorrect result of intrinsified code, easy to reproduce on some hardware, -XX:+UnlockDiagnosticVMOptions -XX:-UseVectorizedHashCodeIntrinsic = HML = P2</comment>
                            <comment id="14767017" author="thartmann" created="Fri, 4 Apr 2025 00:05:36 -0700"  >Another report: &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8353476&quot; title=&quot;C2 vectorizedHashCode intrinsic doesn&amp;#39;t work on some ARM boards&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8353476&quot;&gt;&lt;strike&gt;JDK-8353476&lt;/strike&gt;&lt;/a&gt;</comment>
                            <comment id="14766907" author="avoitylov" created="Thu, 3 Apr 2025 12:50:34 -0700"  >The bug has sufficient details to reproduce the issue, but it&amp;#39;s true that specific hardware (Cortex A53 found in Raspberry Pi 3 for example) is required to be able to reproduce it.&lt;br/&gt;
&lt;br/&gt;
The intrinsic added as part of &amp;quot;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8341194&quot; title=&quot;[REDO] Implement C2 VectorizedHashCode on AArch64&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8341194&quot;&gt;&lt;strike&gt;JDK-8341194&lt;/strike&gt;&lt;/a&gt; [REDO] Implement C2 VectorizedHashCode on AArch64&amp;quot; does not account for the extra nops generated by &amp;quot;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8079203&quot; title=&quot;aarch64 needs to cater for different partner implementations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8079203&quot;&gt;&lt;strike&gt;JDK-8079203&lt;/strike&gt;&lt;/a&gt; AARCH64: Need to cater for different partner implementations&amp;quot;. Because of that on Raspberry Pi 3 and other Cortex-A53 the intrinsic works incorrectly. The workaround is to use &amp;#39;-XX:+UnlockDiagnosticVMOptions -XX:-UseVectorizedHashCodeIntrinsic&amp;#39;.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m testing the attached fix now and will submit it for review when ready.</comment>
                            <comment id="14765585" author="pnarayanaswa" created="Mon, 31 Mar 2025 23:41:52 -0700"  >Additional Information from Submitter:&lt;br/&gt;
=================================&lt;br/&gt;
Thanks for looking at the bug. I see that it was unable to be reproduced.&lt;br/&gt;
&lt;br/&gt;
The issue I&amp;#39;m facing is running on Linux/AArch64, which was different to the tests listed in the bug comments. I have another person who was able to reproduce the issue on the same hardware (see &lt;a href=&quot;https://github.com/spring-projects/spring-boot/issues/44918)&quot;&gt;https://github.com/spring-projects/spring-boot/issues/44918)&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Is there a way that you can try to reproduce the issue using Linux on AArch64?</comment>
                            <comment id="14765264" author="alanb" created="Sun, 30 Mar 2025 23:36:15 -0700"  >Okay, I&amp;#39;ll resolve this as incomplete until there is more information to duplicate this.</comment>
                            <comment id="14765263" author="tongwan" created="Sun, 30 Mar 2025 23:22:58 -0700"  >Tried running the demo app on x64/Ubuntu and aarch64/MacOS but no NoClassDefFoundError was thrown.</comment>
                            <comment id="14765262" author="alanb" created="Sun, 30 Mar 2025 23:18:36 -0700"  >[~tongwan] Can you clarify your comments? The submitter seems to be getting ClassNotFoundException, did you duplicate this? Your comments suggest says &amp;quot;Passed, no NoClassDefFoundError&amp;quot;.</comment>
                            <comment id="14765251" author="tongwan" created="Sun, 30 Mar 2025 20:28:39 -0700"  >The observations on Ubuntu x64:&lt;br/&gt;
JDK 24.0.2ea+1: Passed, NoClassDefFoundError was not observed.  The demo app ran successfully.&lt;br/&gt;
MacOS aarch:&lt;br/&gt;
JDK 24.0.2ea+1: Passed.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5159670">JDK-8357820</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="5140283">JDK-8341194</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5154608">JDK-8353476</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5158522">JDK-8356856</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="4778062">JDK-8079203</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="114060" name="a.patch" size="2528" author="avoitylov" created="Thu, 3 Apr 2025 12:55:00 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3agdn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17436"><![CDATA[b24]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>