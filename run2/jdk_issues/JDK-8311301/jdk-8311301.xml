<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 08:53:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8311301] MethodExitTest may fail with stack buffer overrun</title>
                <link>https://bugs.openjdk.org/browse/JDK-8311301</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Spotted when running tier1 tests on Windows JVM build with clang.&lt;br/&gt;
MethodExitTest failed with:&lt;br/&gt;
----------System.out:(6/187)----------&lt;br/&gt;
Agent_OnLoad started&lt;br/&gt;
Agent_OnLoad finished&lt;br/&gt;
&lt;br/&gt;
ThreadStart: cthread: 000001E0573A5980, name: main&lt;br/&gt;
ThreadStart: GetThreadLocalStorage for carrier thread returned value 111 as expected&lt;br/&gt;
&lt;br/&gt;
----------System.err:(0/0)----------&lt;br/&gt;
...&lt;br/&gt;
test result: Failed. Unexpected exit from test [exit code: -1073740791]&lt;br/&gt;
&lt;br/&gt;
This exit code translates to STATUS_STACK_BUFFER_OVERRUN. No hs_err file is generated, but there&amp;#39;s an entry in Windows event log:&lt;br/&gt;
&lt;br/&gt;
Faulting application name: java.exe, version: 22.0.0.0, time stamp: 0x64a2ef1a&lt;br/&gt;
Faulting module name: MethodExitTest.dll, version: 0.0.0.0, time stamp: 0x64a31b75&lt;br/&gt;
Exception code: 0xc0000409&lt;br/&gt;
Fault offset: 0x00000000000039f5&lt;br/&gt;
&lt;br/&gt;
This, along with the test output, points to stack overrun in libMethodExitTest.cpp / ThreadStart.&lt;br/&gt;
&lt;br/&gt;
Looking at the method, it passes a variable loc_tls_data of type long to SetThreadLocalStorage, and then calls GetThreadLocalStorage to retrieve the stored value back to the same variable.&lt;br/&gt;
The problem here is that ThreadLocalStorage is a pointer, which is 8 bytes long on 64 bit architectures. Long on Windows can only store 4 bytes, so the call to GetThreadLocalStorage overwrites additional 4 bytes on stack. When the code is compiled by MS compiler, the overrun is ignored, but clang-compiled code detects the overrun and crashes the application.&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5104622">JDK-8311301</key>
            <summary>MethodExitTest may fail with stack buffer overrun</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djelinski">Daniel Jelinski</assignee>
                                    <reporter username="djelinski">Daniel Jelinski</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Tue, 4 Jul 2023 10:13:37 -0700</created>
                <updated>Thu, 19 Sep 2024 00:22:08 -0700</updated>
                            <resolved>Thu, 6 Jul 2023 01:53:27 -0700</resolved>
                                    <version>21</version>
                    <version>22</version>
                                    <fixVersion>22</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14706124" author="JIRAUSER20917" created="Wed, 18 Sep 2024 19:14:52 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.6-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test pass.  SAP nightly testing passed.&lt;br/&gt;
</comment>
                            <comment id="14705755" author="roboduke" created="Tue, 17 Sep 2024 23:54:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/984&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/984&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-18 06:48:15 +0000</comment>
                            <comment id="14594194" author="dukebot" created="Thu, 6 Jul 2023 01:53:26 -0700"  >Changeset: 3d813ae3&lt;br/&gt;
Author:    Daniel Jeli&#324;ski &amp;lt;&lt;a href=&apos;mailto:djelinski@openjdk.org&apos;&gt;djelinski@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2023-07-06 08:52:28 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/3d813ae39f4422dd47473608eb8911e2483c6c32&quot;&gt;https://git.openjdk.org/jdk/commit/3d813ae39f4422dd47473608eb8911e2483c6c32&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14593601" author="roboduke" created="Tue, 4 Jul 2023 12:54:27 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/14770&quot;&gt;https://git.openjdk.org/jdk/pull/14770&lt;/a&gt;&lt;br/&gt;
Date: 2023-07-04 17:33:02 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5136655">JDK-8338258</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5139419">JDK-8340430</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i325gb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="372"><![CDATA[jvmti]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>