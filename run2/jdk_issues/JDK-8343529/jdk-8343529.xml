<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:44:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8343529] serviceability/sa/ClhsdbWhere.java fails AssertionFailure: Corrupted constant pool</title>
                <link>https://bugs.openjdk.org/browse/JDK-8343529</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Error: sun.jvm.hotspot.utilities.AssertionFailure: Corrupted constant pool: 108 ConstantTag:1&lt;br/&gt;
sun.jvm.hotspot.utilities.AssertionFailure: Corrupted constant pool: 108 ConstantTag:1&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.utilities.Assert.that(Assert.java:32)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.ConstantPool.getNameAndTypeAt(ConstantPool.java:280)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.ConstantPool.getSignatureRefIndexAt(ConstantPool.java:391)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.ConstantPool.getSignatureRefAt(ConstantPool.java:300)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.doMethod(GenerateOopMap.java:1730)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.interp1(GenerateOopMap.java:1385)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.interpBB(GenerateOopMap.java:802)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.interpAll(GenerateOopMap.java:1108)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.doInterpretation(GenerateOopMap.java:981)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.computeMap(GenerateOopMap.java:2198)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.interpreter.OopMapForCacheEntry.computeMap(OopMapForCacheEntry.java:80)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.interpreter.OopMapCacheEntry.fill(OopMapCacheEntry.java:53)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.Method.getMaskFor(Method.java:265)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.runtime.InterpretedVFrame.getLocals(InterpretedVFrame.java:53)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.ui.classbrowser.HTMLGenerator.genHTMLForJavaStackTrace(HTMLGenerator.java:1936)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor$45.doit(CommandProcessor.java:1678)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor.executeCommand(CommandProcessor.java:2230)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor.executeCommand(CommandProcessor.java:2200)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor.run(CommandProcessor.java:2071)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CLHSDB.run(CLHSDB.java:112)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CLHSDB.main(CLHSDB.java:44)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.runCLHSDB(SALauncher.java:285)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.main(SALauncher.java:507)&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5143024">JDK-8343529</key>
            <summary>serviceability/sa/ClhsdbWhere.java fails AssertionFailure: Corrupted constant pool</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cjplummer">Chris Plummer</assignee>
                                    <reporter username="qmai">Quan Anh Mai</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                    </labels>
                <created>Mon, 4 Nov 2024 00:50:11 -0800</created>
                <updated>Thu, 27 Mar 2025 09:18:21 -0700</updated>
                            <resolved>Fri, 22 Nov 2024 09:30:00 -0800</resolved>
                                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14762654" author="roboduke" created="Thu, 20 Mar 2025 13:31:01 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3395&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3395&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-20 20:24:02 +0000</comment>
                            <comment id="14762649" author="goetz" created="Thu, 20 Mar 2025 13:22:11 -0700"  >Fix request [17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 17.0.16-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport from 21.&lt;br/&gt;
Tests pass. SAP nighlty testing passed.</comment>
                            <comment id="14761769" author="roboduke" created="Tue, 18 Mar 2025 07:01:16 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1519&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1519&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-18 13:55:28 +0000</comment>
                            <comment id="14761767" author="goetz" created="Tue, 18 Mar 2025 06:56:30 -0700"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.8-oracle,17.0.16-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Trivial resolve needed in 21.&lt;br/&gt;
Tests pass. SAP nightly testing passed.</comment>
                            <comment id="14725328" author="dukebot" created="Fri, 22 Nov 2024 09:29:59 -0800"  >Changeset: 21e0fb86&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Chris Plummer &amp;lt;&lt;a href=&apos;mailto:cjplummer@openjdk.org&apos;&gt;cjplummer@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-11-22 17:26:37 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/21e0fb8648d61f041a04d44ad6c46fc5efd86261&quot;&gt;https://git.openjdk.org/jdk/commit/21e0fb8648d61f041a04d44ad6c46fc5efd86261&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14722479" author="roboduke" created="Thu, 14 Nov 2024 14:21:58 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/22123&quot;&gt;https://git.openjdk.org/jdk/pull/22123&lt;/a&gt;&lt;br/&gt;
Date: 2024-11-14 22:15:29 +0000</comment>
                            <comment id="14721288" author="dholmes" created="Tue, 12 Nov 2024 15:09:01 -0800"  >Error: sun.jvm.hotspot.utilities.AssertionFailure: Corrupted constant pool: 50 ConstantTag:1&lt;br/&gt;
sun.jvm.hotspot.utilities.AssertionFailure: Corrupted constant pool: 50 ConstantTag:1&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.utilities.Assert.that(Assert.java:32)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.ConstantPool.getNameAndTypeAt(ConstantPool.java:280)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.ConstantPool.getSignatureRefIndexAt(ConstantPool.java:391)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.ConstantPool.getSignatureRefAt(ConstantPool.java:300)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.doMethod(GenerateOopMap.java:1730)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.interp1(GenerateOopMap.java:1385)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.interpBB(GenerateOopMap.java:802)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.interpAll(GenerateOopMap.java:1108)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.doInterpretation(GenerateOopMap.java:981)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.GenerateOopMap.computeMap(GenerateOopMap.java:2198)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.interpreter.OopMapForCacheEntry.computeMap(OopMapForCacheEntry.java:80)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.interpreter.OopMapCacheEntry.fill(OopMapCacheEntry.java:53)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.oops.Method.getMaskFor(Method.java:265)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.runtime.InterpretedVFrame.getLocals(InterpretedVFrame.java:53)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.ui.classbrowser.HTMLGenerator.genHTMLForJavaStackTrace(HTMLGenerator.java:1936)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor$45.doit(CommandProcessor.java:1678)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor.executeCommand(CommandProcessor.java:2230)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor.executeCommand(CommandProcessor.java:2200)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CommandProcessor.run(CommandProcessor.java:2071)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CLHSDB.run(CLHSDB.java:112)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.CLHSDB.main(CLHSDB.java:44)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.runCLHSDB(SALauncher.java:285)&lt;br/&gt;
	at jdk.hotspot.agent/sun.jvm.hotspot.SALauncher.main(SALauncher.java:507)</comment>
                            <comment id="14719385" author="cjplummer" created="Tue, 5 Nov 2024 17:24:53 -0800"  >I just explained in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8307318&quot; title=&quot;Test serviceability/sa/ClhsdbCDSJstackPrintAll.java failed: ArrayIndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8307318&quot;&gt;&lt;strike&gt;JDK-8307318&lt;/strike&gt;&lt;/a&gt; that I think the cause of this issue is the fact that one or more threads are still active in the target VM, and in this case it is causing the constant pool to be in some inconsistent state when SA looks at it. There&amp;#39;s no getting around this, so what is necessary is for the test to allow errors that might pop up as a result.&lt;br/&gt;
&lt;br/&gt;
I think in this test run it is the main thread that is running. In it LingeredApp.main(), and it wakes up every now and then to check if it is time to exit. If you look at the test output, which is suppose to dump all threads, you don&amp;#39;t even see main. I think the exception is happening while attempting to dump the stack trace of the main thread. Unfortunately the exception is printed to System.err and the rest of the stack trace output is printed to System.out, so I can&amp;#39;t really tell for sure when the exception occurred relative to the rest of the stack trace output. However, main is usually the first thread dumped, and you can see in the output it seems to have had a problem with it:&lt;br/&gt;
&lt;br/&gt;
hsdb&amp;gt; + where -a&lt;br/&gt;
Thread 1869206 Address: 0x0000ffff9402cf50&lt;br/&gt;
Thread 1869216 Address: 0x0000ffff9436e0a0&lt;br/&gt;
&lt;br/&gt;
Java Stack Trace for Reference Handler&lt;br/&gt;
Thread state = BLOCKED&lt;br/&gt;
&lt;br/&gt;
So for the first thread it tried to dump, it only printed the one line, then it printed a similar line for the Reference Handler, which it was then able to dump.</comment>
                            <comment id="14719375" author="cjplummer" created="Tue, 5 Nov 2024 16:21:52 -0800"  >The exception here is identical to what we see in &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8307318&quot; title=&quot;Test serviceability/sa/ClhsdbCDSJstackPrintAll.java failed: ArrayIndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8307318&quot;&gt;&lt;strike&gt;JDK-8307318&lt;/strike&gt;&lt;/a&gt;, except &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8307318&quot; title=&quot;Test serviceability/sa/ClhsdbCDSJstackPrintAll.java failed: ArrayIndexOutOfBoundsException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8307318&quot;&gt;&lt;strike&gt;JDK-8307318&lt;/strike&gt;&lt;/a&gt; also has a bunch of AIOOBEs first before finally producing the &amp;quot;Corrupted constant pool&amp;quot;. I&amp;#39;m not sure if they are the same bug or not.&lt;br/&gt;
&lt;br/&gt;
One thing I determined is that we are dealing with an invokedynamic instruction when this happens (see line 1385):&lt;br/&gt;
&lt;br/&gt;
1382:    case Bytecodes._invokevirtual:&lt;br/&gt;
1383:    case Bytecodes._invokespecial:     doMethod(false, false, itr.getIndexU2Cpcache(), itr.bci(), itr.code()); break;&lt;br/&gt;
1384:    case Bytecodes._invokestatic:      doMethod(true,  false, itr.getIndexU2Cpcache(), itr.bci(), itr.code()); break;&lt;br/&gt;
1385:    case Bytecodes._invokedynamic:     doMethod(true,  false, itr.getIndexU4(),        itr.bci(), itr.code()); break;&lt;br/&gt;
1386:    case Bytecodes._invokeinterface:   doMethod(false,  true, itr.getIndexU2Cpcache(), itr.bci(), itr.code()); break;&lt;br/&gt;
&lt;br/&gt;
Calling doMethod() eventually leads to fetching a NameAndType constant pool entry. However, the entry it expects to be a NameAndType has a ConstantTag of 1, which is a Utf8 constant. It&amp;#39;s unclear where the invokedynamic handling has gone wrong.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5153138">JDK-8352211</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153142">JDK-8352215</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153545">JDK-8352525</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5154178">JDK-8353091</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5099975">JDK-8307318</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38krn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="2072"><![CDATA[svc-agent]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>