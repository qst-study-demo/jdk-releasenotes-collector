<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:47:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8337951] Test sun/security/validator/samedn.sh CertificateNotYetValidException: NotBefore validation</title>
                <link>https://bugs.openjdk.org/browse/JDK-8337951</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test failed in the JDK24 CI:&lt;br/&gt;
&lt;br/&gt;
sun/security/validator/samedn.sh&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
#-----testresult-----&lt;br/&gt;
description=file\:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-24+10-1044/src.full/open/test/jdk/sun/security/validator/samedn.sh&lt;br/&gt;
elapsed=2664 0\:00\:02.664&lt;br/&gt;
end=Tue Aug 06 14\:41\:12 GMT 2024&lt;br/&gt;
environment=regtest&lt;br/&gt;
execStatus=Failed. Execution failed\: exit code 1&lt;br/&gt;
harnessLoaderMode=Classpath Loader&lt;br/&gt;
harnessVariety=Full Bundle&lt;br/&gt;
hostname=jpg-mac-arm-730.oraclecorp.com&lt;br/&gt;
javatestOS=Mac OS X 14.4.1 (aarch64)&lt;br/&gt;
javatestVersion=6.0-ea+b24-2022-09-27-9149bb7&lt;br/&gt;
jtregVersion=jtreg 7.4 1&lt;br/&gt;
modules=java.base/sun.security.validator&lt;br/&gt;
script=com.sun.javatest.regtest.exec.RegressionScript&lt;br/&gt;
sections=script_messages shell&lt;br/&gt;
start=Tue Aug 06 14\:41\:09 GMT 2024&lt;br/&gt;
test=sun/security/validator/samedn.sh&lt;br/&gt;
testJDK=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-24+10-1044/macosx-aarch64.jdk/jdk-24.jdk/Contents/Home&lt;br/&gt;
testJDK_OS=[name\:Mac OS X,arch\:aarch64,version\:14.4.1,family\:mac,simple_arch\:aarch64,simple_version\:14.4,processors\:8,maxMemory\:17179869184,maxSwap\:2147483648]&lt;br/&gt;
testJDK_os.arch=aarch64&lt;br/&gt;
testJDK_os.name=Mac OS X&lt;br/&gt;
testJDK_os.version=14.4.1&lt;br/&gt;
totalTime=2665&lt;br/&gt;
user.name=mach5-one&lt;br/&gt;
work=/System/Volumes/Data/mesos/work_dir/slaves/a4a7850a-7c35-410a-b879-d77fbb2f6087-S165353/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/0d16d676-f7c0-42cb-a59a-49cf2dbea917/runs/726fe1e8-d1cc-4bc3-91ec-ffcff41a00d2/testoutput/test-support/jtreg_open_test_jdk_tier2_part1/sun/security/validator&lt;br/&gt;
&lt;br/&gt;
#section:script_messages&lt;br/&gt;
----------messages:(4/293)----------&lt;br/&gt;
JDK under test: /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-24+10-1044/macosx-aarch64.jdk/jdk-24.jdk/Contents/Home&lt;br/&gt;
java version &amp;quot;24-ea&amp;quot; 2025-03-18&lt;br/&gt;
Java(TM) SE Runtime Environment (build 24-ea+10-1044)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24-ea+10-1044, mixed mode, sharing)&lt;br/&gt;
&lt;br/&gt;
#section:shell&lt;br/&gt;
----------messages:(5/196)----------&lt;br/&gt;
command: shell samedn.sh&lt;br/&gt;
reason: Assumed action based on file name: run shell samedn.sh &lt;br/&gt;
started: Tue Aug 06 14:41:09 GMT 2024&lt;br/&gt;
finished: Tue Aug 06 14:41:12 GMT 2024&lt;br/&gt;
elapsed time (seconds): 2.663&lt;br/&gt;
----------System.out:(1/8)----------&lt;br/&gt;
Chain: &lt;br/&gt;
----------System.err:(53/3449)----------&lt;br/&gt;
Generating 3,072 bit RSA key pair and self-signed certificate (MD5withRSA) with a validity of 90 days&lt;br/&gt;
	for: CN=CA&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The -keyalg option is specified multiple times. All except the last one will be ignored.&lt;br/&gt;
The generated certificate uses the MD5withRSA signature algorithm which is considered a security risk and is disabled.&lt;br/&gt;
Generating 3,072 bit RSA key pair and self-signed certificate (SHA1withRSA) with a validity of 90 days&lt;br/&gt;
	for: CN=CA&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The -keyalg option is specified multiple times. All except the last one will be ignored.&lt;br/&gt;
The generated certificate uses the SHA1withRSA signature algorithm which is considered a security risk.&lt;br/&gt;
Generating 3,072 bit RSA key pair and self-signed certificate (SHA384withRSA) with a validity of 90 days&lt;br/&gt;
	for: CN=User&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The -keyalg option is specified multiple times. All except the last one will be ignored.&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The issuer uses the MD5withRSA signature algorithm which is considered a security risk and is disabled.&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The issuer uses the SHA1withRSA signature algorithm which is considered a security risk.&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The certificate uses the MD5withRSA signature algorithm which is considered a security risk and is disabled.&lt;br/&gt;
&lt;br/&gt;
Warning:&lt;br/&gt;
The certificate uses the SHA1withRSA signature algorithm which is considered a security risk.&lt;br/&gt;
Note: /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-24+10-1044/src.full/open/test/jdk/sun/security/validator/CertReplace.java uses unchecked or unsafe operations.&lt;br/&gt;
Note: Recompile with -Xlint:unchecked for details.&lt;br/&gt;
Exception in thread &amp;quot;main&amp;quot; sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed&lt;br/&gt;
	at java.base/sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:318)&lt;br/&gt;
	at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:256)&lt;br/&gt;
	at java.base/sun.security.validator.Validator.validate(Validator.java:256)&lt;br/&gt;
	at java.base/sun.security.validator.Validator.validate(Validator.java:223)&lt;br/&gt;
	at java.base/sun.security.validator.Validator.validate(Validator.java:199)&lt;br/&gt;
	at CertReplace.main(CertReplace.java:51)&lt;br/&gt;
Caused by: java.security.cert.CertPathValidatorException: validity check failed&lt;br/&gt;
	at java.base/sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:135)&lt;br/&gt;
	at java.base/sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:224)&lt;br/&gt;
	at java.base/sun.security.provider.certpath.PKIXCertPathValidator.validate(PKIXCertPathValidator.java:144)&lt;br/&gt;
	at java.base/sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:83)&lt;br/&gt;
	at java.base/java.security.cert.CertPathValidator.validate(CertPathValidator.java:309)&lt;br/&gt;
	at java.base/sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:313)&lt;br/&gt;
	... 5 more&lt;br/&gt;
Caused by: java.security.cert.CertificateNotYetValidException: NotBefore: Tue Aug 06 14:41:13 GMT 2024&lt;br/&gt;
	at java.base/sun.security.x509.CertificateValidity.valid(CertificateValidity.java:178)&lt;br/&gt;
	at java.base/sun.security.x509.X509CertImpl.checkValidity(X509CertImpl.java:534)&lt;br/&gt;
	at java.base/sun.security.provider.certpath.BasicChecker.verifyValidity(BasicChecker.java:190)&lt;br/&gt;
	at java.base/sun.security.provider.certpath.BasicChecker.check(BasicChecker.java:144)&lt;br/&gt;
	at java.base/sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:125)&lt;br/&gt;
	... 10 more&lt;br/&gt;
----------rerun:(30/3918)*----------</description>
                <environment></environment>
        <key id="5136267">JDK-8337951</key>
            <summary>Test sun/security/validator/samedn.sh CertificateNotYetValidException: NotBefore validation</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fguallini">Fernando Guallini</assignee>
                                    <reporter username="dcubed">Daniel Daugherty</reporter>
                        <labels>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>tier2</label>
                    </labels>
                <created>Tue, 6 Aug 2024 10:32:39 -0700</created>
                <updated>Fri, 6 Dec 2024 12:09:03 -0800</updated>
                            <resolved>Thu, 5 Sep 2024 06:16:45 -0700</resolved>
                                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>security-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14728407" author="roboduke" created="Wed, 4 Dec 2024 06:55:46 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3099&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3099&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-04 14:48:10 +0000</comment>
                            <comment id="14728406" author="roboduke" created="Wed, 4 Dec 2024 06:55:30 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1204&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1204&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-04 14:48:01 +0000</comment>
                            <comment id="14728402" author="goetz" created="Wed, 4 Dec 2024 06:46:40 -0800"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.7-oracle,17.0.15-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.&lt;br/&gt;
</comment>
                            <comment id="14703043" author="dukebot" created="Thu, 5 Sep 2024 06:16:44 -0700"  >Changeset: a505a1dd&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Fernando Guallini &amp;lt;&lt;a href=&apos;mailto:fguallini@openjdk.org&apos;&gt;fguallini@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Committer: Sean Mullan &amp;lt;&lt;a href=&apos;mailto:mullan@openjdk.org&apos;&gt;mullan@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-09-05 13:14:00 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a505a1dda3bc6975bb11f390543b38618ddf2626&quot;&gt;https://git.openjdk.org/jdk/commit/a505a1dda3bc6975bb11f390543b38618ddf2626&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14701168" author="roboduke" created="Wed, 28 Aug 2024 01:29:52 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20728&quot;&gt;https://git.openjdk.org/jdk/pull/20728&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-27 14:49:40 +0000</comment>
                            <comment id="14700248" author="fguallini" created="Fri, 23 Aug 2024 02:28:06 -0700"  >I was unable to reproduce the failure, but here&#8217;s my analysis of what might have happened:&lt;br/&gt;
&lt;br/&gt;
Based on the log, the test finished at 14:41:12, while the certificate&amp;#39;s notBefore time is set to 14:41:13. It&amp;#39;s possible that when the certificate was created, the keytool rounded up the notBefore time to the nearest second. As a result, the test may have validated the certificate just before it became valid. Although this seems like a rare scenario, it could theoretically happen again.&lt;br/&gt;
&lt;br/&gt;
As Sean mentioned, a simple solution would be to set the notBefore to a time in the past, such as the current time minus a certain threshold (1 minute/hour should be sufficient).</comment>
                            <comment id="14696389" author="mullan" created="Tue, 6 Aug 2024 12:14:03 -0700"  >I cannot reproduce the issue locally. From the stack trace it appears to be an issue where the cert that keytool has created has a notBefore date after the time that the test uses to validates it. It doesn&amp;#39;t seem possible because the test runs after the cert is created, but maybe there is some intermittent OS (?) issue when the times are this close. A potential workaround is to create the cert with a notBefore one day prior to the current day.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5143761">JDK-8344121</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143766">JDK-8344125</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143767">JDK-8344126</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143820">JDK-8344167</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145635">JDK-8345708</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5145649">JDK-8345722</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17010"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37gxf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17352"><![CDATA[b15]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="195"><![CDATA[java.security]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>