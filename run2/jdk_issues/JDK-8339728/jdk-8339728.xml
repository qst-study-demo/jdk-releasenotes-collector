<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:50:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8339728] [Accessibility,Windows,JAWS] Bug in the getKeyChar method of the AccessBridge class</title>
                <link>https://bugs.openjdk.org/browse/JDK-8339728</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>Note: This bug occurs with e.g. Java VM 17 and 21 running on Windows, it does not occur on macOS.&lt;br/&gt;
&lt;br/&gt;
Issue: If a JMenuItem contains a shortcut like &#8220;Ctrl + Comma&#8221;, the private method getKeyChar of the AccessBridge class cuts the &#8220;Comma&#8221; text to the first character and hence transfers &#8220;C&#8221; (instead of &#8220;Comma&#8221;) via the AccessBridge API. For a shortcut &#8220;Ctrl + Comma&#8221; in a menu item, screen readers announce &#8220;Ctrl + C&#8221; instead of &#8220;Ctrl + Comma&#8221; as shortcut, and the user may use a wrong shortcut for this menu action.&lt;br/&gt;
&lt;br/&gt;
For a shortcut like &#8220;Ctrl + Period&#8221; this method cuts the &#8220;Period&#8221; to &#8220;P&#8221;, the AccessBridge API sends &#8220;P&#8221; as char and hence a screen reader announces &#8220;Ctrl + P&#8221; as shortcut.&lt;br/&gt;
For a shortcut like &#8220;Ctrl + Enter&#8221; this method cuts the &#8220;Enter&#8221; to &#8220;E&#8221;, the AccessBridge API sends &#8220;E&#8221; as char and hence a screen reader announces &#8220;Ctrl + E&#8221; as shortcut.&lt;br/&gt;
&lt;br/&gt;
You can use the simple class Test_JMenuItem_KeyStrokes below for testing the java application on Windows with a screen reader, or with the jaccessinspector.&lt;br/&gt;
&lt;br/&gt;
Following code in the method getKeyChar of the AccessBridge (starting with line 3970) is the cause for this issue:&lt;br/&gt;
&lt;br/&gt;
String keyText = KeyEvent.getKeyText(keyStroke.getKeyCode());&lt;br/&gt;
debugString(&amp;quot;[INFO]:   Shortcut is: &amp;quot; + keyText);&lt;br/&gt;
if (keyText != null || keyText.length() &amp;gt; 0) {&lt;br/&gt;
CharSequence seq = keyText.subSequence(0, 1);&lt;br/&gt;
if (seq != null || seq.length() &amp;gt; 0) {&lt;br/&gt;
return seq.charAt(0);&lt;br/&gt;
}&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
When keyText is for example &#8220;Comma&#8221;, seq.charAt(0) = C, and then method will return &#8220;C&#8221; instead of Comma.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
public class Test_JMenuItem_KeyStrokes&lt;br/&gt;
{&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JMenuBar menuBar = new JMenuBar();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JMenu menu = new JMenu(&amp;quot;Menu with Keystrokes&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menu.setMnemonic(KeyEvent.VK_M);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menuBar.add(menu);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;KeyStroke keyStroke1 = KeyStroke.getKeyStroke(KeyEvent.VK_COMMA, InputEvent.CTRL_DOWN_MASK);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;KeyStroke keyStroke2 = KeyStroke.getKeyStroke(KeyEvent.VK_COMMA, InputEvent.CTRL_DOWN_MASK | InputEvent.SHIFT_DOWN_MASK);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;KeyStroke keyStroke3 = KeyStroke.getKeyStroke(KeyEvent.VK_COMMA, InputEvent.CTRL_DOWN_MASK | InputEvent.ALT_DOWN_MASK);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;KeyStroke keyStroke4 = KeyStroke.getKeyStroke(KeyEvent.VK_PERIOD, InputEvent.CTRL_DOWN_MASK);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;KeyStroke keyStroke5 = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, InputEvent.CTRL_DOWN_MASK | InputEvent.SHIFT_DOWN_MASK);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JCheckBoxMenuItem menuItem1 = new JCheckBoxMenuItem(&amp;quot;First Menu Item&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menuItem1.setAccelerator(keyStroke1);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JCheckBoxMenuItem menuItem2 = new JCheckBoxMenuItem(&amp;quot;Second Menu Item&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menuItem2.setAccelerator(keyStroke2);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JCheckBoxMenuItem menuItem3 = new JCheckBoxMenuItem(&amp;quot;Third Menu Item&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menuItem3.setAccelerator(keyStroke3);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JCheckBoxMenuItem menuItem4 = new JCheckBoxMenuItem(&amp;quot;Fourth Menu Item&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menuItem4.setAccelerator(keyStroke4);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JCheckBoxMenuItem menuItem5 = new JCheckBoxMenuItem(&amp;quot;Fifth Menu Item&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menuItem5.setAccelerator(keyStroke5);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menu.add(menuItem1);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menu.add(menuItem2);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menu.add(menuItem3);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menu.add(menuItem4);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;menu.add(menuItem5);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JFrame frame = new JFrame(&amp;quot;A Frame with Menu&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.add(new JCheckBox(&amp;quot;A checkbox&amp;quot;));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.setJMenuBar(menuBar);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.setSize(300, 200);  &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;frame.setVisible(true);       &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5138637">JDK-8339728</key>
            <summary>[Accessibility,Windows,JAWS] Bug in the getKeyChar method of the AccessBridge class</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abhiscxk">Abhishek Kumar</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>CPU25_04-critical-SQE-OK</label>
                            <label>CPU25_04-critical-approved</label>
                            <label>a11y</label>
                            <label>accessibility</label>
                            <label>bugdb_37375318</label>
                            <label>cpu24_01</label>
                            <label>hgupdate-sync</label>
                            <label>jaws</label>
                            <label>jdk11u-fix-request</label>
                            <label>jdk11u-fix-yes</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>sn_185</label>
                            <label>vpat</label>
                            <label>vpat-11u</label>
                            <label>vpat-17u</label>
                            <label>vpat-21u</label>
                            <label>vpat-8u</label>
                            <label>vpat_testing_25_01</label>
                    </labels>
                <created>Sun, 8 Sep 2024 23:38:56 -0700</created>
                <updated>Tue, 18 Mar 2025 05:00:22 -0700</updated>
                            <resolved>Wed, 8 Jan 2025 20:16:25 -0800</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>23</version>
                    <version>24</version>
                                    <fixVersion>25</fixVersion>
                                    <component>client-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14761683" author="roboduke" created="Tue, 18 Mar 2025 03:04:27 -0700"  >[jdk11u-fix-request] Approval Request from Antonio Vieiro&lt;br/&gt;
Please approve this backport from JDK-17 that fixes an accessibility problem in Windows, where JMenuItem shortcuts were not properly read out. Low risk. Verified in Windows 10 with JAWS.</comment>
                            <comment id="14755737" author="roboduke" created="Mon, 24 Feb 2025 01:56:37 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/3001&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/3001&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-24 09:51:09 +0000</comment>
                            <comment id="14755600" author="roboduke" created="Sat, 22 Feb 2025 02:31:31 -0800"  >[jdk17u-fix-request] Approval Request from Antonio Vieiro&lt;br/&gt;
Please approve this backport to JDK-17 that fixes an accessibility problem in Windows, where JMenuItem shortcuts were not properly read out. Low risk. Verified in Windows 10 with JAWS.</comment>
                            <comment id="14755598" author="roboduke" created="Sat, 22 Feb 2025 02:10:46 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3291&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3291&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-22 10:05:33 +0000</comment>
                            <comment id="14754865" author="roboduke" created="Wed, 19 Feb 2025 06:20:28 -0800"  >[jdk21u-fix-request] Approval Request from Antonio Vieiro&lt;br/&gt;
Please approve this backport to JDK-21 that fixes an accessibility problem in Windows, where JMenuItem shortcuts were not properly read out. Low risk. Verified in Windows 10 with JAWS.</comment>
                            <comment id="14754794" author="roboduke" created="Wed, 19 Feb 2025 03:12:37 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1414&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1414&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-19 11:06:53 +0000</comment>
                            <comment id="14737678" author="roboduke" created="Sun, 12 Jan 2025 23:25:23 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: jdk24&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/23061&quot;&gt;https://git.openjdk.org/jdk/pull/23061&lt;/a&gt;&lt;br/&gt;
Date: 2025-01-13 07:20:18 +0000</comment>
                            <comment id="14736880" author="dukebot" created="Wed, 8 Jan 2025 20:16:24 -0800"  >Changeset: a46ae703&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Abhishek Kumar &amp;lt;&lt;a href=&apos;mailto:abhiscxk@openjdk.org&apos;&gt;abhiscxk@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2025-01-09 04:11:54 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a46ae7031e30eb4940e43012a42f1b7fa5d942ef&quot;&gt;https://git.openjdk.org/jdk/commit/a46ae7031e30eb4940e43012a42f1b7fa5d942ef&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14733436" author="roboduke" created="Wed, 18 Dec 2024 21:24:13 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/22822&quot;&gt;https://git.openjdk.org/jdk/pull/22822&lt;/a&gt;&lt;br/&gt;
Date: 2024-12-19 05:17:07 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5147903">JDK-8347601</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5148943">JDK-8348497</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5149505">JDK-8349010</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5149506">JDK-8349011</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5149507">JDK-8349012</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5151174">JDK-8350505</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5151230">JDK-8350558</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153187">JDK-8352259</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150058">JDK-8349517</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150059">JDK-8349518</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150060">JDK-8349519</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5150061">JDK-8349520</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5150690">JDK-8350064</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17005"><![CDATA[windows]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37u9n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17334"><![CDATA[b06]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="367"><![CDATA[javax.accessibility]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>