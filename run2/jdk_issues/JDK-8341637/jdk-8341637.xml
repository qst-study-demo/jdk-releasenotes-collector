<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:42:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8341637] java/net/Socket/UdpSocket.java fails with &quot;java.net.BindException: Address already in use&quot; (macos-aarch64)</title>
                <link>https://bugs.openjdk.org/browse/JDK-8341637</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>The following test fails in the JDK 24 CI on macos-aarch64:&lt;br/&gt;
&lt;br/&gt;
java/net/Socket/UdpSocket.java&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a snippet from the log file:&lt;br/&gt;
&lt;br/&gt;
----------System.out:(50/2978)----------&lt;br/&gt;
BindException caught retry Socket creation&lt;br/&gt;
test UdpSocket.testMaxSockets(): failure&lt;br/&gt;
java.net.BindException: Address already in use&lt;br/&gt;
	at java.base/sun.nio.ch.Net.connect0(Native Method)&lt;br/&gt;
	at java.base/sun.nio.ch.Net.connect(Net.java:589)&lt;br/&gt;
	at java.base/sun.nio.ch.Net.connect(Net.java:578)&lt;br/&gt;
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)&lt;br/&gt;
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)&lt;br/&gt;
	at java.base/java.net.Socket.connect(Socket.java:759)&lt;br/&gt;
	at java.base/java.net.Socket.connect(Socket.java:693)&lt;br/&gt;
	at java.base/java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:561)&lt;br/&gt;
	at java.base/java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:534)&lt;br/&gt;
	at UdpSocket.newUdpSocket(UdpSocket.java:143)&lt;br/&gt;
	at UdpSocket.testMaxSockets(UdpSocket.java:102)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:573)&lt;br/&gt;
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)&lt;br/&gt;
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)&lt;br/&gt;
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)&lt;br/&gt;
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)&lt;br/&gt;
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)&lt;br/&gt;
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)&lt;br/&gt;
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)&lt;br/&gt;
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)&lt;br/&gt;
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)&lt;br/&gt;
	at org.testng.TestRunner.privateRun(TestRunner.java:764)&lt;br/&gt;
	at org.testng.TestRunner.run(TestRunner.java:585)&lt;br/&gt;
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)&lt;br/&gt;
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)&lt;br/&gt;
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)&lt;br/&gt;
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)&lt;br/&gt;
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)&lt;br/&gt;
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)&lt;br/&gt;
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)&lt;br/&gt;
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)&lt;br/&gt;
	at org.testng.TestNG.runSuites(TestNG.java:1069)&lt;br/&gt;
	at org.testng.TestNG.run(TestNG.java:1037)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:102)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:58)&lt;br/&gt;
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)&lt;br/&gt;
	at java.base/java.lang.reflect.Method.invoke(Method.java:573)&lt;br/&gt;
	at com.sun.javatest.regtest.agent.MainWrapper$MainTask.run(MainWrapper.java:138)&lt;br/&gt;
	at java.base/java.lang.Thread.run(Thread.java:1576)&lt;br/&gt;
test UdpSocket.testSendReceive(): success&lt;br/&gt;
&lt;br/&gt;
===============================================&lt;br/&gt;
java/net/Socket/UdpSocket.java&lt;br/&gt;
Total tests run: 2, Passes: 1, Failures: 1, Skips: 0&lt;br/&gt;
===============================================&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5140854">JDK-8341637</key>
            <summary>java/net/Socket/UdpSocket.java fails with &quot;java.net.BindException: Address already in use&quot; (macos-aarch64)</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dfuchs">Daniel Fuchs</assignee>
                                    <reporter username="dfuchs">Daniel Fuchs</reporter>
                        <labels>
                            <label>intermittent</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>sust-test-stabilization</label>
                            <label>tier2</label>
                    </labels>
                <created>Mon, 7 Oct 2024 05:43:10 -0700</created>
                <updated>Wed, 19 Mar 2025 00:10:42 -0700</updated>
                            <resolved>Mon, 14 Oct 2024 05:33:10 -0700</resolved>
                                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>core-libs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14761166" author="roboduke" created="Sat, 15 Mar 2025 13:38:30 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1500&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1500&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-15 20:32:50 +0000</comment>
                            <comment id="14761165" author="roboduke" created="Sat, 15 Mar 2025 13:38:00 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3359&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3359&lt;/a&gt;&lt;br/&gt;
Date: 2025-03-15 20:32:59 +0000</comment>
                            <comment id="14761164" author="goetz" created="Sat, 15 Mar 2025 13:31:30 -0700"  >Fix request [21u,17u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.8-oracle,17.0.16-oracle.&lt;br/&gt;
No risk, only a test change.&lt;br/&gt;
Clean backport.&lt;br/&gt;
Test passes. SAP nightly testing passed.</comment>
                            <comment id="14712650" author="msheppar" created="Mon, 14 Oct 2024 07:02:33 -0700"  >As observed in the original issue &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8265362&quot;&gt;https://bugs.openjdk.org/browse/JDK-8265362&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
the ephemeral port is allocated twice once to a udp4 socket  and to a udp46 socket (as in the test)&lt;br/&gt;
Thus when the connect from the test socket is invoked internally, an EADDRINUSE is returned == BindException&lt;br/&gt;
&lt;br/&gt;
for the observed failure case has two potential candidate port one for syslogd and the other for mDNSResponder&lt;br/&gt;
&lt;br/&gt;
While the Socket(String host, int port, boolean stream) is deprecated functionality. The failure alludes to an issue on macOS which may arise intermittently for the connect method on UDP sockets (Datagram{Socket | Channel}, when the OS allocates the same port twice to different AF, but overlapping, domains.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                            <comment id="14712621" author="dukebot" created="Mon, 14 Oct 2024 05:33:09 -0700"  >Changeset: ba3774dc&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Daniel Fuchs &amp;lt;&lt;a href=&apos;mailto:dfuchs@openjdk.org&apos;&gt;dfuchs@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-10-14 12:29:06 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/ba3774dc5d27e762dfd61f8acf842ae11dec0cb7&quot;&gt;https://git.openjdk.org/jdk/commit/ba3774dc5d27e762dfd61f8acf842ae11dec0cb7&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14710902" author="roboduke" created="Mon, 7 Oct 2024 06:20:45 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/21388&quot;&gt;https://git.openjdk.org/jdk/pull/21388&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-07 13:13:44 +0000</comment>
                            <comment id="14710888" author="dfuchs" created="Mon, 7 Oct 2024 05:47:59 -0700"  >&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8265362&quot; title=&quot;java/net/Socket/UdpSocket.java fails with &amp;quot;java.net.BindException: Address already in use&amp;quot; (macos-aarch64)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8265362&quot;&gt;&lt;strike&gt;JDK-8265362&lt;/strike&gt;&lt;/a&gt; added a retry-once policy. Maybe we should retry more than once.</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5152876">JDK-8351984</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5152877">JDK-8351985</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153155">JDK-8352227</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5153159">JDK-8352231</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5047101">JDK-8265362</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="19300"><![CDATA[aarch64]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17017"><![CDATA[os_x]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i387ir:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17351"><![CDATA[b20]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="193"><![CDATA[java.net]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>