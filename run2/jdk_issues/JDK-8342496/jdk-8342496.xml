<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:26:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8342496] C2/Shenandoah: SEGV in compiled code when running jcstress</title>
                <link>https://bugs.openjdk.org/browse/JDK-8342496</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>$ JAVA_TOOL_OPTIONS=&amp;quot;-XX:+UnlockDiagnosticVMOptions -XX:+UnlockExperimentalVMOptions -XX:+UseShenandoahGC -XX:StressSeed=2039903058&amp;quot; java -jar ./jcstress.jar -c 2 -t org.openjdk.jcstress.tests.copy.manual.objects.plain.StringTest&lt;br/&gt;
...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;VM output stream:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#  SIGSEGV (0xb) at pc=0x00007fa668d00ab0, pid=3266827, tid=3267280&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# JRE version: OpenJDK Runtime Environment (17.0.14) (build 17.0.14-internal+0-adhoc.roland.jdk17u-dev)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# Java VM: OpenJDK 64-Bit Server VM (17.0.14-internal+0-adhoc.roland.jdk17u-dev, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, shenandoah gc, linux-amd64)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# Problematic frame:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# J 385 c2 org.openjdk.jcstress.tests.copy.manual.objects.plain.StringTest_jcstress$JcstressThread_ResourceCheck_actor2.jcstress_check_actor2([Lorg/openjdk/jcstress/tests/copy/manual/objects/plain/StringTest;[Lorg/openjdk/jcstress/infra/results/L_Result;I)V (27 bytes) \&lt;br/&gt;
@ 0x00007fa668d00ab0 [0x00007fa668d009a0+0x0000000000000110]&lt;br/&gt;
&lt;br/&gt;
We&amp;#39;ve only seen this with jdk 17 but I wrote a test case and could reproduce it with jdk 24. &lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
        <key id="5141833">JDK-8342496</key>
            <summary>C2/Shenandoah: SEGV in compiled code when running jcstress</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roland">Roland Westrelin</assignee>
                                    <reporter username="roland">Roland Westrelin</reporter>
                        <labels>
                            <label>amazon-interest</label>
                            <label>c2</label>
                            <label>gc-shenandoah</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-SQE-ok</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk23u-fix-yes</label>
                            <label>oracle-triage-24</label>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Thu, 17 Oct 2024 01:49:36 -0700</created>
                <updated>Fri, 14 Feb 2025 05:30:22 -0800</updated>
                            <resolved>Mon, 21 Oct 2024 00:41:20 -0700</resolved>
                                    <version>8</version>
                    <version>11</version>
                    <version>17</version>
                    <version>21</version>
                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14753751" author="roboduke" created="Fri, 14 Feb 2025 05:30:22 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk11u-dev/pull/2995&quot;&gt;https://git.openjdk.org/jdk11u-dev/pull/2995&lt;/a&gt;&lt;br/&gt;
Date: 2025-02-14 13:24:35 +0000</comment>
                            <comment id="14716740" author="roboduke" created="Fri, 25 Oct 2024 10:11:18 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/3006&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/3006&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-25 08:57:33 +0000</comment>
                            <comment id="14716633" author="roboduke" created="Fri, 25 Oct 2024 00:55:02 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1088&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1088&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-24 08:57:44 +0000</comment>
                            <comment id="14716631" author="roland" created="Fri, 25 Oct 2024 00:52:17 -0700"  >Fix request (21u, 17u):&lt;br/&gt;
I&amp;#39;d like to backport this to 21u and 17u. It only affects shenandoah but it can cause field loads to happen before their null check in C2 compiled code and so VM crashes. Fix applies cleanly. I ran hotspot/compiler with +UseShenandoahGC and hotspot/gc/shenandoah tests. Fix is in shenandoah specific code so can only affect shenandoah. It has the typical risk for a c2 change. </comment>
                            <comment id="14716347" author="roland" created="Thu, 24 Oct 2024 01:01:37 -0700"  >Fix request (23u):&lt;br/&gt;
I&amp;#39;d like to backport this to 23u. It only affects shenandoah but it can cause field loads to happen before their null check in C2 compiled code and so VM crashes. Fix applies cleanly. I ran hotspot/compiler with +UseShenandoahGC and hotspot/gc tests. Fix is in shenandoah specific code so can only affect shenandoah. It has the typical risk for a c2 change.</comment>
                            <comment id="14716344" author="roboduke" created="Thu, 24 Oct 2024 00:49:49 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/204&quot;&gt;https://git.openjdk.org/jdk23u/pull/204&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-23 11:38:17 +0000</comment>
                            <comment id="14715185" author="dukebot" created="Mon, 21 Oct 2024 00:41:19 -0700"  >Changeset: 680dc5d8&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Roland Westrelin &amp;lt;&lt;a href=&apos;mailto:roland@openjdk.org&apos;&gt;roland@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-10-21 07:38:39 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/680dc5d896f4f7b01b3cf800d548e32bb2ef8c81&quot;&gt;https://git.openjdk.org/jdk/commit/680dc5d896f4f7b01b3cf800d548e32bb2ef8c81&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14714495" author="roboduke" created="Thu, 17 Oct 2024 06:17:39 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/21562&quot;&gt;https://git.openjdk.org/jdk/pull/21562&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-17 13:12:11 +0000</comment>
                            <comment id="14714461" author="chagedorn" created="Thu, 17 Oct 2024 04:52:54 -0700"  >Thanks Roland for the clarification!</comment>
                            <comment id="14714450" author="roland" created="Thu, 17 Oct 2024 04:29:34 -0700"  >[~chagedorn] shenandoah specific</comment>
                            <comment id="14714449" author="chagedorn" created="Thu, 17 Oct 2024 04:28:27 -0700"  >[~roland] is this Shenandoah specific or can it also be (potentially) triggered with other GCs?</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5142490">JDK-8343081</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143036">JDK-8343538</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5143037">JDK-8343539</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5142048">JDK-8342681</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38dij:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17412"><![CDATA[b21]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="208"><![CDATA[compiler]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>