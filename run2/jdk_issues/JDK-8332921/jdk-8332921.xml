<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 10:25:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8332921] Ctrl+C does not call shutdown hooks after JLine upgrade</title>
                <link>https://bugs.openjdk.org/browse/JDK-8332921</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8327476&quot; title=&quot;Upgrade JLine to 3.26.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8327476&quot;&gt;&lt;strike&gt;JDK-8327476&lt;/strike&gt;&lt;/a&gt; broke handling of Ctrl+C. New version of JLine modifies SIGINT handler and therefore breaks normal processing of Ctrl+C.&lt;br/&gt;
&lt;br/&gt;
To provoke the issue, it&amp;#39;s enough to call System.console().&lt;br/&gt;
&lt;br/&gt;
I attached SigIntTest.java that demonstrates the problem.&lt;br/&gt;
Before commit 0a4eeeaa, the program printed &amp;quot;Shutdown hook called&amp;quot;.&lt;br/&gt;
Now, it immediately terminates upon pressing Ctrl+C or sending kill -2 to the process.</description>
                <environment></environment>
        <key id="5130304">JDK-8332921</key>
            <summary>Ctrl+C does not call shutdown hooks after JLine upgrade</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://bugs.openjdk.org/images/jbsImages/p3.png">P3</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jlahoda">Jan Lahoda</assignee>
                                    <reporter username="apangin">Andrei Pangin</reporter>
                        <labels>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                    </labels>
                <created>Fri, 24 May 2024 18:57:43 -0700</created>
                <updated>Fri, 16 May 2025 01:13:07 -0700</updated>
                            <resolved>Wed, 5 Jun 2024 21:46:23 -0700</resolved>
                                    <version>23</version>
                                    <fixVersion>23</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14780241" author="roboduke" created="Thu, 15 May 2025 00:18:26 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1779&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1779&lt;/a&gt;&lt;br/&gt;
Date: 2025-05-15 07:11:17 +0000</comment>
                            <comment id="14780234" author="goetz" created="Thu, 15 May 2025 00:12:47 -0700"  >Fix request [21u]&lt;br/&gt;
&lt;br/&gt;
I backport this for parity with 21.0.8-oracle.&lt;br/&gt;
Low risk, simple fix limited to jline usages.&lt;br/&gt;
Needed resolve.&lt;br/&gt;
internal/jline tests pass. SAP nightly testing passed.</comment>
                            <comment id="14679355" author="dukebot" created="Wed, 5 Jun 2024 21:46:22 -0700"  >Changeset: b3f540d3&lt;br/&gt;
Author:    Jan Lahoda &amp;lt;&lt;a href=&apos;mailto:jlahoda@openjdk.org&apos;&gt;jlahoda@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-06-06 04:43:36 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/b3f540d354c4a4e2f2199019a2b880a373699560&quot;&gt;https://git.openjdk.org/jdk/commit/b3f540d354c4a4e2f2199019a2b880a373699560&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14679169" author="roboduke" created="Wed, 5 Jun 2024 06:14:21 -0700"  >A pull request was submitted for review.&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/19559&quot;&gt;https://git.openjdk.org/jdk/pull/19559&lt;/a&gt;&lt;br/&gt;
Date: 2024-06-05 13:09:01 +0000</comment>
                            <comment id="14678759" author="jlahoda" created="Tue, 4 Jun 2024 06:42:13 -0700"  >FWIW, (some) JLine&amp;#39;s Terminal reset signal handlers to default, when a special flag &amp;quot;nativeSignals&amp;quot; is set. In which case the handler that runs the shutdown handlers is removed, and the handlers are not invoked.&lt;br/&gt;
&lt;br/&gt;
This has been the case for a long time, the new thing is that this setting was changed from `false` to `true` by default:&lt;br/&gt;
&lt;a href=&quot;https://github.com/jline/jline3/pull/971&quot;&gt;https://github.com/jline/jline3/pull/971&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The fix for this is easy, just explicitly set the flag to `false`. Testing this proves to be somewhat harder, working on that.&lt;br/&gt;
</comment>
                            <comment id="14676552" author="dfuchs" created="Mon, 27 May 2024 08:41:04 -0700"  >[~apangin] It is unclear to me whether the fix would involve changing code in `jd.internal.le` or in `java.base`. I have changed the component to `tools/jshell` so that the issue appears on the radar screen of the maintainers of jshell (who have upgraded the version of `jline`). The issue may be retargetted back to core-libs/java.io later if it appears the fix should be made in java.base instead.</comment>
                            <comment id="14676547" author="apangin" created="Mon, 27 May 2024 08:15:02 -0700"  >Why was this bug reclassified to another category? It has nothing to do with jshell (except that jshell also uses JLine). Note that the attached test case does not use any tools - it simply calls System.console(). In fact, I initially encountered the bug when running usual Spring PetClinic application.</comment>
                            <comment id="14676137" author="smarks" created="Fri, 24 May 2024 20:26:02 -0700"  >Seems related: &lt;a href=&quot;https://github.com/jline/jline3/pull/973&quot;&gt;https://github.com/jline/jline3/pull/973&lt;/a&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5149659">JDK-8349148</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5158878">JDK-8357116</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10600">
                    <name>Causes</name>
                                                                <inwardlinks description="caused by">
                                        <issuelink>
            <issuekey id="5123422">JDK-8327476</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10002">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="5131324">JDK-8333794</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                                                <inwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5146963">JDK-8346805</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="109489" name="SigIntTest.java" size="361" author="apangin" created="Mon, 27 May 2024 08:07:47 -0700"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10003" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Introduced In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17640"><![CDATA[b23]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="23032">23</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36h5f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17357"><![CDATA[b26]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="1450"><![CDATA[jshell]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>