<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:15:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8338550] Do libubsan1 installation in test container only if requested</title>
                <link>https://bugs.openjdk.org/browse/JDK-8338550</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>After &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8333144&quot; title=&quot;docker tests do not work when ubsan is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8333144&quot;&gt;&lt;strike&gt;JDK-8333144&lt;/strike&gt;&lt;/a&gt; docker related tests do not work on manually configured distros other than the &amp;#39;standard&amp;#39; Ubuntu. This is because the basic generated Dockerfile with the change from &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8333144&quot; title=&quot;docker tests do not work when ubsan is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8333144&quot;&gt;&lt;strike&gt;JDK-8333144&lt;/strike&gt;&lt;/a&gt; assumes &amp;#39;apt-get&amp;#39; being available, which is not the case when one runs the testing on RPM based distributions. This isn&amp;#39;t easily noticeable unless one inspects the skipped status of a test or looks at the corresponding jtr file. When the basic container image isn&amp;#39;t buildable, the test is skipped and not run at all.&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
So it is necessary to make the libubsan1 installation optional.</description>
                <environment></environment>
        <key id="5136963">JDK-8338550</key>
            <summary>Do libubsan1 installation in test container only if requested</summary>
                <type id="1" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14703&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbaesken">Matthias Baesken</assignee>
                                    <reporter username="mbaesken">Matthias Baesken</reporter>
                        <labels>
                            <label>containers</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>noreg-self</label>
                            <label>ubsan</label>
                    </labels>
                <created>Sun, 18 Aug 2024 23:49:47 -0700</created>
                <updated>Mon, 6 Jan 2025 00:15:07 -0800</updated>
                            <resolved>Tue, 20 Aug 2024 03:46:21 -0700</resolved>
                                    <version>21</version>
                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14724104" author="roboduke" created="Wed, 20 Nov 2024 00:43:21 -0800"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1165&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1165&lt;/a&gt;&lt;br/&gt;
Date: 2024-11-20 08:36:41 +0000</comment>
                            <comment id="14724103" author="mbaesken" created="Wed, 20 Nov 2024 00:40:03 -0800"  >jdk21u-dev backport request&lt;br/&gt;
I would like to have the patch in jdk21u-dev as well, because the issue is present there too and needed as an addition to &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8333144&quot; title=&quot;docker tests do not work when ubsan is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8333144&quot;&gt;&lt;strike&gt;JDK-8333144&lt;/strike&gt;&lt;/a&gt;. Backport is clean and low risk. </comment>
                            <comment id="14699401" author="dukebot" created="Tue, 20 Aug 2024 03:46:19 -0700"  >Changeset: 7933e45c&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Matthias Baesken &amp;lt;&lt;a href=&apos;mailto:mbaesken@openjdk.org&apos;&gt;mbaesken@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-08-20 10:43:16 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/7933e45cda7e3eaeabd3b3fa81492ade8e1cc2dc&quot;&gt;https://git.openjdk.org/jdk/commit/7933e45cda7e3eaeabd3b3fa81492ade8e1cc2dc&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14699099" author="roboduke" created="Mon, 19 Aug 2024 04:15:30 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/20624&quot;&gt;https://git.openjdk.org/jdk/pull/20624&lt;/a&gt;&lt;br/&gt;
Date: 2024-08-19 11:11:26 +0000</comment>
                            <comment id="14699068" author="sgehwolf" created="Mon, 19 Aug 2024 02:17:15 -0700"  >Example failure after &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8333144&quot; title=&quot;docker tests do not work when ubsan is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8333144&quot;&gt;&lt;strike&gt;JDK-8333144&lt;/strike&gt;&lt;/a&gt;:&lt;br/&gt;
&lt;br/&gt;
# rm -rf JTwork/ JTreport/ &amp;amp;&amp;amp; /disk/openjdk/upstream-sources/jtreg-7.4+1/bin/jtreg -verbose:summary -testjdk:./build/linux-x86_64-server-release/images/jdk -Djdk.test.docker.image.name=fedora -Djdk.test.docker.image.version=39 test/hotspot/jtreg/containers/docker/DockerBasicTest.java&lt;br/&gt;
&lt;br/&gt;
It fails with:&lt;br/&gt;
&lt;br/&gt;
Full child process STDOUT was saved to docker-stdout-48215.log&lt;br/&gt;
[2024-08-16T13:15:37.020346500Z] Waiting for completion for process 48215&lt;br/&gt;
[2024-08-16T13:15:37.020437331Z] Waiting for completion finished for process 48215&lt;br/&gt;
DockerfileConfig: using custom image name: fedora&lt;br/&gt;
DockerfileConfig: using custom image version: 39&lt;br/&gt;
[COMMAND]&lt;br/&gt;
docker build --no-cache --tag jdk-internal:test-containers-docker-DockerBasicTest-basic jdk-internal-test-containers-docker-DockerBasicTest-basic&lt;br/&gt;
[2024-08-16T13:15:38.600886247Z] Gathering output for process 48228&lt;br/&gt;
[ELAPSED: 4390 ms]&lt;br/&gt;
[STDERR]&lt;br/&gt;
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Install the buildx component to build images with BuildKit:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=&quot;https://docs.docker.com/go/buildx/&quot;&gt;https://docs.docker.com/go/buildx/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The command &amp;#39;/bin/sh -c apt-get install libubsan1&amp;#39; returned a non-zero code: 127&lt;br/&gt;
&lt;br/&gt;
[STDOUT]&lt;br/&gt;
Sending build context to Docker daemon 1.083GB&lt;br/&gt;
&lt;br/&gt;
Step 1/5 : FROM fedora:39&lt;br/&gt;
&amp;nbsp;---&amp;gt; c81c8ae4dda7&lt;br/&gt;
Step 2/5 : RUN apt-get install libubsan1&lt;br/&gt;
&amp;nbsp;---&amp;gt; Running in 4a85b39972f5&lt;br/&gt;
\u001b[91m/bin/sh: line 1: apt-get: command not found&lt;br/&gt;
\u001b[0m&lt;br/&gt;
Full child process STDOUT was saved to docker-stdout-48228.log&lt;br/&gt;
[2024-08-16T13:15:42.990834092Z] Waiting for completion for process 48228&lt;br/&gt;
[2024-08-16T13:15:42.990952020Z] Waiting for completion finished for process 48228&lt;br/&gt;
----------System.err:(32/1661)*----------&lt;br/&gt;
&amp;nbsp;stdout: [Sending build context to Docker daemon 1.083GB&lt;br/&gt;
&lt;br/&gt;
Step 1/5 : FROM fedora:39&lt;br/&gt;
&amp;nbsp;---&amp;gt; c81c8ae4dda7&lt;br/&gt;
Step 2/5 : RUN apt-get install libubsan1&lt;br/&gt;
&amp;nbsp;---&amp;gt; Running in 4a85b39972f5&lt;br/&gt;
\u001b[91m/bin/sh: line 1: apt-get: command not found&lt;br/&gt;
\u001b[0m];&lt;br/&gt;
&amp;nbsp;stderr: [DEPRECATED: The legacy builder is deprecated and will be removed in a future release.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Install the buildx component to build images with BuildKit:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;a href=&quot;https://docs.docker.com/go/buildx/&quot;&gt;https://docs.docker.com/go/buildx/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The command &amp;#39;/bin/sh -c apt-get install libubsan1&amp;#39; returned a non-zero code: 127&lt;br/&gt;
]&lt;br/&gt;
&amp;nbsp;exitValue = 127&lt;br/&gt;
&lt;br/&gt;
jtreg.SkippedException: Building docker image failed. Details:&lt;br/&gt;
Expected to get exit value of [0], exit value is: [127]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.test.lib.containers.docker.DockerTestUtils.buildImage(DockerTestUtils.java:190)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.test.lib.containers.docker.DockerTestUtils.buildJdkContainerImage(DockerTestUtils.java:170)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at jdk.test.lib.containers.docker.DockerTestUtils.buildJdkContainerImage(DockerTestUtils.java:132)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at DockerBasicTest.main(DockerBasicTest.java:51)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.base/java.lang.reflect.Method.invoke(Method.java:588) </comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5144377">JDK-8344623</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10003">
                    <name>Relates</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="5130554">JDK-8333144</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17008"><![CDATA[generic]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37l57:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17349"><![CDATA[b12]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>