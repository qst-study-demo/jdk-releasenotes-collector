<!-- 
RSS generated by JIRA (9.12.27#9120027-sha1:edc4490121e366e9e7bd2213d532dbe7e028fc5d) at Sat Sep 27 09:24:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>Java Bug System</title>
    <link>https://bugs.openjdk.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>9.12.27</version>
        <build-number>9120027</build-number>
        <build-date>02-09-2025</build-date>
    </build-info>


<item>
            <title>[JDK-8341146] RISC-V: Unnecessary fences used for load-acquire in template interpreter</title>
                <link>https://bugs.openjdk.org/browse/JDK-8341146</link>
                <project id="10100" key="JDK">JDK</project>
                    <description>&lt;br/&gt;
RISC-V does not currently have plain load and store opcodes with aq or rl annotations, load-acquire and&lt;br/&gt;
store-release operations are implemented using fences instead. Initially, we followed the RISC-V spec&lt;br/&gt;
and placed FENCE RW,RW fence in front of load-acquire operation when porting the template interpreter.&lt;br/&gt;
The purpose is to enforce a store-release-to-load-acquire ordering (where there must be a FENCE RW,RW&lt;br/&gt;
between the store-release and load-acquire). But it turns out these fences are unnecessary for our use&lt;br/&gt;
cases in the template interpreter. In fact, we only need to do a single FENCE R,RW after a normal memory&lt;br/&gt;
load in order to implement a load-acquire operation. We should remove those unnecessary fences for both&lt;br/&gt;
performance reasons and for consistency with the rest of the port (i.e., C1 and C2 JIT).</description>
                <environment></environment>
        <key id="5140228">JDK-8341146</key>
            <summary>RISC-V: Unnecessary fences used for load-acquire in template interpreter</summary>
                <type id="7" iconUrl="https://bugs.openjdk.org/secure/viewavatar?size=xsmall&amp;avatarId=14707&amp;avatarType=issuetype">Enhancement</type>
                                            <priority id="4" iconUrl="https://bugs.openjdk.org/images/jbsImages/p4.png">P4</priority>
                        <status id="5" iconUrl="https://bugs.openjdk.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="success"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fjiang">Feilong Jiang</assignee>
                                    <reporter username="fjiang">Feilong Jiang</reporter>
                        <labels>
                            <label>interpreter</label>
                            <label>jdk17u-fix-request</label>
                            <label>jdk17u-fix-yes</label>
                            <label>jdk21u-fix-request</label>
                            <label>jdk21u-fix-yes</label>
                            <label>jdk23u-fix-SQE-ok</label>
                            <label>jdk23u-fix-request</label>
                            <label>jdk23u-fix-yes</label>
                            <label>oraclejdk-na</label>
                    </labels>
                <created>Sun, 29 Sep 2024 03:48:47 -0700</created>
                <updated>Wed, 19 Mar 2025 10:55:42 -0700</updated>
                            <resolved>Wed, 2 Oct 2024 02:15:08 -0700</resolved>
                                    <version>17</version>
                    <version>21</version>
                    <version>23</version>
                    <version>24</version>
                                    <fixVersion>24</fixVersion>
                                    <component>hotspot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14712839" author="JIRAUSER20521" created="Mon, 14 Oct 2024 17:47:13 -0700"  >Fix Request (17u):&lt;br/&gt;
Hi, The same issue also exists in the jdk17u. I would like to backport 8341146 to jdk17u-dev. becasue jdk17u-dev not have &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8301997&quot; title=&quot;Move method resolution information out of the cpCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8301997&quot;&gt;&lt;strike&gt;JDK-8301997&lt;/strike&gt;&lt;/a&gt;, so this backport is not clean. This is a risc-v specific change, risk is low.</comment>
                            <comment id="14712838" author="JIRAUSER20521" created="Mon, 14 Oct 2024 17:46:05 -0700"  >Fix Request (21u):&lt;br/&gt;
Hi, The same issue also exists in the jdk21u. I would like to backport 8341146 to jdk21u-dev. becasue jdk21u-dev not have &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8301997&quot; title=&quot;Move method resolution information out of the cpCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JDK-8301997&quot;&gt;&lt;strike&gt;JDK-8301997&lt;/strike&gt;&lt;/a&gt;, so this backport is not clean. This is a risc-v specific change, risk is low.</comment>
                            <comment id="14712085" author="roboduke" created="Thu, 10 Oct 2024 18:07:55 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk17u-dev/pull/2958&quot;&gt;https://git.openjdk.org/jdk17u-dev/pull/2958&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-11 01:02:35 +0000</comment>
                            <comment id="14712083" author="roboduke" created="Thu, 10 Oct 2024 17:52:18 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk21u-dev/pull/1044&quot;&gt;https://git.openjdk.org/jdk21u-dev/pull/1044&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-11 00:47:51 +0000</comment>
                            <comment id="14712081" author="roboduke" created="Thu, 10 Oct 2024 17:35:48 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk23u/pull/154&quot;&gt;https://git.openjdk.org/jdk23u/pull/154&lt;/a&gt;&lt;br/&gt;
Date: 2024-10-11 00:30:47 +0000</comment>
                            <comment id="14712079" author="JIRAUSER20521" created="Thu, 10 Oct 2024 17:31:47 -0700"  >Fix Request (23u):&lt;br/&gt;
Hi, The same issue also exists in the jdk23u. I would like to backport 8341146 to jdk23u. This is a risc-v specific change. Backport is clean, risk is low.</comment>
                            <comment id="14709710" author="dukebot" created="Wed, 2 Oct 2024 02:15:07 -0700"  >Changeset: a4ca6267&lt;br/&gt;
Branch: master&lt;br/&gt;
Author:    Feilong Jiang &amp;lt;&lt;a href=&apos;mailto:fjiang@openjdk.org&apos;&gt;fjiang@openjdk.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
Date:      2024-10-02 09:14:31 +0000&lt;br/&gt;
URL:       &lt;a href=&quot;https://git.openjdk.org/jdk/commit/a4ca6267e17815153f8fa119db19b97b1da2bd84&quot;&gt;https://git.openjdk.org/jdk/commit/a4ca6267e17815153f8fa119db19b97b1da2bd84&lt;/a&gt;&lt;br/&gt;
</comment>
                            <comment id="14708740" author="roboduke" created="Sun, 29 Sep 2024 03:57:51 -0700"  >A pull request was submitted for review.&lt;br/&gt;
Branch: master&lt;br/&gt;
URL: &lt;a href=&quot;https://git.openjdk.org/jdk/pull/21248&quot;&gt;https://git.openjdk.org/jdk/pull/21248&lt;/a&gt;&lt;br/&gt;
Date: 2024-09-29 10:52:25 +0000</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10200">
                    <name>Backport</name>
                                            <outwardlinks description="backported by">
                                        <issuelink>
            <issuekey id="5141344">JDK-8342065</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5141716">JDK-8342391</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="5141717">JDK-8342392</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10000" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>CPU</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="20300"><![CDATA[riscv]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11700" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10600" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-fixedBackportedCustomfield">
                        <customfieldname>Fixed</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_10004" key="com.atlassian.jira.plugin.system.customfieldtypes:version">
                        <customfieldname>Introduced In Version</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="22020">19</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10005" key="com.atlassian.jira.plugin.system.customfieldtypes:multiselect">
                        <customfieldname>OS</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17023"><![CDATA[linux]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_11100" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3842r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_11004" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10006" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Resolved In Build</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="17354"><![CDATA[b18]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10008" key="com.oracle.jira.jira-subcomponent-plugin:oracle-subComponentField">
                        <customfieldname>Subcomponent</customfieldname>
                        <customfieldvalues>
                             <customfieldvalue key="192"><![CDATA[runtime]]></customfieldvalue> 
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10601" key="com.oracle.jira.javabugsystem-jira-plugin:jbs-targetBackportedCustomfield">
                        <customfieldname>Targeted</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>